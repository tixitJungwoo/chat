{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:sandstorm/client/powerboxListener.js","meteor://ðŸ’»app/packages/rocketchat:sandstorm/client/setPath.js"],"names":["RocketChat","Sandstorm","request","Meteor","settings","public","sandstorm","callbackMap","messageListener","event","data","rpcId","cb","error","window","addEventListener","interfaces","uiView","interfaceName","Math","random","toString","parent","postMessage","powerboxRequest","query","updateSandstormMetaData","msg","FlowRouter","triggers","enter","path","setPath"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,WAAWC,SAAX,GAAuBD,WAAWC,SAAX,IAAwB,EAA/C;;AAEAD,WAAWC,SAAX,CAAqBC,OAArB,GAA+B,YAAW,CAAE,CAA5C;;AACA,IAAIC,OAAOC,QAAP,CAAgBC,MAAhB,CAAuBC,SAA3B,EAAsC;AACrC,KAAMC,cAAc,EAApB;;AAEA,KAAMC,kBAAkB,UAASC,KAAT,EAAgB;AACvC,MAAIA,MAAMC,IAAN,CAAWC,KAAf,EAAsB;AACrB,OAAMC,KAAKL,YAAYE,MAAMC,IAAN,CAAWC,KAAvB,CAAX;AAEAC,MAAGH,MAAMC,IAAN,CAAWG,KAAd,EAAqBJ,MAAMC,IAA3B;AACA;AACD,EAND;;AAOAI,QAAOC,gBAAP,CAAwB,SAAxB,EAAmCP,eAAnC;AAEA,KAAMQ,aAAa;AAClBC,UAAQ;AADU,EAAnB;;AAIAjB,YAAWC,SAAX,CAAqBC,OAArB,GAA+B,UAASgB,aAAT,EAAwBN,EAAxB,EAA4B;AAC1D,MAAMD,QAAQQ,KAAKC,MAAL,GAAcC,QAAd,EAAd;AACAd,cAAYI,KAAZ,IAAqBC,EAArB;AACAE,SAAOQ,MAAP,CAAcC,WAAd,CAA0B;AAAEC,oBAAiB;AAC5Cb,gBAD4C;AAE5Cc,WAAO,CAACT,WAAWE,aAAX,CAAD;AAFqC;AAAnB,GAA1B,EAGI,GAHJ;AAIA,EAPD;AAQA,0E;;;;;;;;;;;AC3BD,SAASQ,uBAAT,CAAiCC,GAAjC,EAAsC;AACrC,QAAOb,OAAOQ,MAAP,CAAcC,WAAd,CAA0BI,GAA1B,EAA+B,GAA/B,CAAP;AACA;;AAED,IAAIxB,OAAOC,QAAP,CAAgBC,MAAhB,CAAuBC,SAA3B,EAAsC;AACrC;AACA;AAEAsB,YAAWC,QAAX,CAAoBC,KAApB,CAA0B,CAAC,gBAAc;AAAA,MAAXC,IAAW,QAAXA,IAAW;AACxCL,0BAAwB;AAAEM,YAASD;AAAX,GAAxB;AACA,EAFyB,CAA1B;AAGA,0E","file":"/packages/rocketchat_sandstorm.js","sourcesContent":["RocketChat.Sandstorm = RocketChat.Sandstorm || {};\n\nRocketChat.Sandstorm.request = function() {};\nif (Meteor.settings.public.sandstorm) {\n\tconst callbackMap = {};\n\n\tconst messageListener = function(event) {\n\t\tif (event.data.rpcId) {\n\t\t\tconst cb = callbackMap[event.data.rpcId];\n\n\t\t\tcb(event.data.error, event.data);\n\t\t}\n\t};\n\twindow.addEventListener('message', messageListener);\n\n\tconst interfaces = {\n\t\tuiView: 'EAZQAQEAABEBF1EEAQH_5-Jn6pjXtNsAAAA'\n\t};\n\n\tRocketChat.Sandstorm.request = function(interfaceName, cb) {\n\t\tconst rpcId = Math.random().toString();\n\t\tcallbackMap[rpcId] = cb;\n\t\twindow.parent.postMessage({ powerboxRequest: {\n\t\t\trpcId,\n\t\t\tquery: [interfaces[interfaceName]]\n\t\t}}, '*');\n\t};\n}\n","function updateSandstormMetaData(msg) {\n\treturn window.parent.postMessage(msg, '*');\n}\n\nif (Meteor.settings.public.sandstorm) {\n\t// Set the path of the parent frame when the grain's path changes.\n\t// See https://docs.sandstorm.io/en/latest/developing/path/\n\n\tFlowRouter.triggers.enter([({ path }) => {\n\t\tupdateSandstormMetaData({ setPath: path });\n\t}]);\n}\n"]}