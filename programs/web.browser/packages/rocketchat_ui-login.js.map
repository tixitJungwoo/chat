{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:ui-login/client/routes.js","meteor://ðŸ’»app/packages/rocketchat:ui-login/client/reset-password/resetPassword.js","meteor://ðŸ’»app/packages/rocketchat:ui-login/client/login/layout.js","meteor://ðŸ’»app/packages/rocketchat:ui-login/client/login/footer.js","meteor://ðŸ’»app/packages/rocketchat:ui-login/client/login/form.js","meteor://ðŸ’»app/packages/rocketchat:ui-login/client/login/header.js","meteor://ðŸ’»app/packages/rocketchat:ui-login/client/login/services.js","meteor://ðŸ’»app/packages/rocketchat:ui-login/client/username/username.js"],"names":["FlowRouter","route","name","action","BlazeLayout","render","center","toastr","module","watch","require","v","Template","resetPassword","helpers","requirePasswordChange","user","Meteor","requirePasswordChangeReason","events","event","$","currentTarget","parents","addClass","value","removeClass","instance","preventDefault","button","RocketChat","Button","loading","userId","call","find","error","console","log","swal","title","t","type","Accounts","getParam","reset","go","success","callbacks","run","onRendered","focus","loginLayout","remove","loginFooter","LanguageVersion","languageVersion","get","TAPi18n","__","lng","e","userLanguage","localStorage","setItem","setLanguage","moment","locale","set","defaultUserLanguage","onCreated","self","ReactiveVar","getItem","_loadLanguage","done","indexOf","loginForm","userName","username","namePlaceholder","settings","showFormLogin","state","btnLoginSave","loginTerms","registrationAllowed","validSecretUrl","validSecretURL","linkReplacementText","passwordResetAllowed","requirePasswordConfirmation","emailOrUsernamePlaceholder","passwordPlaceholder","hasOnePassword","OnePassword","findLoginForUrl","device","platform","toLocaleLowerCase","target","formData","validate","s","trim","email","err","handleError","secretURL","reason","loginWithPassword","pass","Session","loginMethod","emailOrUsername","language","succesCallback","credentials","val","password","errorCallback","arguments","absoluteUrl","customFields","Tracker","autorun","Accounts_CustomFields","JSON","parse","error1","sandstorm","validateCustomFields","formObj","validationObj","field","hasOwnProperty","customField","required","maxLength","length","minLength","serializeArray","forEach","test","text","_","isEmpty","Object","keys","key","defer","select","loginHeader","logoUrl","asset","prefix","__meteor_runtime_config__","ROOT_URL_PATH_PREFIX","url","defaultUrl","startup","ServiceConfiguration","configurations","custom","observe","added","record","CustomOAuth","service","serverURL","authorizePath","scope","loginServices","loginService","services","authServices","sort","fetch","icon","serviceName","capitalize","push","displayName","longinMethods","loadingIcon","serviceIcon","isCordova","loginWithFacebookCordova","stringify","message","loginWithService","serviceConfig","clientConfig","ready","empty","invalid"],"mappings":"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","file":"/packages/rocketchat_ui-login.js","sourcesContent":["FlowRouter.route('/reset-password/:token', {\n\tname: 'resetPassword',\n\taction() {\n\t\tBlazeLayout.render('loginLayout', {center: 'resetPassword'});\n\t}\n});\n","import toastr from 'toastr';\nTemplate.resetPassword.helpers({\n\trequirePasswordChange() {\n\t\tconst user = Meteor.user();\n\t\tif (user) {\n\t\t\treturn user.requirePasswordChange;\n\t\t}\n\t},\n\trequirePasswordChangeReason() {\n\t\tconst user = Meteor.user();\n\t\tif (user) {\n\t\t\treturn user.requirePasswordChangeReason;\n\t\t}\n\t}\n});\n\nTemplate.resetPassword.events({\n\t'focus .input-text input'(event) {\n\t\t$(event.currentTarget).parents('.input-text').addClass('focus');\n\t},\n\t'blur .input-text input'(event) {\n\t\tif (event.currentTarget.value === '') {\n\t\t\t$(event.currentTarget).parents('.input-text').removeClass('focus');\n\t\t}\n\t},\n\t'submit #login-card'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tconst button = instance.$('button.resetpass');\n\t\tRocketChat.Button.loading(button);\n\n\t\tif (Meteor.userId()) {\n\t\t\tMeteor.call('setUserPassword', instance.find('[name=newPassword]').value, function(error) {\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tswal({\n\t\t\t\t\t\ttitle: t('Error_changing_password'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tAccounts.resetPassword(FlowRouter.getParam('token'), instance.find('[name=newPassword]').value, function(error) {\n\t\t\t\tRocketChat.Button.reset(button);\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tswal({\n\t\t\t\t\t\ttitle: t('Error_changing_password'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tFlowRouter.go('home');\n\t\t\t\t\ttoastr.success(t('Password_changed_successfully'));\n\t\t\t\t\tRocketChat.callbacks.run('userPasswordReset');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n\nTemplate.resetPassword.onRendered(function() {\n\tthis.find('[name=newPassword]').focus();\n});\n","Template.loginLayout.onRendered(function() {\n\t$('#initial-page-loading').remove();\n});\n","/*globals defaultUserLanguage */\nTemplate.loginFooter.helpers({\n\tLanguageVersion() {\n\t\tif (Template.instance().languageVersion.get()) {\n\t\t\treturn TAPi18n.__('Language_Version', {\n\t\t\t\tlng: Template.instance().languageVersion.get()\n\t\t\t});\n\t\t}\n\t}\n});\n\nTemplate.loginFooter.events({\n\t'click button.switch-language'(e, t) {\n\t\tconst userLanguage = t.languageVersion.get();\n\t\tlocalStorage.setItem('userLanguage', userLanguage);\n\t\tTAPi18n.setLanguage(userLanguage);\n\t\tmoment.locale(userLanguage);\n\t\treturn t.languageVersion.set(userLanguage !== defaultUserLanguage() ? defaultUserLanguage() : 'en');\n\t}\n});\n\nTemplate.loginFooter.onCreated(function() {\n\tconst self = this;\n\tthis.languageVersion = new ReactiveVar;\n\tconst userLanguage = localStorage.getItem('userLanguage');\n\tif (userLanguage !== defaultUserLanguage()) {\n\t\treturn TAPi18n._loadLanguage(defaultUserLanguage()).done(function() {\n\t\t\treturn self.languageVersion.set(defaultUserLanguage());\n\t\t});\n\t} else if (userLanguage.indexOf('en') !== 0) {\n\t\treturn TAPi18n._loadLanguage('en').done(function() {\n\t\t\treturn self.languageVersion.set('en');\n\t\t});\n\t}\n});\n","/*globals OnePassword, device, setLanguage */\nimport toastr from \"toastr\";\n\nTemplate.loginForm.helpers({\n    userName() {\n        const user = Meteor.user();\n        return user && user.username;\n    },\n    namePlaceholder() {\n        if (RocketChat.settings.get('Accounts_RequireNameForSignUp')) {\n            return t('Name');\n        } else {\n            return t('Name_optional');\n        }\n    },\n    showFormLogin() {\n        return RocketChat.settings.get('Accounts_ShowFormLogin');\n    },\n    state(...state) {\n        return state.indexOf(Template.instance().state.get()) > -1;\n    },\n    btnLoginSave() {\n        console.log(\"#### btnLoginSave\");\n        if (Template.instance().loading.get()) {\n            return `${ t('Please_wait') }...`;\n        }\n        switch (Template.instance().state.get()) {\n            case 'register':\n                return t('Register');\n            case 'login':\n                return t('Login');\n            case 'email-verification':\n                return t('Send_confirmation_email');\n            case 'forgot-password':\n                return t('Reset_password');\n        }\n    },\n    loginTerms() {\n        return RocketChat.settings.get('Layout_Login_Terms');\n    },\n    registrationAllowed() {\n        const validSecretUrl = Template.instance().validSecretURL;\n        return RocketChat.settings.get('Accounts_RegistrationForm') === 'Public' || (validSecretUrl && validSecretUrl.get());\n    },\n    linkReplacementText() {\n        return RocketChat.settings.get('Accounts_RegistrationForm_LinkReplacementText');\n    },\n    passwordResetAllowed() {\n        return RocketChat.settings.get('Accounts_PasswordReset');\n    },\n    requirePasswordConfirmation() {\n        return RocketChat.settings.get('Accounts_RequirePasswordConfirmation');\n    },\n    emailOrUsernamePlaceholder() {\n        return RocketChat.settings.get('Accounts_EmailOrUsernamePlaceholder') || t('Email_or_username');\n    },\n    passwordPlaceholder() {\n        return RocketChat.settings.get('Accounts_PasswordPlaceholder') || t('Password');\n    },\n    hasOnePassword() {\n        return typeof OnePassword !== 'undefined' && OnePassword.findLoginForUrl && typeof device !== 'undefined' && device.platform && device.platform.toLocaleLowerCase() === 'ios';\n    }\n});\n\nTemplate.loginForm.events({\n    'submit #login-card'(event, instance) {\n        event.preventDefault();\n        $(event.target).find('button.login').focus();\n        instance.loading.set(true);\n        const formData = instance.validate();\n        const state = instance.state.get();\n        if (formData) {\n            if (state === 'email-verification') {\n                Meteor.call('sendConfirmationEmail', s.trim(formData.email), () => {\n                    instance.loading.set(false);\n                    RocketChat.callbacks.run('userConfirmationEmailRequested');\n                    toastr.success(t('We_have_sent_registration_email'));\n                    return instance.state.set('login');\n                });\n                return;\n            }\n            if (state === 'forgot-password') {\n                Meteor.call('sendForgotPasswordEmail', s.trim(formData.email), (err) => {\n                    if (err) {\n                        handleError(err);\n                        return instance.state.set('login');\n                    } else {\n                        instance.loading.set(false);\n                        RocketChat.callbacks.run('userForgotPasswordEmailRequested');\n                        toastr.success(t('If_this_email_is_registered'));\n                        return instance.state.set('login');\n                    }\n                });\n                return;\n            }\n            if (state === 'register') {\n                formData.secretURL = FlowRouter.getParam('hash');\n                return Meteor.call('registerUser', formData, function (error) {\n                    instance.loading.set(false);\n                    if (error != null) {\n                        if (error.reason === 'Email already exists.') {\n                            toastr.error(t('Email_already_exists'));\n                        } else {\n                            handleError(error);\n                        }\n                        return;\n                    }\n                    RocketChat.callbacks.run('userRegistered');\n                    return Meteor.loginWithPassword(s.trim(formData.email), formData.pass, function (error) {\n                        if (error && error.error === 'error-invalid-email') {\n                            toastr.success(t('We_have_sent_registration_email'));\n                            return instance.state.set('login');\n                        } else if (error && error.error === 'error-user-is-not-activated') {\n                            return instance.state.set('wait-activation');\n                        } else {\n                            Session.set('forceLogin', false);\n                        }\n                    });\n                });\n            } else {\n                let loginMethod = 'loginWithPassword';\n                if (RocketChat.settings.get('LDAP_Enable')) {\n                    loginMethod = 'loginWithLDAP';\n                }\n                if (RocketChat.settings.get('CROWD_Enable')) {\n                    loginMethod = 'loginWithCrowd';\n                }\n                return Meteor[loginMethod](s.trim(formData.emailOrUsername), formData.pass, function (error) {\n                    const user = Meteor.user();\n                    instance.loading.set(false);\n                    if (error != null) {\n                        if (error.error === 'no-valid-email') {\n                            instance.state.set('email-verification');\n                        } else {\n                            toastr.error(t('User_not_found_or_incorrect_password'));\n                        }\n                        return;\n                    }\n                    Session.set('forceLogin', false);\n                    if (user && user.language) {\n                        localStorage.setItem('userLanguage', user.language);\n                        return setLanguage(Meteor.user().language);\n                    }\n                });\n            }\n        }\n    },\n    'click .register'() {\n        Template.instance().state.set('register');\n        return RocketChat.callbacks.run('loginPageStateChange', Template.instance().state.get());\n    },\n    'click .back-to-login'() {\n        Template.instance().state.set('login');\n        return RocketChat.callbacks.run('loginPageStateChange', Template.instance().state.get());\n    },\n    'click .forgot-password'() {\n        Template.instance().state.set('forgot-password');\n        return RocketChat.callbacks.run('loginPageStateChange', Template.instance().state.get());\n    },\n    'click .one-passsword'() {\n        if (typeof OnePassword === 'undefined' || OnePassword.findLoginForUrl == null) {\n            return;\n        }\n        const succesCallback = function (credentials) {\n            $('input[name=emailOrUsername]').val(credentials.username);\n            return $('input[name=pass]').val(credentials.password);\n        };\n        const errorCallback = function () {\n            return console.log('OnePassword errorCallback', arguments);\n        };\n        return OnePassword.findLoginForUrl(succesCallback, errorCallback, Meteor.absoluteUrl());\n    }\n});\n\nTemplate.loginForm.onCreated(function () {\n    const instance = this;\n    this.customFields = new ReactiveVar;\n    this.loading = new ReactiveVar(false);\n    Tracker.autorun(() => {\n        const Accounts_CustomFields = RocketChat.settings.get('Accounts_CustomFields');\n        if (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n            try {\n                return this.customFields.set(JSON.parse(RocketChat.settings.get('Accounts_CustomFields')));\n            } catch (error1) {\n                return console.error('Invalid JSON for Accounts_CustomFields');\n            }\n        } else {\n            return this.customFields.set(null);\n        }\n    });\n    if (Meteor.settings['public'].sandstorm) {\n        this.state = new ReactiveVar('sandstorm');\n    } else if (Session.get('loginDefaultState')) {\n        this.state = new ReactiveVar(Session.get('loginDefaultState'));\n    } else {\n        this.state = new ReactiveVar('login');\n    }\n    this.validSecretURL = new ReactiveVar(false);\n    const validateCustomFields = function (formObj, validationObj) {\n        const customFields = instance.customFields.get();\n        if (!customFields) {\n            return;\n        }\n\n        for (const field in formObj) {\n            if (formObj.hasOwnProperty(field)) {\n                const value = formObj[field];\n                if (customFields[field] == null) {\n                    continue;\n                }\n                const customField = customFields[field];\n                if (customField.required === true && !value) {\n                    return validationObj[field] = t('Field_required');\n                }\n                if ((customField.maxLength != null) && value.length > customField.maxLength) {\n                    return validationObj[field] = t('Max_length_is', customField.maxLength);\n                }\n                if ((customField.minLength != null) && value.length < customField.minLength) {\n                    return validationObj[field] = t('Min_length_is', customField.minLength);\n                }\n            }\n        }\n    };\n    this.validate = function () {\n        const formData = $('#login-card').serializeArray();\n        const formObj = {};\n        const validationObj = {};\n        formData.forEach((field) => {\n            formObj[field.name] = field.value;\n        });\n        const state = instance.state.get();\n        if (state !== 'login') {\n            if (!(formObj['email'] && /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]+\\b/i.test(formObj['email']))) {\n                validationObj['email'] = t('Invalid_email');\n            }\n        }\n        if (state === 'login') {\n            if (!formObj['emailOrUsername']) {\n                validationObj['emailOrUsername'] = t('Invalid_email');\n            }\n        }\n        if (state !== 'forgot-password') {\n            if (!formObj['pass']) {\n                validationObj['pass'] = t('Invalid_pass');\n            }\n        }\n        if (state === 'register') {\n            if (RocketChat.settings.get('Accounts_RequireNameForSignUp') && !formObj['name']) {\n                validationObj['name'] = t('Invalid_name');\n            }\n            if (RocketChat.settings.get('Accounts_RequirePasswordConfirmation') && formObj['confirm-pass'] !== formObj['pass']) {\n                validationObj['confirm-pass'] = t('Invalid_confirm_pass');\n            }\n            validateCustomFields(formObj, validationObj);\n        }\n        $('#login-card h2').removeClass('error');\n        $('#login-card input.error, #login-card select.error').removeClass('error');\n        $('#login-card .input-error').text('');\n        if (!_.isEmpty(validationObj)) {\n            $('#login-card h2').addClass('error');\n\n            Object.keys(validationObj).forEach((key) => {\n                const value = validationObj[key];\n                $(`#login-card input[name=${ key }], #login-card select[name=${ key }]`).addClass('error');\n                $(`#login-card input[name=${ key }]~.input-error, #login-card select[name=${ key }]~.input-error`).text(value);\n            });\n            instance.loading.set(false);\n            return false;\n        }\n        return formObj;\n    };\n    if (FlowRouter.getParam('hash')) {\n        return Meteor.call('checkRegistrationSecretURL', FlowRouter.getParam('hash'), () => {\n            return this.validSecretURL.set(true);\n        });\n    }\n});\n\nTemplate.loginForm.onRendered(function () {\n    Session.set('loginDefaultState');\n    return Tracker.autorun(() => {\n        RocketChat.callbacks.run('loginPageStateChange', this.state.get());\n        switch (this.state.get()) {\n            case 'login':\n            case 'forgot-password':\n            case 'email-verification':\n                return Meteor.defer(function () {\n                    return $('input[name=email]').select().focus();\n                });\n            case 'register':\n                return Meteor.defer(function () {\n                    return $('input[name=name]').select().focus();\n                });\n        }\n    });\n});\n","Template.loginHeader.helpers({\n\tlogoUrl() {\n\t\tconst asset = RocketChat.settings.get('Assets_logo');\n\t\tconst prefix = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\t\tif (asset != null) {\n\t\t\treturn `${ prefix }/${ asset.url || asset.defaultUrl }`;\n\t\t}\n\t}\n});\n","/* globals CustomOAuth */\nimport toastr from 'toastr';\n\nMeteor.startup(function() {\n\treturn ServiceConfiguration.configurations.find({\n\t\tcustom: true\n\t}).observe({\n\t\tadded(record) {\n\t\t\treturn new CustomOAuth(record.service, {\n\t\t\t\tserverURL: record.serverURL,\n\t\t\t\tauthorizePath: record.authorizePath,\n\t\t\t\tscope: record.scope\n\t\t\t});\n\t\t}\n\t});\n});\n\nTemplate.loginServices.helpers({\n\tloginService() {\n\t\tconst services = [];\n\t\tconst authServices = ServiceConfiguration.configurations.find({}, {\n\t\t\tsort: {\n\t\t\t\tservice: 1\n\t\t\t}\n\t\t}).fetch();\n\t\tauthServices.forEach(function(service) {\n\t\t\tlet icon;\n\t\t\tlet serviceName;\n\t\t\tswitch (service.service) {\n\t\t\t\tcase 'meteor-developer':\n\t\t\t\t\tserviceName = 'Meteor';\n\t\t\t\t\ticon = 'meteor';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'github':\n\t\t\t\t\tserviceName = 'GitHub';\n\t\t\t\t\ticon = 'github-circled';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'gitlab':\n\t\t\t\t\tserviceName = 'GitLab';\n\t\t\t\t\ticon = service.service;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'wordpress':\n\t\t\t\t\tserviceName = 'WordPress';\n\t\t\t\t\ticon = service.service;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tserviceName = _.capitalize(service.service);\n\t\t\t\t\ticon = service.service;\n\t\t\t}\n\t\t\treturn services.push({\n\t\t\t\tservice,\n\t\t\t\tdisplayName: serviceName,\n\t\t\t\ticon\n\t\t\t});\n\t\t});\n\t\treturn services;\n\t}\n});\n\nconst longinMethods = {\n\t'meteor-developer': 'MeteorDeveloperAccount',\n\t'linkedin': 'LinkedIn'\n};\n\nTemplate.loginServices.events({\n\t'click .external-login'(e) {\n\t\tif (this.service == null || this.service.service == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst loadingIcon = $(e.currentTarget).find('.loading-icon');\n\t\tconst serviceIcon = $(e.currentTarget).find('.service-icon');\n\t\tloadingIcon.removeClass('hidden');\n\t\tserviceIcon.addClass('hidden');\n\t\tif (Meteor.isCordova && this.service.service === 'facebook') {\n\t\t\treturn Meteor.loginWithFacebookCordova({}, function(error) {\n\t\t\t\tloadingIcon.addClass('hidden');\n\t\t\t\tserviceIcon.removeClass('hidden');\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.log(JSON.stringify(error));\n\t\t\t\t\tif (error.reason) {\n\t\t\t\t\t\ttoastr.error(error.reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoastr.error(error.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tconst loginWithService = `loginWith${ longinMethods[this.service.service] || _.capitalize(this.service.service) }`;\n\t\t\tconst serviceConfig = this.service.clientConfig || {};\n\t\t\treturn Meteor[loginWithService](serviceConfig, function(error) {\n\t\t\t\tloadingIcon.addClass('hidden');\n\t\t\t\tserviceIcon.removeClass('hidden');\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.log(JSON.stringify(error));\n\t\t\t\t\tif (error.reason) {\n\t\t\t\t\t\ttoastr.error(error.reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoastr.error(error.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n","Template.username.onCreated(function() {\n\tconst self = this;\n\tself.username = new ReactiveVar;\n\n\treturn Meteor.call('getUsernameSuggestion', function(error, username) {\n\t\tself.username.set({\n\t\t\tready: true,\n\t\t\tusername\n\t\t});\n\t\treturn Meteor.defer(() => self.find('input').focus());\n\t});\n});\n\nTemplate.username.helpers({\n\tusername() {\n\t\treturn Template.instance().username.get();\n\t}\n});\n\nTemplate.username.events({\n\t'focus .input-text input'(event) {\n\t\treturn $(event.currentTarget).parents('.input-text').addClass('focus');\n\t},\n\n\t'blur .input-text input'(event) {\n\t\tif (event.currentTarget.value === '') {\n\t\t\treturn $(event.currentTarget).parents('.input-text').removeClass('focus');\n\t\t}\n\t},\n\n\t'submit #login-card'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tconst username = instance.username.get();\n\t\tusername.empty = false;\n\t\tusername.error = false;\n\t\tusername.invalid = false;\n\t\tinstance.username.set(username);\n\n\t\tconst button = $(event.target).find('button.login');\n\t\tRocketChat.Button.loading(button);\n\n\t\tconst value = $('#username').val().trim();\n\t\tif (value === '') {\n\t\t\tusername.empty = true;\n\t\t\tinstance.username.set(username);\n\t\t\tRocketChat.Button.reset(button);\n\t\t\treturn;\n\t\t}\n\n\t\treturn Meteor.call('setUsername', value, function(err) {\n\t\t\tif (err != null) {\n\t\t\t\tconsole.log(err);\n\t\t\t\tif (err.error === 'username-invalid') {\n\t\t\t\t\tusername.invalid = true;\n\t\t\t\t} else {\n\t\t\t\t\tusername.error = true;\n\t\t\t\t}\n\t\t\t\tusername.username = value;\n\t\t\t}\n\n\t\t\tRocketChat.Button.reset(button);\n\t\t\tinstance.username.set(username);\n\t\t\treturn RocketChat.callbacks.run('usernameSet');\n\t\t});\n\t}\n});\n"]}