{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/rooms/adminRoomInfo.coffee","meteor://ðŸ’»app/client/rooms/adminRoomInfo.coffee.js","meteor://ðŸ’»app/packages/rocketchat:ui-admin/client/rooms/channelSettingsDefault.js","meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/rooms/adminRooms.coffee","meteor://ðŸ’»app/client/rooms/adminRooms.coffee.js","meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/users/adminInviteUser.coffee","meteor://ðŸ’»app/client/users/adminInviteUser.coffee.js","meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/users/adminUserChannels.coffee","meteor://ðŸ’»app/client/users/adminUserChannels.coffee.js","meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/users/adminUsers.coffee","meteor://ðŸ’»app/client/users/adminUsers.coffee.js","meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/admin.coffee","meteor://ðŸ’»app/client/admin.coffee.js","meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/adminFlex.coffee","meteor://ðŸ’»app/client/adminFlex.coffee.js","meteor://ðŸ’»app/packages/rocketchat_ui-admin/client/adminInfo.coffee","meteor://ðŸ’»app/client/adminInfo.coffee.js"],"names":["toastr","module","import","v","Template","adminRoomInfo","helpers","selectedRoom","Session","get","canEdit","RocketChat","authz","hasAllPermission","rid","editing","field","instance","notDirect","ref","AdminChatRoom","findOne","fields","t","roomType","channelSettings","ChannelSettings","getOptions","roomTypeDescription","roomName","name","roomTopic","topic","archivationState","archived","archivationStateDescription","canDeleteRoom","hasAtLeastOnePermission","readOnly","room","ro","readOnlyDescription","events","swal","title","text","type","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","html","_this","disableButtons","Meteor","call","error","result","handleError","enableButtons","timer","showConfirmButton","e","keyCode","preventDefault","saveSetting","set","$","currentTarget","data","setTimeout","focus","select","onCreated","ReactiveVar","validateRoomType","val","validateRoomName","nameValidation","RegExp","settings","error1","test","room_name","validateRoomTopic","ref1","saveRoomSettings","callbacks","run","err","success","TAPi18n","__","confirmed","results","watch","require","channelSettingsDefault","canMakeDefault","roomDefault","default","defaultDescription","Mongo","Collection","adminRooms","isReady","ready","rooms","isLoading","hasMore","base","limit","count","roomCount","usernames","join","flexData","tabBar","filter","types","RocketChatTabBar","showGroup","FlowRouter","current","route","TabBar","addButton","groups","id","i18nTitle","icon","template","order","addOption","group","validation","autorun","subscription","length","subscribe","filterReg","query","ref2","_","trim","isArray","s","escapeRegExp","$or","$in","find","sort","getSearchTypes","map","input","onRendered","Tracker","afterFlush","SideNav","setFlex","openFlex","which","stopPropagation","value","_id","open","adminInviteUser","isAdmin","hasRole","userId","inviteEmails","emails","rfcMailPattern","validEmails","split","compact","email","clearForm","currentData","close","adminUserChannels","path","username","adminUsers","users","emailAddress","address","tabBarData","fetch","removeClass","addClass","hide","attr","show","TempSettings","getDefaultSetting","setFieldValue","settingId","collectionPrivate","editor","Number","prop","change","next","CodeMirror","setValue","parents","jscolor","admin","cachedCollectionPrivate","CachedCollection","eventType","collection","init","selectedRooms","observe","added","insert","changed","update","removed","remove","onDestroyed","languages","key","language","getLanguages","push","extend","sortBy","unshift","appLanguage","shift","toLowerCase","found","groupId","i","i18nDefaultQuery","item","j","len","len1","name1","sections","setting","getParam","section","sorter","i18nLabel","isString","JSON","parse","i18nDefaultValue","isDisabled","enableQuery","blocked","disabled","isReadonly","readonly","hasChanges","$exists","isSettingChanged","translateSection","indexOf","label","description","i18nDescription","sectionIsCustomOAuth","callbackURL","strRight","absoluteUrl","relativeUrl","url","selectedOption","random","Random","getEditorOptions","lineNumbers","mode","code","gutters","foldGutter","matchBrackets","autoCloseBrackets","matchTags","showTrailingSpace","highlightSelectionMatches","setEditorOnBlur","defer","codeMirror","onChange","onChangeDelayed","changeAdded","getValue","$set","debounce","on","assetAccept","fileConstraints","extensions","autocompleteRoom","rules","roomSearch","noMatchTemplate","roomSearchEmpty","matchAll","selector","match","getColorVariable","color","replace","showResetButton","packageValue","throttle","target","parseInt","forEach","oldSetting","defaultValue","parent","isEmpty","batchSet","$unset","config","inputPlaceholder","inputValue","showInputError","info","asset","ev","blob","files","reader","originalEvent","dataTransfer","FileReader","readAsBinaryString","onloadend","console","log","closest","each","index","refresh","args","details","errorTitle","message","concat","params","apply","codeMirrorBox","event","doc","docId","getAttribute","reject","hasColor","el","adminFlex","settingsFilter","filterRegex","records","record","unique","a","b","adminBoxOptions","AdminBox","overArrow","leaveArrow","closeFlex","menu","moment","adminInfo","statistics","instances","inGB","size","numberFormat","humanReadableTime","time","days","hours","minutes","out","seconds","Math","floor","formatDate","date","format","numFormat","number","Info","build","compile"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"/packages/rocketchat_ui-admin.js","sourcesContent":["import toastr from 'toastr'\nTemplate.adminRoomInfo.helpers\n\tselectedRoom: ->\n\t\treturn Session.get 'adminRoomsSelected'\n\tcanEdit: ->\n\t\treturn RocketChat.authz.hasAllPermission('edit-room', @rid)\n\tediting: (field) ->\n\t\treturn Template.instance().editing.get() is field\n\tnotDirect: ->\n\t\treturn AdminChatRoom.findOne(@rid, { fields: { t: 1 }})?.t isnt 'd'\n\troomType: ->\n\t\treturn AdminChatRoom.findOne(@rid, { fields: { t: 1 }})?.t\n\tchannelSettings: ->\n\t\treturn RocketChat.ChannelSettings.getOptions(null, 'admin-room')\n\troomTypeDescription: ->\n\t\troomType = AdminChatRoom.findOne(@rid, { fields: { t: 1 }})?.t\n\t\tif roomType is 'c'\n\t\t\treturn t('Channel')\n\t\telse if roomType is 'p'\n\t\t\treturn t('Private_Group')\n\troomName: ->\n\t\treturn AdminChatRoom.findOne(@rid, { fields: { name: 1 }})?.name\n\troomTopic: ->\n\t\treturn AdminChatRoom.findOne(@rid, { fields: { topic: 1 }})?.topic\n\tarchivationState: ->\n\t\treturn AdminChatRoom.findOne(@rid, { fields: { archived: 1 }})?.archived\n\tarchivationStateDescription: ->\n\t\tarchivationState = AdminChatRoom.findOne(@rid, { fields: { archived: 1 }})?.archived\n\t\tif archivationState is true\n\t\t\treturn t('Room_archivation_state_true')\n\t\telse\n\t\t\treturn t('Room_archivation_state_false')\n\tcanDeleteRoom: ->\n\t\troomType = AdminChatRoom.findOne(@rid, { fields: { t: 1 }})?.t\n\t\treturn roomType? and RocketChat.authz.hasAtLeastOnePermission(\"delete-#{roomType}\")\n\treadOnly: ->\n\t\troom = AdminChatRoom.findOne(@rid, { fields: { ro: 1 }})\n\t\treturn room?.ro\n\treadOnlyDescription: ->\n\t\troom = AdminChatRoom.findOne(@rid, { fields: { ro: 1 }})\n\t\treadOnly = room?.ro\n\t\tif readOnly is true\n\t\t\treturn t('True')\n\t\telse\n\t\t\treturn t('False')\n\nTemplate.adminRoomInfo.events\n\t'click .delete': ->\n\t\tswal {\n\t\t\ttitle: t('Are_you_sure')\n\t\t\ttext: t('Delete_Room_Warning')\n\t\t\ttype: 'warning'\n\t\t\tshowCancelButton: true\n\t\t\tconfirmButtonColor: '#DD6B55'\n\t\t\tconfirmButtonText: t('Yes_delete_it')\n\t\t\tcancelButtonText: t('Cancel')\n\t\t\tcloseOnConfirm: false\n\t\t\thtml: false\n\t\t}, =>\n\t\t\tswal.disableButtons()\n\n\t\t\tMeteor.call 'eraseRoom', @rid, (error, result) ->\n\t\t\t\tif error\n\t\t\t\t\thandleError(error)\n\t\t\t\t\tswal.enableButtons()\n\t\t\t\telse\n\t\t\t\t\tswal\n\t\t\t\t\t\ttitle: t('Deleted')\n\t\t\t\t\t\ttext: t('Room_has_been_deleted')\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\ttimer: 2000\n\t\t\t\t\t\tshowConfirmButton: false\n\n\t'keydown input[type=text]': (e, t) ->\n\t\tif e.keyCode is 13\n\t\t\te.preventDefault()\n\t\t\tt.saveSetting(@rid)\n\n\t'click [data-edit]': (e, t) ->\n\t\te.preventDefault()\n\t\tt.editing.set($(e.currentTarget).data('edit'))\n\t\tsetTimeout (-> t.$('input.editing').focus().select()), 100\n\n\t'click .cancel': (e, t) ->\n\t\te.preventDefault()\n\t\tt.editing.set()\n\n\t'click .save': (e, t) ->\n\t\te.preventDefault()\n\t\tt.saveSetting(@rid)\n\nTemplate.adminRoomInfo.onCreated ->\n\t@editing = new ReactiveVar\n\n\t@validateRoomType = (rid) =>\n\t\ttype = @$('input[name=roomType]:checked').val()\n\t\tif type not in ['c', 'p']\n\t\t\ttoastr.error t('error-invalid-room-type', { type: type })\n\t\treturn true\n\n\t@validateRoomName = (rid) =>\n\t\troom = AdminChatRoom.findOne rid\n\n\t\tif not RocketChat.authz.hasAllPermission('edit-room', rid) or room.t not in ['c', 'p']\n\t\t\ttoastr.error t('error-not-allowed')\n\t\t\treturn false\n\n\t\tname = $('input[name=roomName]').val()\n\n\t\ttry\n\t\t\tnameValidation = new RegExp '^' + RocketChat.settings.get('UTF8_Names_Validation') + '$'\n\t\tcatch\n\t\t\tnameValidation = new RegExp '^[0-9a-zA-Z-_.]+$'\n\n\t\tif not nameValidation.test name\n\t\t\ttoastr.error t('error-invalid-room-name', { room_name: name })\n\t\t\treturn false\n\n\t\treturn true\n\n\t@validateRoomTopic = (rid) =>\n\t\treturn true\n\n\t@saveSetting = (rid) =>\n\t\tswitch @editing.get()\n\t\t\twhen 'roomName'\n\t\t\t\tif @validateRoomName(rid)\n\t\t\t\t\tRocketChat.callbacks.run 'roomNameChanged', AdminChatRoom.findOne(rid)\n\t\t\t\t\tMeteor.call 'saveRoomSettings', rid, 'roomName', @$('input[name=roomName]').val(), (err, result) ->\n\t\t\t\t\t\tif err\n\t\t\t\t\t\t\treturn handleError(err)\n\t\t\t\t\t\ttoastr.success TAPi18n.__ 'Room_name_changed_successfully'\n\t\t\twhen 'roomTopic'\n\t\t\t\tif @validateRoomTopic(rid)\n\t\t\t\t\tMeteor.call 'saveRoomSettings', rid, 'roomTopic', @$('input[name=roomTopic]').val(), (err, result) ->\n\t\t\t\t\t\tif err\n\t\t\t\t\t\t\treturn handleError(err)\n\t\t\t\t\t\ttoastr.success TAPi18n.__ 'Room_topic_changed_successfully'\n\t\t\t\t\t\tRocketChat.callbacks.run 'roomTopicChanged', AdminChatRoom.findOne(rid)\n\t\t\twhen 'roomAnnouncement'\n\t\t\t\tif @validateRoomTopic(rid)\n\t\t\t\t\tMeteor.call 'saveRoomSettings', rid, 'roomAnnouncement', @$('input[name=roomAnnouncement]').val(), (err, result) ->\n\t\t\t\t\t\tif err\n\t\t\t\t\t\t\treturn handleError(err)\n\t\t\t\t\t\ttoastr.success TAPi18n.__ 'Room_announcement_changed_successfully'\n\t\t\t\t\t\tRocketChat.callbacks.run 'roomAnnouncementChanged', AdminChatRoom.findOne(rid)\n\t\t\twhen 'roomType'\n\t\t\t\tval = @$('input[name=roomType]:checked').val()\n\t\t\t\tif @validateRoomType(rid)\n\t\t\t\t\tRocketChat.callbacks.run 'roomTypeChanged', AdminChatRoom.findOne(rid)\n\t\t\t\t\tsaveRoomSettings = =>\n\t\t\t\t\t\tMeteor.call 'saveRoomSettings', rid, 'roomType', val, (err, result) ->\n\t\t\t\t\t\t\tif err\n\t\t\t\t\t\t\t\treturn handleError(err)\n\t\t\t\t\t\t\t\ttoastr.success TAPi18n.__ 'Room_type_changed_successfully'\n\t\t\t\t\tunless AdminChatRoom.findOne(rid, { fields: { default: 1 }}).default\n\t\t\t\t\t\treturn saveRoomSettings()\n\t\t\t\t\tswal\n\t\t\t\t\t\ttitle: t('Room_default_change_to_private_will_be_default_no_more')\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t\tshowCancelButton: true\n\t\t\t\t\t\tconfirmButtonColor: '#DD6B55'\n\t\t\t\t\t\tconfirmButtonText: t('Yes')\n\t\t\t\t\t\tcancelButtonText: t('Cancel')\n\t\t\t\t\t\tcloseOnConfirm: true\n\t\t\t\t\t\thtml: false\n\t\t\t\t\t\t(confirmed) =>\n\t\t\t\t\t\t\treturn !confirmed || saveRoomSettings()\n\t\t\twhen 'archivationState'\n\t\t\t\tif @$('input[name=archivationState]:checked').val() is 'true'\n\t\t\t\t\tif AdminChatRoom.findOne(rid)?.archived isnt true\n\t\t\t\t\t\tMeteor.call 'archiveRoom', rid, (err, results) ->\n\t\t\t\t\t\t\treturn handleError(err) if err\n\t\t\t\t\t\t\ttoastr.success TAPi18n.__ 'Room_archived'\n\t\t\t\t\t\t\tRocketChat.callbacks.run 'archiveRoom', AdminChatRoom.findOne(rid)\n\t\t\t\telse\n\t\t\t\t\tif AdminChatRoom.findOne(rid)?.archived is true\n\t\t\t\t\t\tMeteor.call 'unarchiveRoom', rid, (err, results) ->\n\t\t\t\t\t\t\treturn handleError(err) if err\n\t\t\t\t\t\t\ttoastr.success TAPi18n.__ 'Room_unarchived'\n\t\t\t\t\t\t\tRocketChat.callbacks.run 'unarchiveRoom', AdminChatRoom.findOne(rid)\n\t\t\twhen 'readOnly'\n\t\t\t\tMeteor.call 'saveRoomSettings', rid, 'readOnly', @$('input[name=readOnly]:checked').val() is 'true', (err, result) ->\n\t\t\t\t\treturn handleError err if err\n\t\t\t\t\ttoastr.success TAPi18n.__ 'Read_only_changed_successfully'\n\t\t@editing.set()\n","import toastr from 'toastr';\n\nTemplate.adminRoomInfo.helpers({\n  selectedRoom: function() {\n    return Session.get('adminRoomsSelected');\n  },\n  canEdit: function() {\n    return RocketChat.authz.hasAllPermission('edit-room', this.rid);\n  },\n  editing: function(field) {\n    return Template.instance().editing.get() === field;\n  },\n  notDirect: function() {\n    var ref;\n    return ((ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        t: 1\n      }\n    })) != null ? ref.t : void 0) !== 'd';\n  },\n  roomType: function() {\n    var ref;\n    return (ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        t: 1\n      }\n    })) != null ? ref.t : void 0;\n  },\n  channelSettings: function() {\n    return RocketChat.ChannelSettings.getOptions(null, 'admin-room');\n  },\n  roomTypeDescription: function() {\n    var ref, roomType;\n    roomType = (ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        t: 1\n      }\n    })) != null ? ref.t : void 0;\n    if (roomType === 'c') {\n      return t('Channel');\n    } else if (roomType === 'p') {\n      return t('Private_Group');\n    }\n  },\n  roomName: function() {\n    var ref;\n    return (ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        name: 1\n      }\n    })) != null ? ref.name : void 0;\n  },\n  roomTopic: function() {\n    var ref;\n    return (ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        topic: 1\n      }\n    })) != null ? ref.topic : void 0;\n  },\n  archivationState: function() {\n    var ref;\n    return (ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        archived: 1\n      }\n    })) != null ? ref.archived : void 0;\n  },\n  archivationStateDescription: function() {\n    var archivationState, ref;\n    archivationState = (ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        archived: 1\n      }\n    })) != null ? ref.archived : void 0;\n    if (archivationState === true) {\n      return t('Room_archivation_state_true');\n    } else {\n      return t('Room_archivation_state_false');\n    }\n  },\n  canDeleteRoom: function() {\n    var ref, roomType;\n    roomType = (ref = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        t: 1\n      }\n    })) != null ? ref.t : void 0;\n    return (roomType != null) && RocketChat.authz.hasAtLeastOnePermission(\"delete-\" + roomType);\n  },\n  readOnly: function() {\n    var room;\n    room = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        ro: 1\n      }\n    });\n    return room != null ? room.ro : void 0;\n  },\n  readOnlyDescription: function() {\n    var readOnly, room;\n    room = AdminChatRoom.findOne(this.rid, {\n      fields: {\n        ro: 1\n      }\n    });\n    readOnly = room != null ? room.ro : void 0;\n    if (readOnly === true) {\n      return t('True');\n    } else {\n      return t('False');\n    }\n  }\n});\n\nTemplate.adminRoomInfo.events({\n  'click .delete': function() {\n    return swal({\n      title: t('Are_you_sure'),\n      text: t('Delete_Room_Warning'),\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#DD6B55',\n      confirmButtonText: t('Yes_delete_it'),\n      cancelButtonText: t('Cancel'),\n      closeOnConfirm: false,\n      html: false\n    }, (function(_this) {\n      return function() {\n        swal.disableButtons();\n        return Meteor.call('eraseRoom', _this.rid, function(error, result) {\n          if (error) {\n            handleError(error);\n            return swal.enableButtons();\n          } else {\n            return swal({\n              title: t('Deleted'),\n              text: t('Room_has_been_deleted'),\n              type: 'success',\n              timer: 2000,\n              showConfirmButton: false\n            });\n          }\n        });\n      };\n    })(this));\n  },\n  'keydown input[type=text]': function(e, t) {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      return t.saveSetting(this.rid);\n    }\n  },\n  'click [data-edit]': function(e, t) {\n    e.preventDefault();\n    t.editing.set($(e.currentTarget).data('edit'));\n    return setTimeout((function() {\n      return t.$('input.editing').focus().select();\n    }), 100);\n  },\n  'click .cancel': function(e, t) {\n    e.preventDefault();\n    return t.editing.set();\n  },\n  'click .save': function(e, t) {\n    e.preventDefault();\n    return t.saveSetting(this.rid);\n  }\n});\n\nTemplate.adminRoomInfo.onCreated(function() {\n  this.editing = new ReactiveVar;\n  this.validateRoomType = (function(_this) {\n    return function(rid) {\n      var type;\n      type = _this.$('input[name=roomType]:checked').val();\n      if (type !== 'c' && type !== 'p') {\n        toastr.error(t('error-invalid-room-type', {\n          type: type\n        }));\n      }\n      return true;\n    };\n  })(this);\n  this.validateRoomName = (function(_this) {\n    return function(rid) {\n      var name, nameValidation, ref, room;\n      room = AdminChatRoom.findOne(rid);\n      if (!RocketChat.authz.hasAllPermission('edit-room', rid) || ((ref = room.t) !== 'c' && ref !== 'p')) {\n        toastr.error(t('error-not-allowed'));\n        return false;\n      }\n      name = $('input[name=roomName]').val();\n      try {\n        nameValidation = new RegExp('^' + RocketChat.settings.get('UTF8_Names_Validation') + '$');\n      } catch (error1) {\n        nameValidation = new RegExp('^[0-9a-zA-Z-_.]+$');\n      }\n      if (!nameValidation.test(name)) {\n        toastr.error(t('error-invalid-room-name', {\n          room_name: name\n        }));\n        return false;\n      }\n      return true;\n    };\n  })(this);\n  this.validateRoomTopic = (function(_this) {\n    return function(rid) {\n      return true;\n    };\n  })(this);\n  return this.saveSetting = (function(_this) {\n    return function(rid) {\n      var ref, ref1, saveRoomSettings, val;\n      switch (_this.editing.get()) {\n        case 'roomName':\n          if (_this.validateRoomName(rid)) {\n            RocketChat.callbacks.run('roomNameChanged', AdminChatRoom.findOne(rid));\n            Meteor.call('saveRoomSettings', rid, 'roomName', _this.$('input[name=roomName]').val(), function(err, result) {\n              if (err) {\n                return handleError(err);\n              }\n              return toastr.success(TAPi18n.__('Room_name_changed_successfully'));\n            });\n          }\n          break;\n        case 'roomTopic':\n          if (_this.validateRoomTopic(rid)) {\n            Meteor.call('saveRoomSettings', rid, 'roomTopic', _this.$('input[name=roomTopic]').val(), function(err, result) {\n              if (err) {\n                return handleError(err);\n              }\n              toastr.success(TAPi18n.__('Room_topic_changed_successfully'));\n              return RocketChat.callbacks.run('roomTopicChanged', AdminChatRoom.findOne(rid));\n            });\n          }\n          break;\n        case 'roomAnnouncement':\n          if (_this.validateRoomTopic(rid)) {\n            Meteor.call('saveRoomSettings', rid, 'roomAnnouncement', _this.$('input[name=roomAnnouncement]').val(), function(err, result) {\n              if (err) {\n                return handleError(err);\n              }\n              toastr.success(TAPi18n.__('Room_announcement_changed_successfully'));\n              return RocketChat.callbacks.run('roomAnnouncementChanged', AdminChatRoom.findOne(rid));\n            });\n          }\n          break;\n        case 'roomType':\n          val = _this.$('input[name=roomType]:checked').val();\n          if (_this.validateRoomType(rid)) {\n            RocketChat.callbacks.run('roomTypeChanged', AdminChatRoom.findOne(rid));\n            saveRoomSettings = function() {\n              return Meteor.call('saveRoomSettings', rid, 'roomType', val, function(err, result) {\n                if (err) {\n                  return handleError(err);\n                  return toastr.success(TAPi18n.__('Room_type_changed_successfully'));\n                }\n              });\n            };\n            if (!AdminChatRoom.findOne(rid, {\n              fields: {\n                \"default\": 1\n              }\n            })[\"default\"]) {\n              return saveRoomSettings();\n            }\n            swal({\n              title: t('Room_default_change_to_private_will_be_default_no_more'),\n              type: 'warning',\n              showCancelButton: true,\n              confirmButtonColor: '#DD6B55',\n              confirmButtonText: t('Yes'),\n              cancelButtonText: t('Cancel'),\n              closeOnConfirm: true,\n              html: false\n            }, function(confirmed) {\n              return !confirmed || saveRoomSettings();\n            });\n          }\n          break;\n        case 'archivationState':\n          if (_this.$('input[name=archivationState]:checked').val() === 'true') {\n            if (((ref = AdminChatRoom.findOne(rid)) != null ? ref.archived : void 0) !== true) {\n              Meteor.call('archiveRoom', rid, function(err, results) {\n                if (err) {\n                  return handleError(err);\n                }\n                toastr.success(TAPi18n.__('Room_archived'));\n                return RocketChat.callbacks.run('archiveRoom', AdminChatRoom.findOne(rid));\n              });\n            }\n          } else {\n            if (((ref1 = AdminChatRoom.findOne(rid)) != null ? ref1.archived : void 0) === true) {\n              Meteor.call('unarchiveRoom', rid, function(err, results) {\n                if (err) {\n                  return handleError(err);\n                }\n                toastr.success(TAPi18n.__('Room_unarchived'));\n                return RocketChat.callbacks.run('unarchiveRoom', AdminChatRoom.findOne(rid));\n              });\n            }\n          }\n          break;\n        case 'readOnly':\n          Meteor.call('saveRoomSettings', rid, 'readOnly', _this.$('input[name=readOnly]:checked').val() === 'true', function(err, result) {\n            if (err) {\n              return handleError(err);\n            }\n            return toastr.success(TAPi18n.__('Read_only_changed_successfully'));\n          });\n      }\n      return _this.editing.set();\n    };\n  })(this);\n});\n","import toastr from 'toastr';\n/* globals AdminChatRoom */\n\nTemplate.channelSettingsDefault.helpers({\n\tcanMakeDefault() {\n\t\tconst room = AdminChatRoom.findOne(this.rid, { fields: { t: 1 }});\n\t\treturn room && room.t === 'c';\n\t},\n\tediting(field) {\n\t\treturn Template.instance().editing.get() === field;\n\t},\n\troomDefault() {\n\t\tconst room = AdminChatRoom.findOne(this.rid, { fields: { default: 1 }});\n\n\t\tif (room) {\n\t\t\treturn room.default;\n\t\t}\n\t},\n\tdefaultDescription() {\n\t\tconst room = AdminChatRoom.findOne(this.rid, { fields: { default: 1 }});\n\t\tif (room && room.default) {\n\t\t\treturn t('True');\n\t\t} else {\n\t\t\treturn t('False');\n\t\t}\n\t}\n});\n\nTemplate.channelSettingsDefault.events({\n\t'click [data-edit]'(e, t) {\n\t\te.preventDefault();\n\t\tt.editing.set($(e.currentTarget).data('edit'));\n\t\tsetTimeout(() => {\n\t\t\tt.$('input.editing').focus().select();\n\t\t}, 100);\n\t},\n\t'click .cancel'(e, t) {\n\t\te.preventDefault();\n\t\tt.editing.set();\n\t},\n\t'click .save'(e, t) {\n\t\te.preventDefault();\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'default', $('input[name=default]:checked').val(), (err/*, result*/) => {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ttoastr.success(TAPi18n.__('Room_type_changed_successfully'));\n\t\t});\n\n\t\tt.editing.set();\n\t}\n});\n\nTemplate.channelSettingsDefault.onCreated(function() {\n\tthis.editing = new ReactiveVar();\n});\n","@AdminChatRoom = new Mongo.Collection('rocketchat_room')\n\nTemplate.adminRooms.helpers\n\tisReady: ->\n\t\treturn Template.instance().ready?.get()\n\trooms: ->\n\t\treturn Template.instance().rooms()\n\tisLoading: ->\n\t\treturn 'btn-loading' unless Template.instance().ready?.get()\n\thasMore: ->\n\t\treturn Template.instance().limit?.get() is Template.instance().rooms?().count()\n\troomCount: ->\n\t\treturn Template.instance().rooms?().count()\n\tname: ->\n\t\tif @t is 'c' or @t is 'p'\n\t\t\treturn @name\n\t\telse if @t is 'd'\n\t\t\treturn @usernames.join ' x '\n\ttype: ->\n\t\tif @t is 'c'\n\t\t\treturn TAPi18n.__ 'Channel'\n\t\telse if @t is 'd'\n\t\t\treturn TAPi18n.__ 'Direct Message'\n\t\tif @t is 'p'\n\t\t\treturn TAPi18n.__ 'Private Group'\n\tdefault: ->\n\t\tif this.default\n\t\t\treturn t('True')\n\t\telse\n\t\t\treturn t('False')\n\tflexData: ->\n\t\treturn {\n\t\t\ttabBar: Template.instance().tabBar\n\t\t}\n\nTemplate.adminRooms.onCreated ->\n\tinstance = @\n\t@limit = new ReactiveVar 50\n\t@filter = new ReactiveVar ''\n\t@types = new ReactiveVar []\n\t@ready = new ReactiveVar true\n\n\t@tabBar = new RocketChatTabBar();\n\t@tabBar.showGroup(FlowRouter.current().route.name);\n\n\tRocketChat.TabBar.addButton({\n\t\tgroups: ['admin-rooms'],\n\t\tid: 'admin-room',\n\t\ti18nTitle: 'Room_Info',\n\t\ticon: 'icon-info-circled',\n\t\ttemplate: 'adminRoomInfo',\n\t\torder: 1\n\t});\n\n\tRocketChat.ChannelSettings.addOption\n\t\tgroup: ['admin-room']\n\t\tid: 'make-default'\n\t\ttemplate: 'channelSettingsDefault'\n\t\tdata: ->\n\t\t\treturn Session.get('adminRoomsSelected')\n\t\tvalidation: ->\n\t\t\treturn RocketChat.authz.hasAllPermission('view-room-administration')\n\n\t@autorun ->\n\t\tfilter = instance.filter.get()\n\t\ttypes = instance.types.get()\n\n\t\tif types.length is 0\n\t\t\ttypes = ['c', 'd', 'p']\n\n\t\tlimit = instance.limit.get()\n\t\tsubscription = instance.subscribe 'adminRooms', filter, types, limit\n\t\tinstance.ready.set subscription.ready()\n\n\t@rooms = ->\n\t\tfilter = _.trim instance.filter?.get()\n\t\ttypes = instance.types?.get()\n\n\t\tunless _.isArray types\n\t\t\ttypes = []\n\n\t\tquery = {}\n\n\t\tfilter = _.trim filter\n\t\tif filter\n\t\t\tfilterReg = new RegExp s.escapeRegExp(filter), \"i\"\n\t\t\tquery = { $or: [ { name: filterReg }, { t: 'd', usernames: filterReg } ] }\n\n\t\tif types.length\n\t\t\tquery['t'] = { $in: types }\n\n\t\treturn AdminChatRoom.find(query, { limit: instance.limit?.get(), sort: { default: -1, name: 1 } })\n\n\t@getSearchTypes = ->\n\t\treturn _.map $('[name=room-type]:checked'), (input) -> return $(input).val()\n\nTemplate.adminRooms.onRendered ->\n\tTracker.afterFlush ->\n\t\tSideNav.setFlex \"adminFlex\"\n\t\tSideNav.openFlex()\n\nTemplate.adminRooms.events\n\t'keydown #rooms-filter': (e) ->\n\t\tif e.which is 13\n\t\t\te.stopPropagation()\n\t\t\te.preventDefault()\n\n\t'keyup #rooms-filter': (e, t) ->\n\t\te.stopPropagation()\n\t\te.preventDefault()\n\t\tt.filter.set e.currentTarget.value\n\n\t'click .room-info': (e, instance) ->\n\t\te.preventDefault()\n\n\t\tSession.set('adminRoomsSelected', { rid: @_id });\n\n\t\tinstance.tabBar.open('admin-room')\n\n\t'click .load-more': (e, t) ->\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t\tt.limit.set t.limit.get() + 50\n\n\t'change [name=room-type]': (e, t) ->\n\t\tt.types.set t.getSearchTypes()\n","this.AdminChatRoom = new Mongo.Collection('rocketchat_room');\n\nTemplate.adminRooms.helpers({\n  isReady: function() {\n    var ref;\n    return (ref = Template.instance().ready) != null ? ref.get() : void 0;\n  },\n  rooms: function() {\n    return Template.instance().rooms();\n  },\n  isLoading: function() {\n    var ref;\n    if (!((ref = Template.instance().ready) != null ? ref.get() : void 0)) {\n      return 'btn-loading';\n    }\n  },\n  hasMore: function() {\n    var base, ref;\n    return ((ref = Template.instance().limit) != null ? ref.get() : void 0) === (typeof (base = Template.instance()).rooms === \"function\" ? base.rooms().count() : void 0);\n  },\n  roomCount: function() {\n    var base;\n    return typeof (base = Template.instance()).rooms === \"function\" ? base.rooms().count() : void 0;\n  },\n  name: function() {\n    if (this.t === 'c' || this.t === 'p') {\n      return this.name;\n    } else if (this.t === 'd') {\n      return this.usernames.join(' x ');\n    }\n  },\n  type: function() {\n    if (this.t === 'c') {\n      return TAPi18n.__('Channel');\n    } else if (this.t === 'd') {\n      return TAPi18n.__('Direct Message');\n    }\n    if (this.t === 'p') {\n      return TAPi18n.__('Private Group');\n    }\n  },\n  \"default\": function() {\n    if (this[\"default\"]) {\n      return t('True');\n    } else {\n      return t('False');\n    }\n  },\n  flexData: function() {\n    return {\n      tabBar: Template.instance().tabBar\n    };\n  }\n});\n\nTemplate.adminRooms.onCreated(function() {\n  var instance;\n  instance = this;\n  this.limit = new ReactiveVar(50);\n  this.filter = new ReactiveVar('');\n  this.types = new ReactiveVar([]);\n  this.ready = new ReactiveVar(true);\n  this.tabBar = new RocketChatTabBar();\n  this.tabBar.showGroup(FlowRouter.current().route.name);\n  RocketChat.TabBar.addButton({\n    groups: ['admin-rooms'],\n    id: 'admin-room',\n    i18nTitle: 'Room_Info',\n    icon: 'icon-info-circled',\n    template: 'adminRoomInfo',\n    order: 1\n  });\n  RocketChat.ChannelSettings.addOption({\n    group: ['admin-room'],\n    id: 'make-default',\n    template: 'channelSettingsDefault',\n    data: function() {\n      return Session.get('adminRoomsSelected');\n    },\n    validation: function() {\n      return RocketChat.authz.hasAllPermission('view-room-administration');\n    }\n  });\n  this.autorun(function() {\n    var filter, limit, subscription, types;\n    filter = instance.filter.get();\n    types = instance.types.get();\n    if (types.length === 0) {\n      types = ['c', 'd', 'p'];\n    }\n    limit = instance.limit.get();\n    subscription = instance.subscribe('adminRooms', filter, types, limit);\n    return instance.ready.set(subscription.ready());\n  });\n  this.rooms = function() {\n    var filter, filterReg, query, ref, ref1, ref2, types;\n    filter = _.trim((ref = instance.filter) != null ? ref.get() : void 0);\n    types = (ref1 = instance.types) != null ? ref1.get() : void 0;\n    if (!_.isArray(types)) {\n      types = [];\n    }\n    query = {};\n    filter = _.trim(filter);\n    if (filter) {\n      filterReg = new RegExp(s.escapeRegExp(filter), \"i\");\n      query = {\n        $or: [\n          {\n            name: filterReg\n          }, {\n            t: 'd',\n            usernames: filterReg\n          }\n        ]\n      };\n    }\n    if (types.length) {\n      query['t'] = {\n        $in: types\n      };\n    }\n    return AdminChatRoom.find(query, {\n      limit: (ref2 = instance.limit) != null ? ref2.get() : void 0,\n      sort: {\n        \"default\": -1,\n        name: 1\n      }\n    });\n  };\n  return this.getSearchTypes = function() {\n    return _.map($('[name=room-type]:checked'), function(input) {\n      return $(input).val();\n    });\n  };\n});\n\nTemplate.adminRooms.onRendered(function() {\n  return Tracker.afterFlush(function() {\n    SideNav.setFlex(\"adminFlex\");\n    return SideNav.openFlex();\n  });\n});\n\nTemplate.adminRooms.events({\n  'keydown #rooms-filter': function(e) {\n    if (e.which === 13) {\n      e.stopPropagation();\n      return e.preventDefault();\n    }\n  },\n  'keyup #rooms-filter': function(e, t) {\n    e.stopPropagation();\n    e.preventDefault();\n    return t.filter.set(e.currentTarget.value);\n  },\n  'click .room-info': function(e, instance) {\n    e.preventDefault();\n    Session.set('adminRoomsSelected', {\n      rid: this._id\n    });\n    return instance.tabBar.open('admin-room');\n  },\n  'click .load-more': function(e, t) {\n    e.preventDefault();\n    e.stopPropagation();\n    return t.limit.set(t.limit.get() + 50);\n  },\n  'change [name=room-type]': function(e, t) {\n    return t.types.set(t.getSearchTypes());\n  }\n});\n","import toastr from 'toastr'\nTemplate.adminInviteUser.helpers\n\tisAdmin: ->\n\t\treturn RocketChat.authz.hasRole(Meteor.userId(), 'admin')\n\tinviteEmails: ->\n\t\treturn Template.instance().inviteEmails.get()\n\nTemplate.adminInviteUser.events\n\t'click .send': (e, instance) ->\n\t\temails = $('#inviteEmails').val().split /[\\s,;]/\n\t\trfcMailPattern = /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/\n\t\tvalidEmails = _.compact _.map emails, (email) -> return email if rfcMailPattern.test email\n\t\tif validEmails.length\n\t\t\tMeteor.call 'sendInvitationEmail', validEmails, (error, result) ->\n\t\t\t\tif result\n\t\t\t\t\tinstance.clearForm()\n\t\t\t\t\tinstance.inviteEmails.set validEmails\n\t\t\t\tif error\n\t\t\t\t\thandleError(error)\n\t\telse\n\t\t\ttoastr.error t('Send_invitation_email_error')\n\n\t'click .cancel': (e, instance) ->\n\t\tinstance.clearForm()\n\t\tinstance.inviteEmails.set []\n\t\tTemplate.currentData().tabBar.close()\n\nTemplate.adminInviteUser.onCreated ->\n\t@inviteEmails = new ReactiveVar []\n\t@clearForm = ->\n\t\t$('#inviteEmails').val('')\n","import toastr from 'toastr';\n\nTemplate.adminInviteUser.helpers({\n  isAdmin: function() {\n    return RocketChat.authz.hasRole(Meteor.userId(), 'admin');\n  },\n  inviteEmails: function() {\n    return Template.instance().inviteEmails.get();\n  }\n});\n\nTemplate.adminInviteUser.events({\n  'click .send': function(e, instance) {\n    var emails, rfcMailPattern, validEmails;\n    emails = $('#inviteEmails').val().split(/[\\s,;]/);\n    rfcMailPattern = /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n    validEmails = _.compact(_.map(emails, function(email) {\n      if (rfcMailPattern.test(email)) {\n        return email;\n      }\n    }));\n    if (validEmails.length) {\n      return Meteor.call('sendInvitationEmail', validEmails, function(error, result) {\n        if (result) {\n          instance.clearForm();\n          instance.inviteEmails.set(validEmails);\n        }\n        if (error) {\n          return handleError(error);\n        }\n      });\n    } else {\n      return toastr.error(t('Send_invitation_email_error'));\n    }\n  },\n  'click .cancel': function(e, instance) {\n    instance.clearForm();\n    instance.inviteEmails.set([]);\n    return Template.currentData().tabBar.close();\n  }\n});\n\nTemplate.adminInviteUser.onCreated(function() {\n  this.inviteEmails = new ReactiveVar([]);\n  return this.clearForm = function() {\n    return $('#inviteEmails').val('');\n  };\n});\n","Template.adminUserChannels.helpers\n\ttype: ->\n\t\treturn if @t is 'd' then 'at' else if @t is 'p' then 'lock' else 'hash'\n\troute: ->\n\t\treturn switch @t\n\t\t\twhen 'd'\n\t\t\t\tFlowRouter.path('direct', {username: @name})\n\t\t\twhen 'p'\n\t\t\t\tFlowRouter.path('group', {name: @name})\n\t\t\twhen 'c'\n\t\t\t\tFlowRouter.path('channel', {name: @name})\n","Template.adminUserChannels.helpers({\n  type: function() {\n    if (this.t === 'd') {\n      return 'at';\n    } else if (this.t === 'p') {\n      return 'lock';\n    } else {\n      return 'hash';\n    }\n  },\n  route: function() {\n    switch (this.t) {\n      case 'd':\n        return FlowRouter.path('direct', {\n          username: this.name\n        });\n      case 'p':\n        return FlowRouter.path('group', {\n          name: this.name\n        });\n      case 'c':\n        return FlowRouter.path('channel', {\n          name: this.name\n        });\n    }\n  }\n});\n","Template.adminUsers.helpers\n\tisReady: ->\n\t\treturn Template.instance().ready?.get()\n\tusers: ->\n\t\treturn Template.instance().users()\n\tisLoading: ->\n\t\treturn 'btn-loading' unless Template.instance().ready?.get()\n\thasMore: ->\n\t\treturn Template.instance().limit?.get() is Template.instance().users?().length\n\temailAddress: ->\n\t\treturn _.map(@emails, (e) -> e.address).join(', ')\n\tflexData: ->\n\t\treturn {\n\t\t\ttabBar: Template.instance().tabBar\n\t\t\tdata: Template.instance().tabBarData.get()\n\t\t}\n\nTemplate.adminUsers.onCreated ->\n\tinstance = @\n\t@limit = new ReactiveVar 50\n\t@filter = new ReactiveVar ''\n\t@ready = new ReactiveVar true\n\n\t@tabBar = new RocketChatTabBar();\n\t@tabBar.showGroup(FlowRouter.current().route.name);\n\n\t@tabBarData = new ReactiveVar\n\n\tRocketChat.TabBar.addButton({\n\t\tgroups: ['admin-users'],\n\t\tid: 'invite-user',\n\t\ti18nTitle: 'Invite_Users',\n\t\ticon: 'icon-paper-plane',\n\t\ttemplate: 'adminInviteUser',\n\t\torder: 1\n\t})\n\n\tRocketChat.TabBar.addButton({\n\t\tgroups: ['admin-users'],\n\t\tid: 'add-user',\n\t\ti18nTitle: 'Add_User',\n\t\ticon: 'icon-plus',\n\t\ttemplate: 'adminUserEdit',\n\t\torder: 2\n\t})\n\n\tRocketChat.TabBar.addButton({\n\t\tgroups: ['admin-users']\n\t\tid: 'admin-user-info',\n\t\ti18nTitle: 'User_Info',\n\t\ticon: 'icon-user',\n\t\ttemplate: 'adminUserInfo',\n\t\torder: 3\n\t})\n\n\t@autorun ->\n\t\tfilter = instance.filter.get()\n\t\tlimit = instance.limit.get()\n\t\tsubscription = instance.subscribe 'fullUserData', filter, limit\n\t\tinstance.ready.set subscription.ready()\n\n\t@users = ->\n\t\tfilter = _.trim instance.filter?.get()\n\t\tif filter\n\t\t\tfilterReg = new RegExp s.escapeRegExp(filter), \"i\"\n\t\t\tquery = { $or: [ { username: filterReg }, { name: filterReg }, { \"emails.address\": filterReg } ] }\n\t\telse\n\t\t\tquery = {}\n\n\t\tquery.type =\n\t\t\t$in: ['user', 'bot']\n\n\t\treturn Meteor.users.find(query, { limit: instance.limit?.get(), sort: { username: 1, name: 1 } }).fetch()\n\nTemplate.adminUsers.onRendered ->\n\tTracker.afterFlush ->\n\t\tSideNav.setFlex \"adminFlex\"\n\t\tSideNav.openFlex()\n\nTemplate.adminUsers.events\n\t'keydown #users-filter': (e) ->\n\t\tif e.which is 13\n\t\t\te.stopPropagation()\n\t\t\te.preventDefault()\n\n\t'keyup #users-filter': (e, t) ->\n\t\te.stopPropagation()\n\t\te.preventDefault()\n\t\tt.filter.set e.currentTarget.value\n\n\t'click .user-info': (e, instance) ->\n\t\te.preventDefault()\n\n\t\tinstance.tabBarData.set Meteor.users.findOne @_id\n\t\tinstance.tabBar.open('admin-user-info')\n\n\t'click .info-tabs button': (e) ->\n\t\te.preventDefault()\n\t\t$('.info-tabs button').removeClass 'active'\n\t\t$(e.currentTarget).addClass 'active'\n\n\t\t$('.user-info-content').hide()\n\t\t$($(e.currentTarget).attr('href')).show()\n\n\t'click .load-more': (e, t) ->\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t\tt.limit.set t.limit.get() + 50\n","Template.adminUsers.helpers({\n  isReady: function() {\n    var ref;\n    return (ref = Template.instance().ready) != null ? ref.get() : void 0;\n  },\n  users: function() {\n    return Template.instance().users();\n  },\n  isLoading: function() {\n    var ref;\n    if (!((ref = Template.instance().ready) != null ? ref.get() : void 0)) {\n      return 'btn-loading';\n    }\n  },\n  hasMore: function() {\n    var base, ref;\n    return ((ref = Template.instance().limit) != null ? ref.get() : void 0) === (typeof (base = Template.instance()).users === \"function\" ? base.users().length : void 0);\n  },\n  emailAddress: function() {\n    return _.map(this.emails, function(e) {\n      return e.address;\n    }).join(', ');\n  },\n  flexData: function() {\n    return {\n      tabBar: Template.instance().tabBar,\n      data: Template.instance().tabBarData.get()\n    };\n  }\n});\n\nTemplate.adminUsers.onCreated(function() {\n  var instance;\n  instance = this;\n  this.limit = new ReactiveVar(50);\n  this.filter = new ReactiveVar('');\n  this.ready = new ReactiveVar(true);\n  this.tabBar = new RocketChatTabBar();\n  this.tabBar.showGroup(FlowRouter.current().route.name);\n  this.tabBarData = new ReactiveVar;\n  RocketChat.TabBar.addButton({\n    groups: ['admin-users'],\n    id: 'invite-user',\n    i18nTitle: 'Invite_Users',\n    icon: 'icon-paper-plane',\n    template: 'adminInviteUser',\n    order: 1\n  });\n  RocketChat.TabBar.addButton({\n    groups: ['admin-users'],\n    id: 'add-user',\n    i18nTitle: 'Add_User',\n    icon: 'icon-plus',\n    template: 'adminUserEdit',\n    order: 2\n  });\n  RocketChat.TabBar.addButton({\n    groups: ['admin-users'],\n    id: 'admin-user-info',\n    i18nTitle: 'User_Info',\n    icon: 'icon-user',\n    template: 'adminUserInfo',\n    order: 3\n  });\n  this.autorun(function() {\n    var filter, limit, subscription;\n    filter = instance.filter.get();\n    limit = instance.limit.get();\n    subscription = instance.subscribe('fullUserData', filter, limit);\n    return instance.ready.set(subscription.ready());\n  });\n  return this.users = function() {\n    var filter, filterReg, query, ref, ref1;\n    filter = _.trim((ref = instance.filter) != null ? ref.get() : void 0);\n    if (filter) {\n      filterReg = new RegExp(s.escapeRegExp(filter), \"i\");\n      query = {\n        $or: [\n          {\n            username: filterReg\n          }, {\n            name: filterReg\n          }, {\n            \"emails.address\": filterReg\n          }\n        ]\n      };\n    } else {\n      query = {};\n    }\n    query.type = {\n      $in: ['user', 'bot']\n    };\n    return Meteor.users.find(query, {\n      limit: (ref1 = instance.limit) != null ? ref1.get() : void 0,\n      sort: {\n        username: 1,\n        name: 1\n      }\n    }).fetch();\n  };\n});\n\nTemplate.adminUsers.onRendered(function() {\n  return Tracker.afterFlush(function() {\n    SideNav.setFlex(\"adminFlex\");\n    return SideNav.openFlex();\n  });\n});\n\nTemplate.adminUsers.events({\n  'keydown #users-filter': function(e) {\n    if (e.which === 13) {\n      e.stopPropagation();\n      return e.preventDefault();\n    }\n  },\n  'keyup #users-filter': function(e, t) {\n    e.stopPropagation();\n    e.preventDefault();\n    return t.filter.set(e.currentTarget.value);\n  },\n  'click .user-info': function(e, instance) {\n    e.preventDefault();\n    instance.tabBarData.set(Meteor.users.findOne(this._id));\n    return instance.tabBar.open('admin-user-info');\n  },\n  'click .info-tabs button': function(e) {\n    e.preventDefault();\n    $('.info-tabs button').removeClass('active');\n    $(e.currentTarget).addClass('active');\n    $('.user-info-content').hide();\n    return $($(e.currentTarget).attr('href')).show();\n  },\n  'click .load-more': function(e, t) {\n    e.preventDefault();\n    e.stopPropagation();\n    return t.limit.set(t.limit.get() + 50);\n  }\n});\n","import toastr from 'toastr'\nTempSettings = new Mongo.Collection null\nRocketChat.TempSettings = TempSettings\n\ngetDefaultSetting = (settingId) ->\n\treturn RocketChat.settings.collectionPrivate.findOne({_id: settingId})\n\nsetFieldValue = (settingId, value, type, editor) ->\n\tinput = $('.page-settings').find('[name=\"' + settingId + '\"]')\n\n\tswitch type\n\t\twhen 'boolean'\n\t\t\t$('.page-settings').find('[name=\"' + settingId + '\"][value=\"' + Number(value) + '\"]').prop('checked', true).change()\n\t\twhen 'code'\n\t\t\tinput.next()[0].CodeMirror.setValue(value)\n\t\twhen 'color'\n\t\t\tinput.parents('.horizontal').find('select[name=\"color-editor\"]').val(editor).change()\n\t\t\tinput.val(value).change()\n\n\t\t\tif editor is 'color'\n\t\t\t\tnew jscolor(input)\n\n\t\telse\n\t\t\tinput.val(value).change()\n\nTemplate.admin.onCreated ->\n\tif not RocketChat.settings.cachedCollectionPrivate?\n\t\tRocketChat.settings.cachedCollectionPrivate = new RocketChat.CachedCollection({ name: 'private-settings', eventType: 'onLogged' })\n\t\tRocketChat.settings.collectionPrivate = RocketChat.settings.cachedCollectionPrivate.collection\n\t\tRocketChat.settings.cachedCollectionPrivate.init()\n\n\tthis.selectedRooms = new ReactiveVar {}\n\n\tRocketChat.settings.collectionPrivate.find().observe\n\t\tadded: (data) =>\n\t\t\tselectedRooms = this.selectedRooms.get()\n\t\t\tif data.type is 'roomPick'\n\t\t\t\tselectedRooms[data._id] = data.value\n\t\t\t\tthis.selectedRooms.set(selectedRooms)\n\t\t\tTempSettings.insert data\n\t\tchanged: (data) =>\n\t\t\tselectedRooms = this.selectedRooms.get()\n\t\t\tif data.type is 'roomPick'\n\t\t\t\tselectedRooms[data._id] = data.value\n\t\t\t\tthis.selectedRooms.set(selectedRooms)\n\t\t\tTempSettings.update data._id, data\n\t\tremoved: (data) =>\n\t\t\tselectedRooms = this.selectedRooms.get()\n\t\t\tif data.type is 'roomPick'\n\t\t\t\tdelete selectedRooms[data._id]\n\t\t\t\tthis.selectedRooms.set(selectedRooms)\n\t\t\tTempSettings.remove data._id\n\nTemplate.admin.onDestroyed ->\n\tTempSettings.remove {}\n\nTemplate.admin.helpers\n\tlanguages: ->\n\t\tlanguages = TAPi18n.getLanguages()\n\t\tresult = []\n\t\tfor key, language of languages\n\t\t\tresult.push _.extend(language, { key: key })\n\t\tresult = _.sortBy(result, 'key')\n\t\tresult.unshift {\n\t\t\t\"name\": \"Default\",\n\t\t\t\"en\": \"Default\",\n\t\t\t\"key\": \"\"\n\t\t}\n\t\treturn result;\n\n\tappLanguage: (key) ->\n\t\treturn (RocketChat.settings.get('Language'))?.split('-').shift().toLowerCase() is key\n\n\tgroup: ->\n\t\tgroupId = FlowRouter.getParam('group')\n\t\tgroup = RocketChat.settings.collectionPrivate.findOne { _id: groupId, type: 'group' }\n\n\t\tif not group\n\t\t\treturn\n\n\t\tsettings = RocketChat.settings.collectionPrivate.find({ group: groupId }, {sort: {section: 1, sorter: 1, i18nLabel: 1}}).fetch()\n\n\t\tsections = {}\n\t\tfor setting in settings\n\t\t\tif setting.i18nDefaultQuery?\n\t\t\t\tif _.isString(setting.i18nDefaultQuery)\n\t\t\t\t\ti18nDefaultQuery = JSON.parse(setting.i18nDefaultQuery)\n\t\t\t\telse\n\t\t\t\t\ti18nDefaultQuery = setting.i18nDefaultQuery\n\n\t\t\t\tif not _.isArray(i18nDefaultQuery)\n\t\t\t\t\ti18nDefaultQuery = [i18nDefaultQuery]\n\n\t\t\t\tfound = 0\n\t\t\t\tfor item in i18nDefaultQuery\n\t\t\t\t\tif RocketChat.settings.collectionPrivate.findOne(item)?\n\t\t\t\t\t\tsetting.value = TAPi18n.__(setting._id + '_Default')\n\n\t\t\tsections[setting.section or ''] ?= []\n\t\t\tsections[setting.section or ''].push setting\n\n\t\tgroup.sections = []\n\t\tfor key, value of sections\n\t\t\tgroup.sections.push\n\t\t\t\tsection: key\n\t\t\t\tsettings: value\n\n\t\treturn group\n\n\ti18nDefaultValue: ->\n\t\treturn TAPi18n.__(@_id + '_Default')\n\n\tisDisabled: ->\n\t\tif @blocked\n\t\t\treturn { disabled: 'disabled' }\n\n\t\tif not @enableQuery?\n\t\t\treturn {}\n\n\t\tif _.isString(@enableQuery)\n\t\t\tenableQuery = JSON.parse(@enableQuery)\n\t\telse\n\t\t\tenableQuery = @enableQuery\n\n\t\tif not _.isArray(enableQuery)\n\t\t\tenableQuery = [enableQuery]\n\n\t\tfound = 0\n\t\tfor item in enableQuery\n\t\t\tif TempSettings.findOne(item)?\n\t\t\t\tfound++\n\n\t\treturn if found is enableQuery.length then {} else {disabled: 'disabled'}\n\n\tisReadonly: ->\n\t\tif @readonly is true\n\t\t\treturn { readonly: 'readonly' }\n\n\thasChanges: (section) ->\n\t\tgroup = FlowRouter.getParam('group')\n\n\t\tquery =\n\t\t\tgroup: group\n\t\t\tchanged: true\n\n\t\tif section?\n\t\t\tif section is ''\n\t\t\t\tquery.$or = [\n\t\t\t\t\t{section: ''}\n\t\t\t\t\t{section: {$exists: false}}\n\t\t\t\t]\n\t\t\telse\n\t\t\t\tquery.section = section\n\n\t\treturn TempSettings.find(query).count() > 0\n\n\tisSettingChanged: (id) ->\n\t\treturn TempSettings.findOne({_id: id}, {fields: {changed: 1}}).changed\n\n\ttranslateSection: (section) ->\n\t\tif section.indexOf(':') > -1\n\t\t\treturn section\n\n\t\treturn t(section)\n\n\tlabel: ->\n\t\tlabel = @i18nLabel or @_id\n\t\treturn TAPi18n.__ label if label\n\n\tdescription: ->\n\t\tdescription = TAPi18n.__ @i18nDescription if @i18nDescription\n\t\tif description? and description isnt @i18nDescription\n\t\t\treturn description\n\n\tsectionIsCustomOAuth: (section) ->\n\t\treturn /^Custom OAuth:\\s.+/.test section\n\n\tcallbackURL: (section) ->\n\t\tid = s.strRight(section, 'Custom OAuth: ').toLowerCase()\n\t\treturn Meteor.absoluteUrl('_oauth/' + id)\n\n\trelativeUrl: (url) ->\n\t\treturn Meteor.absoluteUrl(url)\n\n\tselectedOption: (_id, val) ->\n\t\treturn RocketChat.settings.collectionPrivate.findOne({_id: _id})?.value is val\n\n\trandom: ->\n\t\treturn Random.id()\n\n\tgetEditorOptions: (readOnly = false) ->\n\t\treturn {} =\n\t\t\tlineNumbers: true\n\t\t\tmode: this.code or \"javascript\"\n\t\t\tgutters: [\n\t\t\t\t\"CodeMirror-linenumbers\"\n\t\t\t\t\"CodeMirror-foldgutter\"\n\t\t\t]\n\t\t\tfoldGutter: true\n\t\t\tmatchBrackets: true\n\t\t\tautoCloseBrackets: true\n\t\t\tmatchTags: true,\n\t\t\tshowTrailingSpace: true\n\t\t\thighlightSelectionMatches: true\n\t\t\treadOnly: readOnly\n\n\tsetEditorOnBlur: (_id) ->\n\t\tMeteor.defer ->\n\t\t\treturn if not $('.code-mirror-box[data-editor-id=\"'+_id+'\"] .CodeMirror')[0]\n\n\t\t\tcodeMirror = $('.code-mirror-box[data-editor-id=\"'+_id+'\"] .CodeMirror')[0].CodeMirror\n\t\t\tif codeMirror.changeAdded is true\n\t\t\t\treturn\n\n\t\t\tonChange = ->\n\t\t\t\tvalue = codeMirror.getValue()\n\t\t\t\tTempSettings.update {_id: _id},\n\t\t\t\t\t$set:\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\tchanged: RocketChat.settings.collectionPrivate.findOne(_id).value isnt value\n\n\t\t\tonChangeDelayed = _.debounce onChange, 500\n\n\t\t\tcodeMirror.on 'change', onChangeDelayed\n\t\t\tcodeMirror.changeAdded = true\n\n\t\treturn\n\n\tassetAccept: (fileConstraints) ->\n\t\tif fileConstraints.extensions?.length > 0\n\t\t\treturn '.' + fileConstraints.extensions.join(', .')\n\n\tautocompleteRoom: ->\n\t\treturn {\n\t\t\tlimit: 10\n\t\t\t# inputDelay: 300\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\t# @TODO maybe change this 'collection' and/or template\n\t\t\t\t\tcollection: 'CachedChannelList'\n\t\t\t\t\tsubscription: 'channelAndPrivateAutocomplete'\n\t\t\t\t\tfield: 'name'\n\t\t\t\t\ttemplate: Template.roomSearch\n\t\t\t\t\tnoMatchTemplate: Template.roomSearchEmpty\n\t\t\t\t\tmatchAll: true\n\t\t\t\t\tselector: (match) ->\n\t\t\t\t\t\treturn { name: match }\n\t\t\t\t\tsort: 'name'\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\tselectedRooms: ->\n\t\treturn Template.instance().selectedRooms.get()[this._id] or []\n\n\tgetColorVariable: (color) ->\n\t\treturn color.replace(/theme-color-/, '@')\n\n\tshowResetButton: ->\n\t\tsetting = TempSettings.findOne({ _id: @_id }, { fields: { value: 1, packageValue: 1 } })\n\t\treturn @type isnt 'asset' and setting.value isnt setting.packageValue and not @blocked\n\nTemplate.admin.events\n\t\"change .input-monitor, keyup .input-monitor\": _.throttle((e, t) ->\n\t\tvalue = _.trim $(e.target).val()\n\n\t\tswitch @type\n\t\t\twhen 'int'\n\t\t\t\tvalue = parseInt(value)\n\t\t\twhen 'boolean'\n\t\t\t\tvalue = value is \"1\"\n\n\t\tTempSettings.update {_id: @_id},\n\t\t\t$set:\n\t\t\t\tvalue: value\n\t\t\t\tchanged: RocketChat.settings.collectionPrivate.findOne(@_id).value isnt value\n\t, 500)\n\n\t\"change select[name=color-editor]\": (e, t) ->\n\t\tvalue = _.trim $(e.target).val()\n\t\tTempSettings.update {_id: @_id},\n\t\t\t$set:\n\t\t\t\teditor: value\n\n\t\"click .submit .discard\": ->\n\t\tgroup = FlowRouter.getParam('group')\n\n\t\tquery =\n\t\t\tgroup: group\n\t\t\tchanged: true\n\n\t\tsettings = TempSettings.find(query, {fields: {_id: 1, value: 1, packageValue: 1}}).fetch()\n\n\t\tsettings.forEach (setting) ->\n\t\t\toldSetting = RocketChat.settings.collectionPrivate.findOne({_id: setting._id}, {fields: {value: 1, type:1, editor: 1}})\n\n\t\t\tsetFieldValue(setting._id, oldSetting.value, oldSetting.type, oldSetting.editor)\n\n\t\"click .reset-setting\": (e, t) ->\n\t\te.preventDefault();\n\t\tsettingId = $(e.target).data('setting')\n\t\tif typeof settingId is 'undefined' then settingId = $(e.target).parent().data('setting')\n\n\t\tdefaultValue = getDefaultSetting(settingId)\n\n\t\tsetFieldValue(settingId, defaultValue.packageValue, defaultValue.type, defaultValue.editor)\n\n\t\"click .reset-group\": (e, t) ->\n\t\te.preventDefault();\n\t\tgroup = FlowRouter.getParam('group')\n\t\tsection = $(e.target).data('section')\n\n\t\tif section is \"\"\n\t\t\tsettings = TempSettings.find({group: group, section: {$exists: false}}, {fields: {_id: 1}}).fetch()\n\t\telse\n\t\t\tsettings = TempSettings.find({group: group, section: section}, {fields: {_id: 1}}).fetch()\n\n\t\tsettings.forEach (setting) ->\n\t\t\tdefaultValue = getDefaultSetting(setting._id)\n\t\t\tsetFieldValue(setting._id, defaultValue.packageValue, defaultValue.type, defaultValue.editor)\n\n\t\t\tTempSettings.update {_id: setting._id},\n\t\t\t$set:\n\t\t\t\tvalue: defaultValue.packageValue\n\t\t\t\tchanged: RocketChat.settings.collectionPrivate.findOne(setting._id).value isnt defaultValue.packageValue\n\n\t\"click .submit .save\": (e, t) ->\n\t\tgroup = FlowRouter.getParam('group')\n\n\t\tquery =\n\t\t\tgroup: group\n\t\t\tchanged: true\n\n\t\tsettings = TempSettings.find(query, {fields: {_id: 1, value: 1, editor: 1}}).fetch()\n\n\t\tif not _.isEmpty settings\n\t\t\tRocketChat.settings.batchSet settings, (err, success) ->\n\t\t\t\treturn handleError(err) if err\n\t\t\t\tTempSettings.update({changed: true}, {$unset: {changed: 1}})\n\t\t\t\ttoastr.success TAPi18n.__ 'Settings_updated'\n\n\t\"click .submit .refresh-clients\": (e, t) ->\n\t\tMeteor.call 'refreshClients', ->\n\t\t\ttoastr.success TAPi18n.__ 'Clients_will_refresh_in_a_few_seconds'\n\n\t\"click .submit .add-custom-oauth\": (e, t) ->\n\t\tconfig =\n\t\t\ttitle: TAPi18n.__ 'Add_custom_oauth'\n\t\t\ttext: TAPi18n.__ 'Give_a_unique_name_for_the_custom_oauth'\n\t\t\ttype: \"input\",\n\t\t\tshowCancelButton: true,\n\t\t\tcloseOnConfirm: true,\n\t\t\tinputPlaceholder: TAPi18n.__ 'Custom_oauth_unique_name'\n\n\t\tswal config, (inputValue) ->\n\t\t\tif inputValue is false\n\t\t\t\treturn false\n\n\t\t\tif inputValue is \"\"\n\t\t\t\tswal.showInputError TAPi18n.__ 'Name_cant_be_empty'\n\t\t\t\treturn false\n\n\t\t\tMeteor.call 'addOAuthService', inputValue, (err) ->\n\t\t\t\tif err\n\t\t\t\t\thandleError(err)\n\n\t\"click .submit .refresh-oauth\": (e, t) ->\n\t\ttoastr.info TAPi18n.__ 'Refreshing'\n\t\tMeteor.call 'refreshOAuthService', (err) ->\n\t\t\tif err\n\t\t\t\thandleError(err)\n\t\t\telse\n\t\t\t\ttoastr.success TAPi18n.__ 'Done'\n\n\t\"click .submit .remove-custom-oauth\": (e, t) ->\n\t\tname = this.section.replace('Custom OAuth: ', '')\n\t\tconfig =\n\t\t\ttitle: TAPi18n.__ 'Are_you_sure'\n\t\t\ttype: \"input\",\n\t\t\ttype: 'warning'\n\t\t\tshowCancelButton: true\n\t\t\tconfirmButtonColor: '#DD6B55'\n\t\t\tconfirmButtonText: TAPi18n.__ 'Yes_delete_it'\n\t\t\tcancelButtonText: TAPi18n.__ 'Cancel'\n\t\t\tcloseOnConfirm: true\n\n\t\tswal config, ->\n\t\t\tMeteor.call 'removeOAuthService', name\n\n\t\"click .delete-asset\": ->\n\t\tMeteor.call 'unsetAsset', @asset\n\n\t\"change input[type=file]\": (ev) ->\n\t\te = ev.originalEvent or ev\n\t\tfiles = e.target.files\n\t\tif not files or files.length is 0\n\t\t\tfiles = e.dataTransfer?.files or []\n\n\t\tfor blob in files\n\t\t\ttoastr.info TAPi18n.__ 'Uploading_file'\n\n\t\t\t# if @fileConstraints.contentType isnt blob.type\n\t\t\t# \ttoastr.error blob.type, TAPi18n.__ 'Invalid_file_type'\n\t\t\t# \treturn\n\n\t\t\treader = new FileReader()\n\t\t\treader.readAsBinaryString(blob)\n\t\t\treader.onloadend = =>\n\t\t\t\tMeteor.call 'setAsset', reader.result, blob.type, @asset, (err, data) ->\n\t\t\t\t\tif err?\n\t\t\t\t\t\thandleError(err)\n\t\t\t\t\t\t# toastr.error err.reason, TAPi18n.__ err.error\n\t\t\t\t\t\tconsole.log err\n\t\t\t\t\t\treturn\n\n\t\t\t\t\ttoastr.success TAPi18n.__ 'File_uploaded'\n\n\t\"click .expand\": (e) ->\n\t\t$(e.currentTarget).closest('.section').removeClass('section-collapsed')\n\t\t$(e.currentTarget).closest('button').removeClass('expand').addClass('collapse').find('span').text(TAPi18n.__ \"Collapse\")\n\t\t$('.CodeMirror').each (index, codeMirror) ->\n\t\t\tcodeMirror.CodeMirror.refresh()\n\n\t\"click .collapse\": (e) ->\n\t\t$(e.currentTarget).closest('.section').addClass('section-collapsed')\n\t\t$(e.currentTarget).closest('button').addClass('expand').removeClass('collapse').find('span').text(TAPi18n.__ \"Expand\")\n\n\t\"click button.action\": (e) ->\n\t\tif @type isnt 'action'\n\t\t\treturn\n\n\t\tMeteor.call @value, (err, data) ->\n\t\t\tif err?\n\t\t\t\terr.details = _.extend(err.details || {}, errorTitle: 'Error')\n\t\t\t\thandleError(err)\n\t\t\t\treturn\n\n\t\t\targs = [data.message].concat data.params\n\n\t\t\ttoastr.success TAPi18n.__.apply(TAPi18n, args), TAPi18n.__('Success')\n\n\t\"click .button-fullscreen\": ->\n\t\tcodeMirrorBox = $('.code-mirror-box[data-editor-id=\"'+this._id+'\"]')\n\t\tcodeMirrorBox.addClass('code-mirror-box-fullscreen content-background-color')\n\t\tcodeMirrorBox.find('.CodeMirror')[0].CodeMirror.refresh()\n\n\t\"click .button-restore\": ->\n\t\tcodeMirrorBox = $('.code-mirror-box[data-editor-id=\"'+this._id+'\"]')\n\t\tcodeMirrorBox.removeClass('code-mirror-box-fullscreen content-background-color')\n\t\tcodeMirrorBox.find('.CodeMirror')[0].CodeMirror.refresh()\n\n\t'autocompleteselect .autocomplete': (event, instance, doc) ->\n\t\tselectedRooms = instance.selectedRooms.get()\n\t\tselectedRooms[this.id] = (selectedRooms[this.id] || []).concat doc\n\t\tinstance.selectedRooms.set selectedRooms\n\t\tvalue = selectedRooms[this.id]\n\t\tTempSettings.update {_id: this.id},\n\t\t\t$set:\n\t\t\t\tvalue: value\n\t\t\t\tchanged: RocketChat.settings.collectionPrivate.findOne(this.id).value isnt value\n\t\tevent.currentTarget.value = ''\n\t\tevent.currentTarget.focus()\n\n\t'click .remove-room': (event, instance) ->\n\t\tdocId = this._id\n\t\tsettingId = event.currentTarget.getAttribute('data-setting')\n\t\tselectedRooms = instance.selectedRooms.get()\n\t\tselectedRooms[settingId] = _.reject(selectedRooms[settingId] || [], (setting) -> setting._id is docId)\n\t\tinstance.selectedRooms.set selectedRooms\n\t\tvalue = selectedRooms[settingId]\n\t\tTempSettings.update {_id: settingId},\n\t\t\t$set:\n\t\t\t\tvalue: value\n\t\t\t\tchanged: RocketChat.settings.collectionPrivate.findOne(settingId).value isnt value\n\nTemplate.admin.onRendered ->\n\tTracker.afterFlush ->\n\t\tSideNav.setFlex \"adminFlex\"\n\t\tSideNav.openFlex()\n\n\tTracker.autorun ->\n\t\thasColor = TempSettings.findOne { group: FlowRouter.getParam('group'), type: 'color' }, { fields: { _id: 1 } }\n\t\tif hasColor\n\t\t\tMeteor.setTimeout ->\n\t\t\t\t$('.colorpicker-input').each (index, el) ->\n\t\t\t\t\tnew jscolor(el)\n\t\t\t, 400\n","var TempSettings, getDefaultSetting, setFieldValue;\n\nimport toastr from 'toastr';\n\nTempSettings = new Mongo.Collection(null);\n\nRocketChat.TempSettings = TempSettings;\n\ngetDefaultSetting = function(settingId) {\n  return RocketChat.settings.collectionPrivate.findOne({\n    _id: settingId\n  });\n};\n\nsetFieldValue = function(settingId, value, type, editor) {\n  var input;\n  input = $('.page-settings').find('[name=\"' + settingId + '\"]');\n  switch (type) {\n    case 'boolean':\n      return $('.page-settings').find('[name=\"' + settingId + '\"][value=\"' + Number(value) + '\"]').prop('checked', true).change();\n    case 'code':\n      return input.next()[0].CodeMirror.setValue(value);\n    case 'color':\n      input.parents('.horizontal').find('select[name=\"color-editor\"]').val(editor).change();\n      input.val(value).change();\n      if (editor === 'color') {\n        return new jscolor(input);\n      }\n      break;\n    default:\n      return input.val(value).change();\n  }\n};\n\nTemplate.admin.onCreated(function() {\n  if (RocketChat.settings.cachedCollectionPrivate == null) {\n    RocketChat.settings.cachedCollectionPrivate = new RocketChat.CachedCollection({\n      name: 'private-settings',\n      eventType: 'onLogged'\n    });\n    RocketChat.settings.collectionPrivate = RocketChat.settings.cachedCollectionPrivate.collection;\n    RocketChat.settings.cachedCollectionPrivate.init();\n  }\n  this.selectedRooms = new ReactiveVar({});\n  return RocketChat.settings.collectionPrivate.find().observe({\n    added: (function(_this) {\n      return function(data) {\n        var selectedRooms;\n        selectedRooms = _this.selectedRooms.get();\n        if (data.type === 'roomPick') {\n          selectedRooms[data._id] = data.value;\n          _this.selectedRooms.set(selectedRooms);\n        }\n        return TempSettings.insert(data);\n      };\n    })(this),\n    changed: (function(_this) {\n      return function(data) {\n        var selectedRooms;\n        selectedRooms = _this.selectedRooms.get();\n        if (data.type === 'roomPick') {\n          selectedRooms[data._id] = data.value;\n          _this.selectedRooms.set(selectedRooms);\n        }\n        return TempSettings.update(data._id, data);\n      };\n    })(this),\n    removed: (function(_this) {\n      return function(data) {\n        var selectedRooms;\n        selectedRooms = _this.selectedRooms.get();\n        if (data.type === 'roomPick') {\n          delete selectedRooms[data._id];\n          _this.selectedRooms.set(selectedRooms);\n        }\n        return TempSettings.remove(data._id);\n      };\n    })(this)\n  });\n});\n\nTemplate.admin.onDestroyed(function() {\n  return TempSettings.remove({});\n});\n\nTemplate.admin.helpers({\n  languages: function() {\n    var key, language, languages, result;\n    languages = TAPi18n.getLanguages();\n    result = [];\n    for (key in languages) {\n      language = languages[key];\n      result.push(_.extend(language, {\n        key: key\n      }));\n    }\n    result = _.sortBy(result, 'key');\n    result.unshift({\n      \"name\": \"Default\",\n      \"en\": \"Default\",\n      \"key\": \"\"\n    });\n    return result;\n  },\n  appLanguage: function(key) {\n    var ref;\n    return ((ref = RocketChat.settings.get('Language')) != null ? ref.split('-').shift().toLowerCase() : void 0) === key;\n  },\n  group: function() {\n    var found, group, groupId, i, i18nDefaultQuery, item, j, key, len, len1, name1, sections, setting, settings, value;\n    groupId = FlowRouter.getParam('group');\n    group = RocketChat.settings.collectionPrivate.findOne({\n      _id: groupId,\n      type: 'group'\n    });\n    if (!group) {\n      return;\n    }\n    settings = RocketChat.settings.collectionPrivate.find({\n      group: groupId\n    }, {\n      sort: {\n        section: 1,\n        sorter: 1,\n        i18nLabel: 1\n      }\n    }).fetch();\n    sections = {};\n    for (i = 0, len = settings.length; i < len; i++) {\n      setting = settings[i];\n      if (setting.i18nDefaultQuery != null) {\n        if (_.isString(setting.i18nDefaultQuery)) {\n          i18nDefaultQuery = JSON.parse(setting.i18nDefaultQuery);\n        } else {\n          i18nDefaultQuery = setting.i18nDefaultQuery;\n        }\n        if (!_.isArray(i18nDefaultQuery)) {\n          i18nDefaultQuery = [i18nDefaultQuery];\n        }\n        found = 0;\n        for (j = 0, len1 = i18nDefaultQuery.length; j < len1; j++) {\n          item = i18nDefaultQuery[j];\n          if (RocketChat.settings.collectionPrivate.findOne(item) != null) {\n            setting.value = TAPi18n.__(setting._id + '_Default');\n          }\n        }\n      }\n      if (sections[name1 = setting.section || ''] == null) {\n        sections[name1] = [];\n      }\n      sections[setting.section || ''].push(setting);\n    }\n    group.sections = [];\n    for (key in sections) {\n      value = sections[key];\n      group.sections.push({\n        section: key,\n        settings: value\n      });\n    }\n    return group;\n  },\n  i18nDefaultValue: function() {\n    return TAPi18n.__(this._id + '_Default');\n  },\n  isDisabled: function() {\n    var enableQuery, found, i, item, len;\n    if (this.blocked) {\n      return {\n        disabled: 'disabled'\n      };\n    }\n    if (this.enableQuery == null) {\n      return {};\n    }\n    if (_.isString(this.enableQuery)) {\n      enableQuery = JSON.parse(this.enableQuery);\n    } else {\n      enableQuery = this.enableQuery;\n    }\n    if (!_.isArray(enableQuery)) {\n      enableQuery = [enableQuery];\n    }\n    found = 0;\n    for (i = 0, len = enableQuery.length; i < len; i++) {\n      item = enableQuery[i];\n      if (TempSettings.findOne(item) != null) {\n        found++;\n      }\n    }\n    if (found === enableQuery.length) {\n      return {};\n    } else {\n      return {\n        disabled: 'disabled'\n      };\n    }\n  },\n  isReadonly: function() {\n    if (this.readonly === true) {\n      return {\n        readonly: 'readonly'\n      };\n    }\n  },\n  hasChanges: function(section) {\n    var group, query;\n    group = FlowRouter.getParam('group');\n    query = {\n      group: group,\n      changed: true\n    };\n    if (section != null) {\n      if (section === '') {\n        query.$or = [\n          {\n            section: ''\n          }, {\n            section: {\n              $exists: false\n            }\n          }\n        ];\n      } else {\n        query.section = section;\n      }\n    }\n    return TempSettings.find(query).count() > 0;\n  },\n  isSettingChanged: function(id) {\n    return TempSettings.findOne({\n      _id: id\n    }, {\n      fields: {\n        changed: 1\n      }\n    }).changed;\n  },\n  translateSection: function(section) {\n    if (section.indexOf(':') > -1) {\n      return section;\n    }\n    return t(section);\n  },\n  label: function() {\n    var label;\n    label = this.i18nLabel || this._id;\n    if (label) {\n      return TAPi18n.__(label);\n    }\n  },\n  description: function() {\n    var description;\n    if (this.i18nDescription) {\n      description = TAPi18n.__(this.i18nDescription);\n    }\n    if ((description != null) && description !== this.i18nDescription) {\n      return description;\n    }\n  },\n  sectionIsCustomOAuth: function(section) {\n    return /^Custom OAuth:\\s.+/.test(section);\n  },\n  callbackURL: function(section) {\n    var id;\n    id = s.strRight(section, 'Custom OAuth: ').toLowerCase();\n    return Meteor.absoluteUrl('_oauth/' + id);\n  },\n  relativeUrl: function(url) {\n    return Meteor.absoluteUrl(url);\n  },\n  selectedOption: function(_id, val) {\n    var ref;\n    return ((ref = RocketChat.settings.collectionPrivate.findOne({\n      _id: _id\n    })) != null ? ref.value : void 0) === val;\n  },\n  random: function() {\n    return Random.id();\n  },\n  getEditorOptions: function(readOnly) {\n    if (readOnly == null) {\n      readOnly = false;\n    }\n    return {\n      lineNumbers: true,\n      mode: this.code || \"javascript\",\n      gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],\n      foldGutter: true,\n      matchBrackets: true,\n      autoCloseBrackets: true,\n      matchTags: true,\n      showTrailingSpace: true,\n      highlightSelectionMatches: true,\n      readOnly: readOnly\n    };\n  },\n  setEditorOnBlur: function(_id) {\n    Meteor.defer(function() {\n      var codeMirror, onChange, onChangeDelayed;\n      if (!$('.code-mirror-box[data-editor-id=\"' + _id + '\"] .CodeMirror')[0]) {\n        return;\n      }\n      codeMirror = $('.code-mirror-box[data-editor-id=\"' + _id + '\"] .CodeMirror')[0].CodeMirror;\n      if (codeMirror.changeAdded === true) {\n        return;\n      }\n      onChange = function() {\n        var value;\n        value = codeMirror.getValue();\n        return TempSettings.update({\n          _id: _id\n        }, {\n          $set: {\n            value: value,\n            changed: RocketChat.settings.collectionPrivate.findOne(_id).value !== value\n          }\n        });\n      };\n      onChangeDelayed = _.debounce(onChange, 500);\n      codeMirror.on('change', onChangeDelayed);\n      return codeMirror.changeAdded = true;\n    });\n  },\n  assetAccept: function(fileConstraints) {\n    var ref;\n    if (((ref = fileConstraints.extensions) != null ? ref.length : void 0) > 0) {\n      return '.' + fileConstraints.extensions.join(', .');\n    }\n  },\n  autocompleteRoom: function() {\n    return {\n      limit: 10,\n      rules: [\n        {\n          collection: 'CachedChannelList',\n          subscription: 'channelAndPrivateAutocomplete',\n          field: 'name',\n          template: Template.roomSearch,\n          noMatchTemplate: Template.roomSearchEmpty,\n          matchAll: true,\n          selector: function(match) {\n            return {\n              name: match\n            };\n          },\n          sort: 'name'\n        }\n      ]\n    };\n  },\n  selectedRooms: function() {\n    return Template.instance().selectedRooms.get()[this._id] || [];\n  },\n  getColorVariable: function(color) {\n    return color.replace(/theme-color-/, '@');\n  },\n  showResetButton: function() {\n    var setting;\n    setting = TempSettings.findOne({\n      _id: this._id\n    }, {\n      fields: {\n        value: 1,\n        packageValue: 1\n      }\n    });\n    return this.type !== 'asset' && setting.value !== setting.packageValue && !this.blocked;\n  }\n});\n\nTemplate.admin.events({\n  \"change .input-monitor, keyup .input-monitor\": _.throttle(function(e, t) {\n    var value;\n    value = _.trim($(e.target).val());\n    switch (this.type) {\n      case 'int':\n        value = parseInt(value);\n        break;\n      case 'boolean':\n        value = value === \"1\";\n    }\n    return TempSettings.update({\n      _id: this._id\n    }, {\n      $set: {\n        value: value,\n        changed: RocketChat.settings.collectionPrivate.findOne(this._id).value !== value\n      }\n    });\n  }, 500),\n  \"change select[name=color-editor]\": function(e, t) {\n    var value;\n    value = _.trim($(e.target).val());\n    return TempSettings.update({\n      _id: this._id\n    }, {\n      $set: {\n        editor: value\n      }\n    });\n  },\n  \"click .submit .discard\": function() {\n    var group, query, settings;\n    group = FlowRouter.getParam('group');\n    query = {\n      group: group,\n      changed: true\n    };\n    settings = TempSettings.find(query, {\n      fields: {\n        _id: 1,\n        value: 1,\n        packageValue: 1\n      }\n    }).fetch();\n    return settings.forEach(function(setting) {\n      var oldSetting;\n      oldSetting = RocketChat.settings.collectionPrivate.findOne({\n        _id: setting._id\n      }, {\n        fields: {\n          value: 1,\n          type: 1,\n          editor: 1\n        }\n      });\n      return setFieldValue(setting._id, oldSetting.value, oldSetting.type, oldSetting.editor);\n    });\n  },\n  \"click .reset-setting\": function(e, t) {\n    var defaultValue, settingId;\n    e.preventDefault();\n    settingId = $(e.target).data('setting');\n    if (typeof settingId === 'undefined') {\n      settingId = $(e.target).parent().data('setting');\n    }\n    defaultValue = getDefaultSetting(settingId);\n    return setFieldValue(settingId, defaultValue.packageValue, defaultValue.type, defaultValue.editor);\n  },\n  \"click .reset-group\": function(e, t) {\n    var group, section, settings;\n    e.preventDefault();\n    group = FlowRouter.getParam('group');\n    section = $(e.target).data('section');\n    if (section === \"\") {\n      settings = TempSettings.find({\n        group: group,\n        section: {\n          $exists: false\n        }\n      }, {\n        fields: {\n          _id: 1\n        }\n      }).fetch();\n    } else {\n      settings = TempSettings.find({\n        group: group,\n        section: section\n      }, {\n        fields: {\n          _id: 1\n        }\n      }).fetch();\n    }\n    return settings.forEach(function(setting) {\n      var defaultValue;\n      defaultValue = getDefaultSetting(setting._id);\n      setFieldValue(setting._id, defaultValue.packageValue, defaultValue.type, defaultValue.editor);\n      return TempSettings.update({\n        _id: setting._id\n      }, {\n        $set: {\n          value: defaultValue.packageValue,\n          changed: RocketChat.settings.collectionPrivate.findOne(setting._id).value !== defaultValue.packageValue\n        }\n      });\n    });\n  },\n  \"click .submit .save\": function(e, t) {\n    var group, query, settings;\n    group = FlowRouter.getParam('group');\n    query = {\n      group: group,\n      changed: true\n    };\n    settings = TempSettings.find(query, {\n      fields: {\n        _id: 1,\n        value: 1,\n        editor: 1\n      }\n    }).fetch();\n    if (!_.isEmpty(settings)) {\n      return RocketChat.settings.batchSet(settings, function(err, success) {\n        if (err) {\n          return handleError(err);\n        }\n        TempSettings.update({\n          changed: true\n        }, {\n          $unset: {\n            changed: 1\n          }\n        });\n        return toastr.success(TAPi18n.__('Settings_updated'));\n      });\n    }\n  },\n  \"click .submit .refresh-clients\": function(e, t) {\n    return Meteor.call('refreshClients', function() {\n      return toastr.success(TAPi18n.__('Clients_will_refresh_in_a_few_seconds'));\n    });\n  },\n  \"click .submit .add-custom-oauth\": function(e, t) {\n    var config;\n    config = {\n      title: TAPi18n.__('Add_custom_oauth'),\n      text: TAPi18n.__('Give_a_unique_name_for_the_custom_oauth'),\n      type: \"input\",\n      showCancelButton: true,\n      closeOnConfirm: true,\n      inputPlaceholder: TAPi18n.__('Custom_oauth_unique_name')\n    };\n    return swal(config, function(inputValue) {\n      if (inputValue === false) {\n        return false;\n      }\n      if (inputValue === \"\") {\n        swal.showInputError(TAPi18n.__('Name_cant_be_empty'));\n        return false;\n      }\n      return Meteor.call('addOAuthService', inputValue, function(err) {\n        if (err) {\n          return handleError(err);\n        }\n      });\n    });\n  },\n  \"click .submit .refresh-oauth\": function(e, t) {\n    toastr.info(TAPi18n.__('Refreshing'));\n    return Meteor.call('refreshOAuthService', function(err) {\n      if (err) {\n        return handleError(err);\n      } else {\n        return toastr.success(TAPi18n.__('Done'));\n      }\n    });\n  },\n  \"click .submit .remove-custom-oauth\": function(e, t) {\n    var config, name;\n    name = this.section.replace('Custom OAuth: ', '');\n    config = {\n      title: TAPi18n.__('Are_you_sure'),\n      type: \"input\",\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#DD6B55',\n      confirmButtonText: TAPi18n.__('Yes_delete_it'),\n      cancelButtonText: TAPi18n.__('Cancel'),\n      closeOnConfirm: true\n    };\n    return swal(config, function() {\n      return Meteor.call('removeOAuthService', name);\n    });\n  },\n  \"click .delete-asset\": function() {\n    return Meteor.call('unsetAsset', this.asset);\n  },\n  \"change input[type=file]\": function(ev) {\n    var blob, e, files, i, len, reader, ref, results;\n    e = ev.originalEvent || ev;\n    files = e.target.files;\n    if (!files || files.length === 0) {\n      files = ((ref = e.dataTransfer) != null ? ref.files : void 0) || [];\n    }\n    results = [];\n    for (i = 0, len = files.length; i < len; i++) {\n      blob = files[i];\n      toastr.info(TAPi18n.__('Uploading_file'));\n      reader = new FileReader();\n      reader.readAsBinaryString(blob);\n      results.push(reader.onloadend = (function(_this) {\n        return function() {\n          return Meteor.call('setAsset', reader.result, blob.type, _this.asset, function(err, data) {\n            if (err != null) {\n              handleError(err);\n              console.log(err);\n              return;\n            }\n            return toastr.success(TAPi18n.__('File_uploaded'));\n          });\n        };\n      })(this));\n    }\n    return results;\n  },\n  \"click .expand\": function(e) {\n    $(e.currentTarget).closest('.section').removeClass('section-collapsed');\n    $(e.currentTarget).closest('button').removeClass('expand').addClass('collapse').find('span').text(TAPi18n.__(\"Collapse\"));\n    return $('.CodeMirror').each(function(index, codeMirror) {\n      return codeMirror.CodeMirror.refresh();\n    });\n  },\n  \"click .collapse\": function(e) {\n    $(e.currentTarget).closest('.section').addClass('section-collapsed');\n    return $(e.currentTarget).closest('button').addClass('expand').removeClass('collapse').find('span').text(TAPi18n.__(\"Expand\"));\n  },\n  \"click button.action\": function(e) {\n    if (this.type !== 'action') {\n      return;\n    }\n    return Meteor.call(this.value, function(err, data) {\n      var args;\n      if (err != null) {\n        err.details = _.extend(err.details || {}, {\n          errorTitle: 'Error'\n        });\n        handleError(err);\n        return;\n      }\n      args = [data.message].concat(data.params);\n      return toastr.success(TAPi18n.__.apply(TAPi18n, args), TAPi18n.__('Success'));\n    });\n  },\n  \"click .button-fullscreen\": function() {\n    var codeMirrorBox;\n    codeMirrorBox = $('.code-mirror-box[data-editor-id=\"' + this._id + '\"]');\n    codeMirrorBox.addClass('code-mirror-box-fullscreen content-background-color');\n    return codeMirrorBox.find('.CodeMirror')[0].CodeMirror.refresh();\n  },\n  \"click .button-restore\": function() {\n    var codeMirrorBox;\n    codeMirrorBox = $('.code-mirror-box[data-editor-id=\"' + this._id + '\"]');\n    codeMirrorBox.removeClass('code-mirror-box-fullscreen content-background-color');\n    return codeMirrorBox.find('.CodeMirror')[0].CodeMirror.refresh();\n  },\n  'autocompleteselect .autocomplete': function(event, instance, doc) {\n    var selectedRooms, value;\n    selectedRooms = instance.selectedRooms.get();\n    selectedRooms[this.id] = (selectedRooms[this.id] || []).concat(doc);\n    instance.selectedRooms.set(selectedRooms);\n    value = selectedRooms[this.id];\n    TempSettings.update({\n      _id: this.id\n    }, {\n      $set: {\n        value: value,\n        changed: RocketChat.settings.collectionPrivate.findOne(this.id).value !== value\n      }\n    });\n    event.currentTarget.value = '';\n    return event.currentTarget.focus();\n  },\n  'click .remove-room': function(event, instance) {\n    var docId, selectedRooms, settingId, value;\n    docId = this._id;\n    settingId = event.currentTarget.getAttribute('data-setting');\n    selectedRooms = instance.selectedRooms.get();\n    selectedRooms[settingId] = _.reject(selectedRooms[settingId] || [], function(setting) {\n      return setting._id === docId;\n    });\n    instance.selectedRooms.set(selectedRooms);\n    value = selectedRooms[settingId];\n    return TempSettings.update({\n      _id: settingId\n    }, {\n      $set: {\n        value: value,\n        changed: RocketChat.settings.collectionPrivate.findOne(settingId).value !== value\n      }\n    });\n  }\n});\n\nTemplate.admin.onRendered(function() {\n  Tracker.afterFlush(function() {\n    SideNav.setFlex(\"adminFlex\");\n    return SideNav.openFlex();\n  });\n  return Tracker.autorun(function() {\n    var hasColor;\n    hasColor = TempSettings.findOne({\n      group: FlowRouter.getParam('group'),\n      type: 'color'\n    }, {\n      fields: {\n        _id: 1\n      }\n    });\n    if (hasColor) {\n      return Meteor.setTimeout(function() {\n        return $('.colorpicker-input').each(function(index, el) {\n          return new jscolor(el);\n        });\n      }, 400);\n    }\n  });\n});\n","Template.adminFlex.onCreated ->\n\t@settingsFilter = new ReactiveVar('')\n\n\tif not RocketChat.settings.cachedCollectionPrivate?\n\t\tRocketChat.settings.cachedCollectionPrivate = new RocketChat.CachedCollection({ name: 'private-settings', eventType: 'onLogged' })\n\t\tRocketChat.settings.collectionPrivate = RocketChat.settings.cachedCollectionPrivate.collection\n\t\tRocketChat.settings.cachedCollectionPrivate.init()\n\nlabel = ->\n\treturn TAPi18n.__(@i18nLabel or @_id)\n\nTemplate.adminFlex.helpers\n\tgroups: ->\n\t\tfilter = Template.instance().settingsFilter.get()\n\n\t\tquery =\n\t\t\ttype: 'group'\n\n\t\tif filter\n\t\t\tfilterRegex = new RegExp(_.escapeRegExp(filter), 'i')\n\n\t\t\trecords = RocketChat.settings.collectionPrivate.find().fetch()\n\t\t\tgroups = []\n\t\t\trecords = records.forEach (record) ->\n\t\t\t\tif filterRegex.test(TAPi18n.__(record.i18nLabel or record._id))\n\t\t\t\t\tgroups.push(record.group or record._id)\n\n\t\t\tgroups = _.unique(groups)\n\t\t\tif groups.length > 0\n\t\t\t\tquery._id =\n\t\t\t\t\t$in: groups\n\t\tRocketChat.settings.collectionPrivate.find(query).fetch()\n\t\t.map (el) =>\n\t\t\tel.label = label.apply(el)\n\t\t\treturn el\n\t\t.sort (a, b) =>\n\t\t\tif a.label.toLowerCase() >= b.label.toLowerCase() then 1 else -1\n\n\tlabel: label\n\n\tadminBoxOptions: ->\n\t\treturn RocketChat.AdminBox.getOptions()\n\n\nTemplate.adminFlex.events\n\t'mouseenter header': ->\n\t\tSideNav.overArrow()\n\n\t'mouseleave header': ->\n\t\tSideNav.leaveArrow()\n\n\t'click header': ->\n\t\tSideNav.closeFlex()\n\n\t'click .cancel-settings': ->\n\t\tSideNav.closeFlex()\n\n\t'click .admin-link': ->\n\t\tmenu.close()\n\n\t'keyup [name=settings-search]': (e, t) ->\n\t\tt.settingsFilter.set(e.target.value)\n","var label;\n\nTemplate.adminFlex.onCreated(function() {\n  this.settingsFilter = new ReactiveVar('');\n  if (RocketChat.settings.cachedCollectionPrivate == null) {\n    RocketChat.settings.cachedCollectionPrivate = new RocketChat.CachedCollection({\n      name: 'private-settings',\n      eventType: 'onLogged'\n    });\n    RocketChat.settings.collectionPrivate = RocketChat.settings.cachedCollectionPrivate.collection;\n    return RocketChat.settings.cachedCollectionPrivate.init();\n  }\n});\n\nlabel = function() {\n  return TAPi18n.__(this.i18nLabel || this._id);\n};\n\nTemplate.adminFlex.helpers({\n  groups: function() {\n    var filter, filterRegex, groups, query, records;\n    filter = Template.instance().settingsFilter.get();\n    query = {\n      type: 'group'\n    };\n    if (filter) {\n      filterRegex = new RegExp(_.escapeRegExp(filter), 'i');\n      records = RocketChat.settings.collectionPrivate.find().fetch();\n      groups = [];\n      records = records.forEach(function(record) {\n        if (filterRegex.test(TAPi18n.__(record.i18nLabel || record._id))) {\n          return groups.push(record.group || record._id);\n        }\n      });\n      groups = _.unique(groups);\n      if (groups.length > 0) {\n        query._id = {\n          $in: groups\n        };\n      }\n    }\n    return RocketChat.settings.collectionPrivate.find(query).fetch().map((function(_this) {\n      return function(el) {\n        el.label = label.apply(el);\n        return el;\n      };\n    })(this)).sort((function(_this) {\n      return function(a, b) {\n        if (a.label.toLowerCase() >= b.label.toLowerCase()) {\n          return 1;\n        } else {\n          return -1;\n        }\n      };\n    })(this));\n  },\n  label: label,\n  adminBoxOptions: function() {\n    return RocketChat.AdminBox.getOptions();\n  }\n});\n\nTemplate.adminFlex.events({\n  'mouseenter header': function() {\n    return SideNav.overArrow();\n  },\n  'mouseleave header': function() {\n    return SideNav.leaveArrow();\n  },\n  'click header': function() {\n    return SideNav.closeFlex();\n  },\n  'click .cancel-settings': function() {\n    return SideNav.closeFlex();\n  },\n  'click .admin-link': function() {\n    return menu.close();\n  },\n  'keyup [name=settings-search]': function(e, t) {\n    return t.settingsFilter.set(e.target.value);\n  }\n});\n","import moment from 'moment'\n\nTemplate.adminInfo.helpers\n\tisReady: ->\n\t\treturn Template.instance().ready.get()\n\tstatistics: ->\n\t\treturn Template.instance().statistics.get()\n\tinstances: ->\n\t\treturn Template.instance().instances.get()\n\tinGB: (size) ->\n\t\tif size > 1073741824\n\t\t\treturn _.numberFormat(size / 1024 / 1024 / 1024, 2) + ' GB'\n\t\treturn _.numberFormat(size / 1024 / 1024, 2) + ' MB'\n\thumanReadableTime: (time) ->\n\t\tdays = Math.floor time / 86400\n\t\thours = Math.floor (time % 86400) / 3600\n\t\tminutes = Math.floor ((time % 86400) % 3600) / 60\n\t\tseconds = Math.floor ((time % 86400) % 3600) % 60\n\t\tout = \"\"\n\t\tif days > 0\n\t\t\tout += \"#{days} #{TAPi18n.__ 'days'}, \"\n\t\tif hours > 0\n\t\t\tout += \"#{hours} #{TAPi18n.__ 'hours'}, \"\n\t\tif minutes > 0\n\t\t\tout += \"#{minutes} #{TAPi18n.__ 'minutes'}, \"\n\t\tif seconds > 0\n\t\t\tout += \"#{seconds} #{TAPi18n.__ 'seconds'}\"\n\t\treturn out\n\tformatDate: (date) ->\n\t\tif date\n\t\t\treturn moment(date).format(\"LLL\")\n\tnumFormat: (number) ->\n\t\treturn _.numberFormat(number, 2)\n\tinfo: ->\n\t\treturn RocketChat.Info\n\tbuild: ->\n\t\treturn RocketChat.Info?.compile || RocketChat.Info?.build\n\nTemplate.adminInfo.events\n\t'click .refresh': (e, instance) ->\n\t\tinstance.ready.set false\n\t\tMeteor.call 'getStatistics', true, (error, statistics) ->\n\t\t\tinstance.ready.set true\n\t\t\tif error\n\t\t\t\thandleError(error)\n\t\t\telse\n\t\t\t\tinstance.statistics.set statistics\n\nTemplate.adminInfo.onRendered ->\n\tTracker.afterFlush ->\n\t\tSideNav.setFlex \"adminFlex\"\n\t\tSideNav.openFlex()\n\nTemplate.adminInfo.onCreated ->\n\tinstance = @\n\t@statistics = new ReactiveVar {}\n\t@instances = new ReactiveVar []\n\t@ready = new ReactiveVar false\n\n\tif RocketChat.authz.hasAllPermission('view-statistics')\n\t\tMeteor.call 'getStatistics', (error, statistics) ->\n\t\t\tif error\n\t\t\t\thandleError(error)\n\t\t\telse\n\t\t\t\tinstance.statistics.set statistics\n\n\t\t\tMeteor.call 'instances/get', (error, instances) ->\n\t\t\t\tinstance.ready.set true\n\t\t\t\tif error\n\t\t\t\t\thandleError(error)\n\t\t\t\telse\n\t\t\t\t\tinstance.instances.set instances\n\n","import moment from 'moment';\n\nTemplate.adminInfo.helpers({\n  isReady: function() {\n    return Template.instance().ready.get();\n  },\n  statistics: function() {\n    return Template.instance().statistics.get();\n  },\n  instances: function() {\n    return Template.instance().instances.get();\n  },\n  inGB: function(size) {\n    if (size > 1073741824) {\n      return _.numberFormat(size / 1024 / 1024 / 1024, 2) + ' GB';\n    }\n    return _.numberFormat(size / 1024 / 1024, 2) + ' MB';\n  },\n  humanReadableTime: function(time) {\n    var days, hours, minutes, out, seconds;\n    days = Math.floor(time / 86400);\n    hours = Math.floor((time % 86400) / 3600);\n    minutes = Math.floor(((time % 86400) % 3600) / 60);\n    seconds = Math.floor(((time % 86400) % 3600) % 60);\n    out = \"\";\n    if (days > 0) {\n      out += days + \" \" + (TAPi18n.__('days')) + \", \";\n    }\n    if (hours > 0) {\n      out += hours + \" \" + (TAPi18n.__('hours')) + \", \";\n    }\n    if (minutes > 0) {\n      out += minutes + \" \" + (TAPi18n.__('minutes')) + \", \";\n    }\n    if (seconds > 0) {\n      out += seconds + \" \" + (TAPi18n.__('seconds'));\n    }\n    return out;\n  },\n  formatDate: function(date) {\n    if (date) {\n      return moment(date).format(\"LLL\");\n    }\n  },\n  numFormat: function(number) {\n    return _.numberFormat(number, 2);\n  },\n  info: function() {\n    return RocketChat.Info;\n  },\n  build: function() {\n    var ref, ref1;\n    return ((ref = RocketChat.Info) != null ? ref.compile : void 0) || ((ref1 = RocketChat.Info) != null ? ref1.build : void 0);\n  }\n});\n\nTemplate.adminInfo.events({\n  'click .refresh': function(e, instance) {\n    instance.ready.set(false);\n    return Meteor.call('getStatistics', true, function(error, statistics) {\n      instance.ready.set(true);\n      if (error) {\n        return handleError(error);\n      } else {\n        return instance.statistics.set(statistics);\n      }\n    });\n  }\n});\n\nTemplate.adminInfo.onRendered(function() {\n  return Tracker.afterFlush(function() {\n    SideNav.setFlex(\"adminFlex\");\n    return SideNav.openFlex();\n  });\n});\n\nTemplate.adminInfo.onCreated(function() {\n  var instance;\n  instance = this;\n  this.statistics = new ReactiveVar({});\n  this.instances = new ReactiveVar([]);\n  this.ready = new ReactiveVar(false);\n  if (RocketChat.authz.hasAllPermission('view-statistics')) {\n    return Meteor.call('getStatistics', function(error, statistics) {\n      if (error) {\n        handleError(error);\n      } else {\n        instance.statistics.set(statistics);\n      }\n      return Meteor.call('instances/get', function(error, instances) {\n        instance.ready.set(true);\n        if (error) {\n          return handleError(error);\n        } else {\n          return instance.instances.set(instances);\n        }\n      });\n    });\n  }\n});\n"]}