{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:videobridge/client/views/videoFlexTab.js","meteor://ðŸ’»app/packages/rocketchat:videobridge/client/tabBar.js","meteor://ðŸ’»app/packages/rocketchat:videobridge/client/actionLink.js","meteor://ðŸ’»app/packages/rocketchat:videobridge/lib/messageType.js"],"names":["Template","videoFlexTab","helpers","openInNewWindow","Meteor","isCordova","RocketChat","settings","get","onCreated","tabBar","currentData","onRendered","api","timeOut","width","height","configOverwrite","desktopSharingChromeExtId","interfaceConfigOverwrite","jitsiRoomActive","closePanel","$","css","close","TabBar","updateButton","timeout","autorun","getState","roomId","Session","domain","jitsiRoom","CryptoJS","MD5","toString","noSsl","defer","dispose","clearInterval","call","setInterval","newWindow","window","open","closeInterval","closed","focus","JitsiMeetExternalAPI","length","setTimeout","executeCommand","user","name","startup","Tracker","addButton","groups","id","i18nTitle","icon","iconColor","template","order","removeButton","addGroup","removeGroup","prefix","__meteor_runtime_config__","ROOT_URL_PATH_PREFIX","getScript","rid","room","models","Rooms","findOne","_id","currentTime","Date","getTime","jitsiTimeout","toastr","module","watch","require","v","actionLinks","register","message","params","instance","info","TAPi18n","__","MessageTypes","registerType","system"],"mappings":"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","file":"/packages/rocketchat_videobridge.js","sourcesContent":["/* globals JitsiMeetExternalAPI */\n/* eslint new-cap: [2, {\"capIsNewExceptions\": [\"MD5\"]}] */\n\nTemplate.videoFlexTab.helpers({\n\topenInNewWindow() {\n\t\tif (Meteor.isCordova) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn RocketChat.settings.get('Jitsi_Open_New_Window');\n\t\t}\n\t}\n});\n\nTemplate.videoFlexTab.onCreated(function() {\n\tthis.tabBar = Template.currentData().tabBar;\n});\n\nTemplate.videoFlexTab.onRendered(function() {\n\tthis.api = null;\n\n\tlet timeOut = null;\n\n\tconst width = 'auto';\n\tconst height = 500;\n\n\tconst configOverwrite = {\n\t\tdesktopSharingChromeExtId: RocketChat.settings.get('Jitsi_Chrome_Extension')\n\t};\n\tconst interfaceConfigOverwrite = {};\n\n\tlet jitsiRoomActive = null;\n\n\tconst closePanel = () => {\n\t\t// Reset things.  Should probably be handled better in closeFlex()\n\t\t$('.flex-tab').css('max-width', '');\n\t\t$('.main-content').css('right', '');\n\n\t\tthis.tabBar.close();\n\n\t\tRocketChat.TabBar.updateButton('video', { class: '' });\n\t};\n\n\tthis.timeout = null;\n\tthis.autorun(() => {\n\t\tif (RocketChat.settings.get('Jitsi_Enabled')) {\n\t\t\tif (this.tabBar.getState() === 'opened') {\n\t\t\t\tconst roomId = Session.get('openedRoom');\n\n\t\t\t\tconst domain = RocketChat.settings.get('Jitsi_Domain');\n\t\t\t\tconst jitsiRoom = RocketChat.settings.get('Jitsi_URL_Room_Prefix') + CryptoJS.MD5(RocketChat.settings.get('uniqueID') + roomId).toString();\n\t\t\t\tconst noSsl = RocketChat.settings.get('Jitsi_SSL') ? false : true;\n\n\t\t\t\tif (jitsiRoomActive !== null && jitsiRoomActive !== jitsiRoom) {\n\t\t\t\t\tjitsiRoomActive = null;\n\n\t\t\t\t\tclosePanel();\n\n\t\t\t\t\t// Clean up and stop updating timeout.\n\t\t\t\t\tMeteor.defer(() => this.api && this.api.dispose());\n\t\t\t\t\tif (timeOut) {\n\t\t\t\t\t\tclearInterval(timeOut);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tjitsiRoomActive = jitsiRoom;\n\n\t\t\t\t\tRocketChat.TabBar.updateButton('video', { class: 'red' });\n\n\t\t\t\t\tif (RocketChat.settings.get('Jitsi_Open_New_Window') || Meteor.isCordova) {\n\t\t\t\t\t\tMeteor.call('jitsi:updateTimeout', roomId);\n\n\t\t\t\t\t\ttimeOut = Meteor.setInterval(() => Meteor.call('jitsi:updateTimeout', roomId), 10*1000);\n\t\t\t\t\t\tlet newWindow = null;\n\t\t\t\t\t\tif (Meteor.isCordova) {\n\t\t\t\t\t\t\tnewWindow = window.open(`${ (noSsl ? 'http://' : 'https://') + domain }/${ jitsiRoom }`, '_system');\n\t\t\t\t\t\t\tclosePanel();\n\t\t\t\t\t\t\tclearInterval(timeOut);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewWindow = window.open(`${ (noSsl ? 'http://' : 'https://') + domain }/${ jitsiRoom }`, jitsiRoom);\n\t\t\t\t\t\t\tconst closeInterval = setInterval(() => {\n\t\t\t\t\t\t\t\tif (newWindow.closed !== false) {\n\t\t\t\t\t\t\t\t\tclosePanel();\n\t\t\t\t\t\t\t\t\tclearInterval(closeInterval);\n\t\t\t\t\t\t\t\t\tclearInterval(timeOut);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (newWindow) {\n\t\t\t\t\t\t\tnewWindow.focus();\n\t\t\t\t\t\t}\n\n\n\n\t\t\t\t\t// Lets make sure its loaded before we try to show it.\n\t\t\t\t\t} else if (typeof JitsiMeetExternalAPI !== 'undefined') {\n\n\t\t\t\t\t\t// Keep it from showing duplicates when re-evaluated on variable change.\n\t\t\t\t\t\tif (!$('[id^=jitsiConference]').length) {\n\t\t\t\t\t\t\tthis.api = new JitsiMeetExternalAPI(domain, jitsiRoom, width, height, this.$('.video-container').get(0), configOverwrite, interfaceConfigOverwrite, noSsl);\n\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t* Hack to send after frame is loaded.\n\t\t\t\t\t\t\t* postMessage converts to events in the jitsi meet iframe.\n\t\t\t\t\t\t\t* For some reason those aren't working right.\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tMeteor.setTimeout(() => {\n\t\t\t\t\t\t\t\tthis.api.executeCommand('displayName', [Meteor.user().name]);\n\t\t\t\t\t\t\t}, 5000);\n\n\t\t\t\t\t\t\tMeteor.call('jitsi:updateTimeout', roomId);\n\n\t\t\t\t\t\t\ttimeOut = Meteor.setInterval(() => Meteor.call('jitsi:updateTimeout', roomId), 10*1000);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Execute any commands that might be reactive.  Like name changing.\n\t\t\t\t\t\tthis.api && this.api.executeCommand('displayName', [Meteor.user().name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tRocketChat.TabBar.updateButton('video', { class: '' });\n\n\t\t\t\t// Clean up and stop updating timeout.\n\t\t\t\tif (timeOut) {\n\t\t\t\t\tMeteor.defer(() => this.api && this.api.dispose());\n\t\t\t\t\tclearInterval(timeOut);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n});\n\n","Meteor.startup(function() {\n\tTracker.autorun(function() {\n\t\tif (RocketChat.settings.get('Jitsi_Enabled')) {\n\t\t\tRocketChat.TabBar.addButton({\n\t\t\t\tgroups: ['direct', 'group'],\n\t\t\t\tid: 'video',\n\t\t\t\ti18nTitle: 'Video Chat',\n\t\t\t\ticon: 'icon-videocam',\n\t\t\t\ticonColor: 'red',\n\t\t\t\ttemplate: 'videoFlexTab',\n\t\t\t\twidth: 600,\n\t\t\t\torder: 12\n\t\t\t});\n\t\t} else {\n\t\t\tRocketChat.TabBar.removeButton('video');\n\t\t}\n\t});\n\n\tTracker.autorun(function() {\n\t\tif (RocketChat.settings.get('Jitsi_Enabled') && RocketChat.settings.get('Jitsi_Enable_Channels')) {\n\t\t\tRocketChat.TabBar.addGroup('video', ['channel']);\n\t\t} else {\n\t\t\tRocketChat.TabBar.removeGroup('video', ['channel']);\n\t\t}\n\t});\n\n\tTracker.autorun(function() {\n\t\tif (RocketChat.settings.get('Jitsi_Enabled')) {\n\t\t\t// Load from the jitsi meet instance.\n\t\t\tif (typeof JitsiMeetExternalAPI === 'undefined') {\n\t\t\t\tconst prefix = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\t\t\t\t$.getScript(`${ prefix }/packages/rocketchat_videobridge/client/public/external_api.js`);\n\t\t\t}\n\n\t\t\t// Compare current time to call started timeout.  If its past then call is probably over.\n\t\t\tif (Session.get('openedRoom')) {\n\t\t\t\tconst rid = Session.get('openedRoom');\n\n\t\t\t\tconst room = RocketChat.models.Rooms.findOne({_id: rid});\n\t\t\t\tconst currentTime = new Date().getTime();\n\t\t\t\tconst jitsiTimeout = new Date((room && room.jitsiTimeout) || currentTime).getTime();\n\n\t\t\t\tif (jitsiTimeout > currentTime) {\n\t\t\t\t\tRocketChat.TabBar.updateButton('video', { class: 'attention' });\n\t\t\t\t} else {\n\t\t\t\t\tRocketChat.TabBar.updateButton('video', { class: '' });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n});\n","import toastr from 'toastr';\nRocketChat.actionLinks.register('joinJitsiCall', function(message, params, instance) {\n\tif (Session.get('openedRoom')) {\n\t\tconst rid = Session.get('openedRoom');\n\n\t\tconst room = RocketChat.models.Rooms.findOne({_id: rid});\n\t\tconst currentTime = new Date().getTime();\n\t\tconst jitsiTimeout = new Date((room && room.jitsiTimeout) || currentTime).getTime();\n\n\t\tif (jitsiTimeout > currentTime) {\n\t\t\tinstance.tabBar.open('video');\n\t\t} else {\n\t\t\ttoastr.info(TAPi18n.__('Call Already Ended', ''));\n\t\t}\n\t}\n});\n","Meteor.startup(function() {\n\tRocketChat.MessageTypes.registerType({\n\t\tid: 'jitsi_call_started',\n\t\tsystem: true,\n\t\tmessage: 'Started a Video Call!'\n\t});\n});\n"]}