{"version":3,"sources":["meteor://üíªapp/packages/rocketchat:oembed/client/baseWidget.js","meteor://üíªapp/packages/rocketchat:oembed/client/oembedImageWidget.js","meteor://üíªapp/packages/rocketchat:oembed/client/oembedAudioWidget.js","meteor://üíªapp/packages/rocketchat:oembed/client/oembedVideoWidget.js","meteor://üíªapp/packages/rocketchat:oembed/client/oembedYoutubeWidget.js","meteor://üíªapp/packages/rocketchat:oembed/client/oembedUrlWidget.js","meteor://üíªapp/packages/rocketchat:oembed/client/oembedFrameWidget.js","meteor://üíªapp/packages/rocketchat:oembed/client/oembedSandstormGrain.js"],"names":["Template","oembedBaseWidget","helpers","template","contentType","headers","_overrideTemplate","match","meta","twitterPlayerStreamContentType","oembedHtml","sandstorm","grain","oembedImageWidget","loadImage","user","Meteor","settings","preferences","autoImageLoad","downloadImages","Device","isPhone","saveMobileBandwidth","collapsed","collapseMediaByDefault","oembedAudioWidget","getTitle","self","ogTitle","twitterTitle","title","pageTitle","oembedVideoWidget","url","twitterPlayerStream","oembedYoutubeWidget","getDescription","description","ogDescription","twitterDescription","_","unescape","replace","oembedUrlWidget","isString","Blaze","_escape","target","parsedUrl","host","document","location","image","decodedOgImage","ogImage","msapplicationTileImage","twitterImage","indexOf","protocol","show","oembedFrameWidget","oembedSandstormGrain","token","appTitle","defaultText","grainTitle","appIconUrl","descriptor","window","sandstormOembed","e","event","src","srcElement","getAttribute","call"],"mappings":"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","file":"/packages/rocketchat_oembed.js","sourcesContent":["Template.oembedBaseWidget.helpers({\n\ttemplate() {\n\t\tlet contentType;\n\t\tif (this.headers) {\n\t\t\tcontentType = this.headers.contentType;\n\t\t}\n\n\t\tif (this._overrideTemplate) {\n\t\t\treturn this._overrideTemplate;\n\t\t}\n\t\tif (this.headers && contentType && contentType.match(/image\\/.*/)) {\n\t\t\treturn 'oembedImageWidget';\n\t\t}\n\t\tif (this.headers && contentType && contentType.match(/audio\\/.*/)) {\n\t\t\treturn 'oembedAudioWidget';\n\t\t}\n\t\tif ((this.headers && contentType && contentType.match(/video\\/.*/)) || (this.meta && this.meta.twitterPlayerStreamContentType && this.meta.twitterPlayerStreamContentType.match(/video\\/.*/))) {\n\t\t\treturn 'oembedVideoWidget';\n\t\t}\n\t\tif (this.meta && this.meta.oembedHtml) {\n\t\t\treturn 'oembedFrameWidget';\n\t\t}\n\t\tif (this.meta && this.meta.sandstorm && this.meta.sandstorm.grain) {\n\t\t\treturn 'oembedSandstormGrain';\n\t\t}\n\t\treturn 'oembedUrlWidget';\n\t}\n});\n","Template.oembedImageWidget.helpers({\n\tloadImage() {\n\t\tconst user = Meteor.user();\n\n\t\tif (user && user.settings && user.settings.preferences && user.settings.preferences.autoImageLoad === false && this.downloadImages == null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (Meteor.Device.isPhone() && user && user.settings && user.settings.preferences && user.settings.preferences.saveMobileBandwidth && this.downloadImages == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\tcollapsed() {\n\t\tif (this.collapsed != null) {\n\t\t\treturn this.collapsed;\n\t\t} else {\n\t\t\tconst user = Meteor.user();\n\t\t\treturn user && user.settings && user.settings.preferences && user.settings.preferences.collapseMediaByDefault === true;\n\t\t}\n\t}\n});\n","Template.oembedAudioWidget.helpers({\n\tcollapsed() {\n\t\tif (this.collapsed) {\n\t\t\treturn this.collapsed;\n\t\t} else {\n\t\t\tconst user = Meteor.user();\n\t\t\treturn user && user.settings && user.settings.preferences && user.settings.preferences.collapseMediaByDefault === true;\n\t\t}\n\t}\n});\n","const getTitle = function(self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\treturn self.meta.ogTitle || self.meta.twitterTitle || self.meta.title || self.meta.pageTitle;\n};\n\nTemplate.oembedVideoWidget.helpers({\n\turl() {\n\t\tif (this.meta && this.meta.twitterPlayerStream) {\n\t\t\treturn this.meta.twitterPlayerStream;\n\t\t} else if (this.url) {\n\t\t\treturn this.url;\n\t\t}\n\t},\n\tcontentType() {\n\t\tif (this.meta && this.meta.twitterPlayerStreamContentType) {\n\t\t\treturn this.meta.twitterPlayerStreamContentType;\n\t\t} else if (this.headers && this.headers.contentType) {\n\t\t\treturn this.headers.contentType;\n\t\t}\n\t},\n\ttitle() {\n\t\treturn getTitle(this);\n\t},\n\tcollapsed() {\n\t\tif (this.collapsed) {\n\t\t\treturn this.collapsed;\n\t\t} else {\n\t\t\tconst user = Meteor.user();\n\t\t\treturn user && user.settings && user.settings.preferences && user.settings.preferences.collapseMediaByDefault === true;\n\t\t}\n\t}\n\n});\n","Template.oembedYoutubeWidget.helpers({\n\tcollapsed() {\n\t\tif (this.collapsed) {\n\t\t\treturn this.collapsed;\n\t\t} else {\n\t\t\tconst user = Meteor.user();\n\t\t\treturn user && user.settings && user.settings.preferences && user.settings.preferences.collapseMediaByDefault === true;\n\t\t}\n\t}\n});\n","const getTitle = function(self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\treturn self.meta.ogTitle || self.meta.twitterTitle || self.meta.title || self.meta.pageTitle;\n};\n\nconst getDescription = function(self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\tconst description = self.meta.ogDescription || self.meta.twitterDescription || self.meta.description;\n\tif (description == null) {\n\t\treturn;\n\t}\n\treturn _.unescape(description.replace(/(^[‚Äú\\s]*)|([‚Äù\\s]*$)/g, ''));\n};\n\nTemplate.oembedUrlWidget.helpers({\n\tdescription() {\n\t\tconst description = getDescription(this);\n\t\tif (_.isString(description)) {\n\t\t\treturn Blaze._escape(description);\n\t\t}\n\t},\n\ttitle() {\n\t\tconst title = getTitle(this);\n\t\tif (_.isString(title)) {\n\t\t\treturn Blaze._escape(title);\n\t\t}\n\t},\n\ttarget() {\n\t\tif (!(this.parsedUrl && this.parsedUrl.host) || !(document && document.location && document.location.host) || (this.parsedUrl && this.parsedUrl.host !== document.location.host)) {\n\t\t\treturn '_blank';\n\t\t}\n\t},\n\timage() {\n\t\tif (this.meta == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet decodedOgImage;\n\t\tif (this.meta.ogImage && this.meta.ogImage.replace) {\n\t\t\tdecodedOgImage = this.meta.ogImage.replace(/&amp;/g, '&');\n\t\t}\n\t\tlet url = this.meta.msapplicationTileImage || decodedOgImage || this.meta.twitterImage;\n\t\tif (url == null) {\n\t\t\treturn;\n\t\t}\n\t\tif (url.indexOf('//') === 0) {\n\t\t\turl = `${ this.parsedUrl.protocol }${ url }`;\n\t\t} else if (url.indexOf('/') === 0 && (this.parsedUrl && this.parsedUrl.host)) {\n\t\t\turl = `${ this.parsedUrl.protocol }//${ this.parsedUrl.host }${ url }`;\n\t\t}\n\t\treturn url;\n\t},\n\tshow() {\n\t\treturn (getDescription(this) != null) || (getTitle(this) != null);\n\t},\n\tcollapsed() {\n\t\tif (this.collapsed != null) {\n\t\t\treturn this.collapsed;\n\t\t} else {\n\t\t\tconst user = Meteor.user();\n\t\t\treturn user && user.settings && user.settings.preferences && user.settings.preferences.collapseMediaByDefault === true;\n\t\t}\n\t}\n});\n","Template.oembedFrameWidget.helpers({\n\tcollapsed() {\n\t\tif (this.collapsed) {\n\t\t\treturn this.collapsed;\n\t\t} else {\n\t\t\tconst user = Meteor.user();\n\t\t\treturn user && user.settings && user.settings.preferences && user.settings.preferences.collapseMediaByDefault === true;\n\t\t}\n\t}\n});\n","Template.oembedSandstormGrain.helpers({\n\ttoken() {\n\t\treturn this.meta.sandstorm.grain.token;\n\t},\n\tappTitle() {\n\t\treturn this.meta.sandstorm.grain.appTitle.defaultText;\n\t},\n\tgrainTitle() {\n\t\treturn this.meta.sandstorm.grain.grainTitle;\n\t},\n\tappIconUrl() {\n\t\treturn this.meta.sandstorm.grain.appIconUrl;\n\t},\n\tdescriptor() {\n\t\treturn this.meta.sandstorm.grain.descriptor;\n\t}\n});\n\nwindow.sandstormOembed = function(e) {\n\te = e || window.event;\n\tconst src = e.target || e.srcElement;\n\tconst token = src.getAttribute('data-token');\n\tconst descriptor = src.getAttribute('data-descriptor');\n\treturn Meteor.call('sandstormOffer', token, descriptor);\n};\n"]}