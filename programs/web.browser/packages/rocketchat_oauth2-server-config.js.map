{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat_oauth2-server-config/oauth/client/oauth2-client.coffee","meteor://ðŸ’»app/oauth/client/oauth2-client.coffee.js","meteor://ðŸ’»app/packages/rocketchat_oauth2-server-config/admin/client/startup.coffee","meteor://ðŸ’»app/packages/rocketchat_oauth2-server-config/admin/client/collection.coffee","meteor://ðŸ’»app/packages/rocketchat_oauth2-server-config/admin/client/route.coffee","meteor://ðŸ’»app/admin/client/route.coffee.js","meteor://ðŸ’»app/packages/rocketchat_oauth2-server-config/admin/client/views/oauthApp.coffee","meteor://ðŸ’»app/admin/client/views/oauthApp.coffee.js","meteor://ðŸ’»app/packages/rocketchat_oauth2-server-config/admin/client/views/oauthApps.coffee","meteor://ðŸ’»app/admin/client/views/oauthApps.coffee.js"],"names":["FlowRouter","route","action","params","queryParams","BlazeLayout","render","center","modal","client_id","redirect_uri","response_type","state","error","Template","authorize","onCreated","subscribe","data","helpers","getToken","localStorage","getItem","getClient","ChatOAuthApps","findOne","events","Meteor","logout","window","close","onRendered","autorun","_this","c","ref","ref1","ref2","user","oauth","authorizedClients","indexOf","stop","$","click","RocketChat","AdminBox","addOption","href","i18nLabel","permissionGranted","authz","hasAllPermission","Mongo","Collection","name","pageTitle","t","pageTemplate","toastr","module","import","v","oauthApp","record","ReactiveVar","active","hasPermission","base","instance","id","_id","authorization_url","absoluteUrl","access_token_url","set","curValue","swal","title","text","type","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","html","call","err","timer","showConfirmButton","go","app","redirectUri","val","trim","TAPi18n","__","handleError","success","moment","oauthApps","applications","find","dateFormated","date","format"],"mappings":"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","file":"/packages/rocketchat_oauth2-server-config.js","sourcesContent":["# @ChatOAuthApps = new Mongo.Collection 'rocketchat_oauth_apps'\n\nFlowRouter.route '/oauth/authorize',\n\taction: (params, queryParams) ->\n\t\tBlazeLayout.render 'main',\n\t\t\tcenter: 'authorize'\n\t\t\tmodal: true\n\t\t\tclient_id: queryParams.client_id\n\t\t\tredirect_uri: queryParams.redirect_uri\n\t\t\tresponse_type: queryParams.response_type\n\t\t\tstate: queryParams.state\n\n\nFlowRouter.route '/oauth/error/:error',\n\taction: (params, queryParams) ->\n\t\tBlazeLayout.render 'main',\n\t\t\tcenter: 'oauth404'\n\t\t\tmodal: true\n\t\t\terror: params.error\n\n\nTemplate.authorize.onCreated ->\n\t@subscribe 'authorizedOAuth'\n\t@subscribe 'oauthClient', @data.client_id()\n\n\nTemplate.authorize.helpers\n\tgetToken: ->\n\t\treturn localStorage.getItem('Meteor.loginToken')\n\n\tgetClient: ->\n\t\treturn ChatOAuthApps.findOne()\n\n\nTemplate.authorize.events\n\t'click #logout-oauth': ->\n\t\treturn Meteor.logout()\n\n\t'click #cancel-oauth': ->\n\t\treturn window.close()\n\n\nTemplate.authorize.onRendered ->\n\t@autorun (c) =>\n\t\tif Meteor.user()?.oauth?.authorizedClients?.indexOf(@data.client_id()) > -1\n\t\t\tc.stop()\n\t\t\t$('button[type=submit]').click()\n","FlowRouter.route('/oauth/authorize', {\n  action: function(params, queryParams) {\n    return BlazeLayout.render('main', {\n      center: 'authorize',\n      modal: true,\n      client_id: queryParams.client_id,\n      redirect_uri: queryParams.redirect_uri,\n      response_type: queryParams.response_type,\n      state: queryParams.state\n    });\n  }\n});\n\nFlowRouter.route('/oauth/error/:error', {\n  action: function(params, queryParams) {\n    return BlazeLayout.render('main', {\n      center: 'oauth404',\n      modal: true,\n      error: params.error\n    });\n  }\n});\n\nTemplate.authorize.onCreated(function() {\n  this.subscribe('authorizedOAuth');\n  return this.subscribe('oauthClient', this.data.client_id());\n});\n\nTemplate.authorize.helpers({\n  getToken: function() {\n    return localStorage.getItem('Meteor.loginToken');\n  },\n  getClient: function() {\n    return ChatOAuthApps.findOne();\n  }\n});\n\nTemplate.authorize.events({\n  'click #logout-oauth': function() {\n    return Meteor.logout();\n  },\n  'click #cancel-oauth': function() {\n    return window.close();\n  }\n});\n\nTemplate.authorize.onRendered(function() {\n  return this.autorun((function(_this) {\n    return function(c) {\n      var ref, ref1, ref2;\n      if (((ref = Meteor.user()) != null ? (ref1 = ref.oauth) != null ? (ref2 = ref1.authorizedClients) != null ? ref2.indexOf(_this.data.client_id()) : void 0 : void 0 : void 0) > -1) {\n        c.stop();\n        return $('button[type=submit]').click();\n      }\n    };\n  })(this));\n});\n","RocketChat.AdminBox.addOption\n\thref: 'admin-oauth-apps'\n\ti18nLabel: 'OAuth Apps'\n\tpermissionGranted: ->\n\t\treturn RocketChat.authz.hasAllPermission('manage-oauth-apps')\n","@ChatOAuthApps = new Mongo.Collection 'rocketchat_oauth_apps'\n","FlowRouter.route '/admin/oauth-apps',\n\tname: 'admin-oauth-apps'\n\taction: (params) ->\n\t\tBlazeLayout.render 'main',\n\t\t\tcenter: 'pageSettingsContainer'\n\t\t\tpageTitle: t('OAuth_Applications')\n\t\t\tpageTemplate: 'oauthApps'\n\n\nFlowRouter.route '/admin/oauth-app/:id?',\n\tname: 'admin-oauth-app'\n\taction: (params) ->\n\t\tBlazeLayout.render 'main',\n\t\t\tcenter: 'pageSettingsContainer'\n\t\t\tpageTitle: t('OAuth_Application')\n\t\t\tpageTemplate: 'oauthApp'\n\t\t\tparams: params\n","FlowRouter.route('/admin/oauth-apps', {\n  name: 'admin-oauth-apps',\n  action: function(params) {\n    return BlazeLayout.render('main', {\n      center: 'pageSettingsContainer',\n      pageTitle: t('OAuth_Applications'),\n      pageTemplate: 'oauthApps'\n    });\n  }\n});\n\nFlowRouter.route('/admin/oauth-app/:id?', {\n  name: 'admin-oauth-app',\n  action: function(params) {\n    return BlazeLayout.render('main', {\n      center: 'pageSettingsContainer',\n      pageTitle: t('OAuth_Application'),\n      pageTemplate: 'oauthApp',\n      params: params\n    });\n  }\n});\n","import toastr from 'toastr'\nTemplate.oauthApp.onCreated ->\n\t@subscribe 'oauthApps'\n\t@record = new ReactiveVar\n\t\tactive: true\n\n\nTemplate.oauthApp.helpers\n\thasPermission: ->\n\t\treturn RocketChat.authz.hasAllPermission 'manage-oauth-apps'\n\n\tdata: ->\n\t\tparams = Template.instance().data.params?()\n\n\t\tif params?.id?\n\t\t\tdata = ChatOAuthApps.findOne({_id: params.id})\n\t\t\tif data?\n\t\t\t\tdata.authorization_url = Meteor.absoluteUrl(\"oauth/authorize\")\n\t\t\t\tdata.access_token_url = Meteor.absoluteUrl(\"oauth/token\")\n\n\t\t\t\tTemplate.instance().record.set data\n\t\t\t\treturn data\n\n\t\treturn Template.instance().record.curValue\n\n\nTemplate.oauthApp.events\n\t\"click .submit > .delete\": ->\n\t\tparams = Template.instance().data.params()\n\n\t\tswal\n\t\t\ttitle: t('Are_you_sure')\n\t\t\ttext: t('You_will_not_be_able_to_recover')\n\t\t\ttype: 'warning'\n\t\t\tshowCancelButton: true\n\t\t\tconfirmButtonColor: '#DD6B55'\n\t\t\tconfirmButtonText: t('Yes_delete_it')\n\t\t\tcancelButtonText: t('Cancel')\n\t\t\tcloseOnConfirm: false\n\t\t\thtml: false\n\t\t, ->\n\t\t\tMeteor.call \"deleteOAuthApp\", params.id, (err, data) ->\n\t\t\t\tswal\n\t\t\t\t\ttitle: t('Deleted')\n\t\t\t\t\ttext: t('Your_entry_has_been_deleted')\n\t\t\t\t\ttype: 'success'\n\t\t\t\t\ttimer: 1000\n\t\t\t\t\tshowConfirmButton: false\n\n\t\t\t\tFlowRouter.go \"admin-oauth-apps\"\n\n\t\"click .submit > .save\": ->\n\t\tname = $('[name=name]').val().trim()\n\t\tactive = $('[name=active]:checked').val().trim() is \"1\"\n\t\tredirectUri = $('[name=redirectUri]').val().trim()\n\n\t\tif name is ''\n\t\t\treturn toastr.error TAPi18n.__(\"The_application_name_is_required\")\n\n\t\tif redirectUri is ''\n\t\t\treturn toastr.error TAPi18n.__(\"The_redirectUri_is_required\")\n\n\t\tapp =\n\t\t\tname: name\n\t\t\tactive: active\n\t\t\tredirectUri: redirectUri\n\n\t\tparams = Template.instance().data.params?()\n\t\tif params?.id?\n\t\t\tMeteor.call \"updateOAuthApp\", params.id, app, (err, data) ->\n\t\t\t\tif err?\n\t\t\t\t\treturn handleError(err)\n\n\t\t\t\ttoastr.success TAPi18n.__(\"Application_updated\")\n\t\telse\n\t\t\tMeteor.call \"addOAuthApp\", app, (err, data) ->\n\t\t\t\tif err?\n\t\t\t\t\treturn handleError(err)\n\n\t\t\t\ttoastr.success TAPi18n.__(\"Application_added\")\n\t\t\t\tFlowRouter.go \"admin-oauth-app\", {id: data._id}\n","import toastr from 'toastr';\n\nTemplate.oauthApp.onCreated(function() {\n  this.subscribe('oauthApps');\n  return this.record = new ReactiveVar({\n    active: true\n  });\n});\n\nTemplate.oauthApp.helpers({\n  hasPermission: function() {\n    return RocketChat.authz.hasAllPermission('manage-oauth-apps');\n  },\n  data: function() {\n    var base, data, params;\n    params = typeof (base = Template.instance().data).params === \"function\" ? base.params() : void 0;\n    if ((params != null ? params.id : void 0) != null) {\n      data = ChatOAuthApps.findOne({\n        _id: params.id\n      });\n      if (data != null) {\n        data.authorization_url = Meteor.absoluteUrl(\"oauth/authorize\");\n        data.access_token_url = Meteor.absoluteUrl(\"oauth/token\");\n        Template.instance().record.set(data);\n        return data;\n      }\n    }\n    return Template.instance().record.curValue;\n  }\n});\n\nTemplate.oauthApp.events({\n  \"click .submit > .delete\": function() {\n    var params;\n    params = Template.instance().data.params();\n    return swal({\n      title: t('Are_you_sure'),\n      text: t('You_will_not_be_able_to_recover'),\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#DD6B55',\n      confirmButtonText: t('Yes_delete_it'),\n      cancelButtonText: t('Cancel'),\n      closeOnConfirm: false,\n      html: false\n    }, function() {\n      return Meteor.call(\"deleteOAuthApp\", params.id, function(err, data) {\n        swal({\n          title: t('Deleted'),\n          text: t('Your_entry_has_been_deleted'),\n          type: 'success',\n          timer: 1000,\n          showConfirmButton: false\n        });\n        return FlowRouter.go(\"admin-oauth-apps\");\n      });\n    });\n  },\n  \"click .submit > .save\": function() {\n    var active, app, base, name, params, redirectUri;\n    name = $('[name=name]').val().trim();\n    active = $('[name=active]:checked').val().trim() === \"1\";\n    redirectUri = $('[name=redirectUri]').val().trim();\n    if (name === '') {\n      return toastr.error(TAPi18n.__(\"The_application_name_is_required\"));\n    }\n    if (redirectUri === '') {\n      return toastr.error(TAPi18n.__(\"The_redirectUri_is_required\"));\n    }\n    app = {\n      name: name,\n      active: active,\n      redirectUri: redirectUri\n    };\n    params = typeof (base = Template.instance().data).params === \"function\" ? base.params() : void 0;\n    if ((params != null ? params.id : void 0) != null) {\n      return Meteor.call(\"updateOAuthApp\", params.id, app, function(err, data) {\n        if (err != null) {\n          return handleError(err);\n        }\n        return toastr.success(TAPi18n.__(\"Application_updated\"));\n      });\n    } else {\n      return Meteor.call(\"addOAuthApp\", app, function(err, data) {\n        if (err != null) {\n          return handleError(err);\n        }\n        toastr.success(TAPi18n.__(\"Application_added\"));\n        return FlowRouter.go(\"admin-oauth-app\", {\n          id: data._id\n        });\n      });\n    }\n  }\n});\n","import moment from 'moment'\n\nTemplate.oauthApps.onCreated ->\n\t@subscribe 'oauthApps'\n\nTemplate.oauthApps.helpers\n\thasPermission: ->\n\t\treturn RocketChat.authz.hasAllPermission 'manage-oauth-apps'\n\n\tapplications: ->\n\t\treturn ChatOAuthApps.find()\n\n\tdateFormated: (date) ->\n\t\treturn moment(date).format('L LT')\n","import moment from 'moment';\n\nTemplate.oauthApps.onCreated(function() {\n  return this.subscribe('oauthApps');\n});\n\nTemplate.oauthApps.helpers({\n  hasPermission: function() {\n    return RocketChat.authz.hasAllPermission('manage-oauth-apps');\n  },\n  applications: function() {\n    return ChatOAuthApps.find();\n  },\n  dateFormated: function(date) {\n    return moment(date).format('L LT');\n  }\n});\n"]}