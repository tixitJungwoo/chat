{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:login-token/server/login_token_server.js"],"names":["Accounts","registerLoginHandler","result","loginToken","user","Meteor","users","findOne","update","_id","$unset","userId"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sBAEAA,SAASC,oBAAT,CAA8B,aAA9B,EAA6C,UAASC,MAAT,EAAiB;AAC7D,KAAI,CAACA,OAAOC,UAAZ,EAAwB;AACvB;AACA;;AAED,KAAMC,OAAOC,OAAOC,KAAP,CAAaC,OAAb,CAAqB;AACjC,+BAA6BL,OAAOC;AADH,EAArB,CAAb;;AAIA,KAAIC,IAAJ,EAAU;AACTC,SAAOC,KAAP,CAAaE,MAAb,CAAoB;AAACC,QAAKL,KAAKK;AAAX,GAApB,EAAqC;AAACC,WAAQ;AAAC,2BAAuB;AAAxB;AAAT,GAArC;AAEA,SAAO;AACNC,WAAQP,KAAKK;AADP,GAAP;AAGA;AACD,CAhBD,2F","file":"/packages/rocketchat_login-token.js","sourcesContent":["/* globals Accounts */\n\nAccounts.registerLoginHandler('login-token', function(result) {\n\tif (!result.loginToken) {\n\t\treturn;\n\t}\n\n\tconst user = Meteor.users.findOne({\n\t\t'services.loginToken.token': result.loginToken\n\t});\n\n\tif (user) {\n\t\tMeteor.users.update({_id: user._id}, {$unset: {'services.loginToken': 1}});\n\n\t\treturn {\n\t\t\tuserId: user._id\n\t\t};\n\t}\n});\n"]}