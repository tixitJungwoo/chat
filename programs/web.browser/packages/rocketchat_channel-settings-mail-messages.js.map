{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:channel-settings-mail-messages/client/lib/startup.js","meteor://ðŸ’»app/packages/rocketchat:channel-settings-mail-messages/client/views/channelSettingsMailMessages.js","meteor://ðŸ’»app/packages/rocketchat:channel-settings-mail-messages/client/views/mailMessagesInstructions.js","meteor://ðŸ’»app/packages/rocketchat:channel-settings-mail-messages/client/resetSelection.js"],"names":["resetSelection","module","watch","require","v","Meteor","startup","RocketChat","ChannelSettings","addOption","group","id","template","validation","authz","hasAllPermission","callbacks","add","priority","MEDIUM","Template","channelSettingsMailMessages","helpers","canSendEmail","FlowRouter","getRouteName","events","Session","set","get","tabBar","setTemplate","onCreated","toastr","mailMessagesInstructions","name","user","email","emails","address","roomName","room","ChatRoom","findOne","erroredEmails","instance","join","autocompleteSettings","limit","rules","collection","subscription","field","userSearch","noMatchTemplate","userSearchEmpty","matchAll","filter","exceptions","selectedUsers","selector","match","term","sort","e","t","reset","$","hide","$btn","oldBtnValue","html","TAPi18n","__","selectedMessages","error","length","show","val","trim","rfcMailPatternWithName","split","forEach","test","push","data","rid","to_users","to_emails","subject","messages","map","i","message","toArray","language","localStorage","getItem","call","err","result","handleError","console","log","success","view","Blaze","getView","templateInstance","chat","ChatMessage","find","_","pluck","fetch","addClass","event","doc","concat","username","currentTarget","value","focus","users","reject","_id","valueOf","currentData","autoCompleteCollection","Mongo","Collection","ReactiveVar","autorun","export","el"],"mappings":"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","file":"/packages/rocketchat_channel-settings-mail-messages.js","sourcesContent":["import resetSelection from '../resetSelection';\nMeteor.startup(() => {\n\tRocketChat.ChannelSettings.addOption({\n\t\tgroup: ['room'],\n\t\tid: 'mail-messages',\n\t\ttemplate: 'channelSettingsMailMessages',\n\t\tvalidation() {\n\t\t\treturn RocketChat.authz.hasAllPermission('mail-messages');\n\t\t}\n\t});\n\tRocketChat.callbacks.add('roomExit', () => resetSelection(false), RocketChat.callbacks.priority.MEDIUM, 'room-exit-mail-messages');\n});\n","import resetSelection from '../resetSelection';\n\nTemplate.channelSettingsMailMessages.helpers({\n\tcanSendEmail() {\n\t\treturn FlowRouter.getRouteName() !== 'admin-rooms';\n\t}\n});\n\nTemplate.channelSettingsMailMessages.events({\n\t'click button.mail-messages'() {\n\t\tSession.set('channelSettingsMailMessages', Session.get('openedRoom'));\n\t\tthis.tabBar.setTemplate('mailMessagesInstructions');\n\t\tresetSelection(true);\n\t}\n});\n\nTemplate.channelSettingsMailMessages.onCreated(() =>resetSelection(false));\n","import toastr from 'toastr';\nimport resetSelection from '../resetSelection';\nTemplate.mailMessagesInstructions.helpers({\n\tname() {\n\t\treturn Meteor.user().name;\n\t},\n\temail() {\n\t\tconst {emails} = Meteor.user();\n\t\treturn emails && emails[0] && emails[0].address;\n\t},\n\troomName() {\n\t\tconst room = ChatRoom.findOne(Session.get('openedRoom'));\n\t\treturn room && room.name;\n\t},\n\terroredEmails() {\n\t\tconst instance = Template.instance();\n\t\treturn instance && instance.erroredEmails.get().join(', ');\n\t},\n\tautocompleteSettings() {\n\t\treturn {\n\t\t\tlimit: 10,\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\tcollection: 'CachedChannelList',\n\t\t\t\t\tsubscription: 'userAutocomplete',\n\t\t\t\t\tfield: 'username',\n\t\t\t\t\ttemplate: Template.userSearch,\n\t\t\t\t\tnoMatchTemplate: Template.userSearchEmpty,\n\t\t\t\t\tmatchAll: true,\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\texceptions: Template.instance().selectedUsers.get()\n\t\t\t\t\t},\n\t\t\t\t\tselector(match) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tterm: match\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tsort: 'username'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tselectedUsers() {\n\t\treturn Template.instance().selectedUsers.get();\n\t}\n});\n\nTemplate.mailMessagesInstructions.events({\n\t'click .cancel'(e, t) {\n\t\treturn t.reset();\n\t},\n\t'click .send'(e, t) {\n\t\tt.$('.error').hide();\n\t\tconst $btn = t.$('button.send');\n\t\tconst oldBtnValue = $btn.html();\n\t\t$btn.html(TAPi18n.__('Sending'));\n\t\tconst selectedMessages = $('.messages-box .message.selected');\n\t\tlet error = false;\n\t\tif (selectedMessages.length === 0) {\n\t\t\tt.$('.error-select').show();\n\t\t\terror = true;\n\t\t}\n\t\tif (t.$('input[name=to_emails]').val().trim()) {\n\t\t\tconst rfcMailPatternWithName = /^(?:.*<)?([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)(?:>?)$/;\n\t\t\tconst emails = t.$('input[name=to_emails]').val().trim().split(',');\n\t\t\tconst erroredEmails = [];\n\t\t\temails.forEach((email) => {\n\t\t\t\tif (!rfcMailPatternWithName.test(email.trim())) {\n\t\t\t\t\terroredEmails.push(email.trim());\n\t\t\t\t}\n\t\t\t});\n\t\t\tt.erroredEmails.set(erroredEmails);\n\t\t\tif (erroredEmails.length > 0) {\n\t\t\t\tt.$('.error-invalid-emails').show();\n\t\t\t\terror = true;\n\t\t\t}\n\t\t} else if (!t.selectedUsers.get().length) {\n\t\t\tt.$('.error-missing-to').show();\n\t\t\terror = true;\n\t\t}\n\t\tif (error) {\n\t\t\treturn $btn.html(oldBtnValue);\n\t\t}\n\t\tconst data = {\n\t\t\trid: Session.get('openedRoom'),\n\t\t\tto_users: t.selectedUsers.get(),\n\t\t\tto_emails: t.$('input[name=to_emails]').val().trim(),\n\t\t\tsubject: t.$('input[name=subject]').val().trim(),\n\t\t\tmessages: selectedMessages.map(function(i, message) {\n\t\t\t\treturn message.id;\n\t\t\t}).toArray(),\n\t\t\tlanguage: localStorage.getItem('userLanguage')\n\t\t};\n\t\treturn Meteor.call('mailMessages', data, function(err, result) {\n\t\t\t$btn.html(oldBtnValue);\n\t\t\tif (err != null) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\tconsole.log(result);\n\t\t\ttoastr.success(TAPi18n.__('Your_email_has_been_queued_for_sending'));\n\t\t\treturn t.reset();\n\t\t});\n\t},\n\t'click .select-all'(e, t) {\n\t\tt.$('.error-select').hide();\n\t\tconst view = Blaze.getView($('.messages-box')[0]);\n\t\tif (view != null) {\n\t\t\tif (typeof view.templateInstance === 'function') {\n\t\t\t\tconst chat = ChatMessage.find({\n\t\t\t\t\trid: Session.get('openedRoom')\n\t\t\t\t});\n\t\t\t\tview.templateInstance().selectedMessages = _.pluck(chat && chat.fetch(), '_id');\n\t\t\t}\n\t\t}\n\t\treturn $('.messages-box .message').addClass('selected');\n\t},\n\t'autocompleteselect #to_users'(event, instance, doc) {\n\t\tinstance.selectedUsers.set(instance.selectedUsers.get().concat(doc.username));\n\t\tevent.currentTarget.value = '';\n\t\treturn event.currentTarget.focus();\n\t},\n\t'click .remove-to-user'() {\n\t\tlet users = Template.instance().selectedUsers.get();\n\t\tusers = _.reject(Template.instance().selectedUsers.get(), (_id) => {\n\t\t\treturn _id === this.valueOf();\n\t\t});\n\t\tTemplate.instance().selectedUsers.set(users);\n\t\treturn $('#to_users').focus();\n\t}\n});\n\nTemplate.mailMessagesInstructions.onCreated(function() {\n\tconst currentData = Template.currentData();\n\tthis.autoCompleteCollection = new Mongo.Collection(null);\n\tthis.selectedUsers = new ReactiveVar([]);\n\tthis.erroredEmails = new ReactiveVar([]);\n\tthis.reset = () => {\n\t\tthis.selectedUsers.set([]);\n\t\tcurrentData.tabBar.setTemplate('channelSettings');\n\t\tresetSelection(false);\n\t};\n\treturn this.autorun(() => {\n\t\tif (Session.get('channelSettingsMailMessages') !== Session.get('openedRoom')) {\n\t\t\treturn this.reset();\n\t\t}\n\t});\n});\n","export default function resetSelection(reset) {\n\tconst [el] = $('.messages-box');\n\tif (!el) {\n\t\treturn;\n\t}\n\tconst view = Blaze.getView(el);\n\tif (view && typeof view.templateInstance === 'function') {\n\t\tconst {resetSelection} = view.templateInstance();\n\t\ttypeof resetSelection === 'function' && resetSelection(reset);\n\t}\n}\n"]}