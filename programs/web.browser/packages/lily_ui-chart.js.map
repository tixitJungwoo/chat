{"version":3,"sources":["meteor://ðŸ’»app/packages/lily:ui-chart/client/chart.js","meteor://ðŸ’»app/packages/lily:ui-chart/client/ChartDialog.js"],"names":["ChartDialog","module","watch","require","v","Template","chartDialog","events","Highcharts","chart","JSON","parse","$","val","close","msgObject","_id","Random","id","rid","roomId","msg","t","chartData","Meteor","call","helpers","preView","previewMode","onRendered","export","initClass","prototype","opened","initiated","show","width","height","init","Blaze","render","document","body","open","source","dialog","setPosition","addClass","initializeChart","preview","stringify","data","removeClass","remove","currentView","sourcePos","offset","left","top","css"],"mappings":"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","file":"/packages/lily_ui-chart.js","sourcesContent":["import {ChartDialog} from './ChartDialog';\n\nTemplate.chartDialog.events({\n    'click .chart-dialog .previewBtn'() {\n        Highcharts.chart('chartPreview', JSON.parse($(\"#chartData\").val()));\n    },\n\n    'click .chart-dialog .cancel'() {\n        ChartDialog.close();\n    },\n\n    'click .chart-dialog .ok'() {\n        let msgObject = {\n            _id: Random.id(),\n            rid: ChartDialog.roomId,\n            msg: \"\",\n            t: \"chart\",\n            chartData:JSON.parse($(\"#chartData\").val())\n        }\n\n        Meteor.call(\"sendMessage\", msgObject);\n        ChartDialog.close();\n    }\n});\n\nTemplate.chartDialog.helpers({\n\tpreView() {\n        return ChartDialog.previewMode;\n    },\n    chartData() {\n\t    return  ChartDialog.chartData;\n    }\n});\n\nTemplate.chartDialog.onRendered(function() {\n    Highcharts.chart('chartPreview', JSON.parse($(\"#chartData\").val()))\n});\n","export const ChartDialog = new class {\n\tstatic initClass() {\n\t\tthis.prototype.opened = false;\n\t\tthis.prototype.initiated = false;\n\t\tthis.prototype.previewMode = show;\n        this.prototype.roomId;\n        this.prototype.chartData;\n\t\t\t// = {\"title\": {\"text\": \"Solar Employment Growth by Sector, 2010-2016\"},\n        //     \"legend\": {\"layout\": \"vertical\",\"align\": \"right\",\"verticalAlign\": \"middle\"},\n        //     \"plotOptions\": {\"series\": {\"pointStart\": 2010}},\n        //     \"series\": [{\"name\": \"Installation\",\"data\": [43934, 52503, 57177, 69658, 97031, 119931, 137133, 154175]},\n        //         {\"name\": \"Manufacturing\",\"data\": [24916, 24064, 29742, 29851, 32490, 30282, 38121, 40434]},\n        //         {\"name\": \"Sales & Distribution\",\"data\": [11744, 17722, 16005, 19771, 20185, 24377, 32147, 39387]},\n        //         {\"name\": \"Project Development\",\"data\": [null, null, 7988, 12169, 15112, 22452, 34400, 34227]}, {\"name\": \"Other\",\"data\": [12908, 5948, 8105, 11248, 8989, 11816, 18274, 18111]}]\n        // };\n\t\tthis.prototype.width = 480;\n\t\tthis.prototype.height = 680;\n\t}\n\n\tinit() {\n\t\tif (this.initiated) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initiated = true;\n\t\treturn Blaze.render(Template.chartDialog, document.body);\n\t}\n\n\topen(source, roomId) {\n\t\tif (!this.initiated) {\n\t\t\tthis.init();\n\t\t}\n\n\t\tthis.source = source;\n\t\tconst dialog = $('.chart-dialog');\n\t\tthis.setPosition(dialog, source);\n\t\tdialog.addClass('show');\n\t\tthis.opened = true;\n        this.roomId = roomId;\n\n\t\treturn this.initializeChart();\n\t}\n\n\tpreview(source, roomId) {\n        this.previewMode = \"hidden\";\n        this.roomId = roomId;\n        this.chartData = JSON.stringify($(source).data('chartdata'))\n        this.open(source);\n\t}\n\n\tclose() {\n\t\t$('.chart-dialog').removeClass('show');\n\t\tthis.opened = false;\n        this.initiated = false;\n        this.previewMode = \"\";\n        this.chartData = \"\";\n        Blaze.remove(Blaze.currentView);\n\t}\n\n\tsetPosition(dialog, source) {\n\t\tconst sourcePos = $(source).offset();\n\t\tlet left = (sourcePos.left - this.width) + 100;\n\t\tlet top = sourcePos.top - this.height - 40;\n\n\t\tif (left < 0) {\n\t\t\tleft = 10;\n\t\t}\n\t\tif (top < 0) {\n\t\t\ttop = 10;\n\t\t}\n\n\t\treturn dialog.css({ top: `${ top }px`, left: `${ left }px` });\n\t}\n\n    initializeChart() {\n\t}\n};\n"]}