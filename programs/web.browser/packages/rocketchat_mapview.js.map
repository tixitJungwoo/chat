{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:mapview/client/mapview.js"],"names":["MapView","message","mv_googlekey","RocketChat","settings","get","location","coordinates","longitude","latitude","length","html","TAPi18n","__","callbacks","add","priority","HIGH"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;GAKA,SAASA,OAAT,CAAiBC,OAAjB,EAA0B;AAExB;AACD,KAAMC,eAAeC,WAAWC,QAAX,CAAoBC,GAApB,CAAwB,qBAAxB,CAArB;;AAEA,KAAIJ,QAAQK,QAAZ,EAAsB;AAEpB;AAFoB,2DAGSL,QAAQK,QAAR,CAAiBC,WAH1B;AAAA,MAGdC,SAHc;AAAA,MAGHC,QAHG,6BAKpB;;;AACD,MAAIP,gBAAgBA,aAAaQ,MAAjC,EAAyC;AACxCT,WAAQU,IAAR,qDAA+DF,QAA/D,SAA6ED,SAA7E,0IAAyNC,QAAzN,SAAuOD,SAAvO,aAA0PN,YAA1P;AACA,GAFD,MAEO;AACND,WAAQU,IAAR,qDAA+DF,QAA/D,SAA6ED,SAA7E,6BAA6GI,QAAQC,EAAR,CAAW,iBAAX,CAA7G;AACA;AACD;;AAED,QAAOZ,OAAP;AACA;;AAEDE,WAAWW,SAAX,CAAqBC,GAArB,CAAyB,eAAzB,EAA0Cf,OAA1C,EAAmDG,WAAWW,SAAX,CAAqBE,QAArB,CAA8BC,IAAjF,kB","file":"/packages/rocketchat_mapview.js","sourcesContent":["/*\n * MapView is a named function that will replace geolocation in messages with a Google Static Map\n * @param {Object} message - The message object\n */\n\nfunction MapView(message) {\n\n\t\t// get MapView settings\n\tconst mv_googlekey = RocketChat.settings.get('MapView_GMapsAPIKey');\n\n\tif (message.location) {\n\n\t\t\t// GeoJSON is reversed - ie. [lng, lat]\n\t\tconst [longitude, latitude] = message.location.coordinates;\n\n\t\t\t// confirm we have an api key set, and generate the html required for the mapview\n\t\tif (mv_googlekey && mv_googlekey.length) {\n\t\t\tmessage.html = `<a href=\"https://maps.google.com/maps?daddr=${ latitude },${ longitude }\" target=\"_blank\"><img src=\"https://maps.googleapis.com/maps/api/staticmap?zoom=14&size=250x250&markers=color:gray%7Clabel:%7C${ latitude },${ longitude }&key=${ mv_googlekey }\" /></a>`;\n\t\t} else {\n\t\t\tmessage.html = `<a href=\"https://maps.google.com/maps?daddr=${ latitude },${ longitude }\" target=\"_blank\">${ TAPi18n.__('Shared_Location') }</a>`;\n\t\t}\n\t}\n\n\treturn message;\n}\n\nRocketChat.callbacks.add('renderMessage', MapView, RocketChat.callbacks.priority.HIGH);\n"]}