{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:emoji-custom/function-isSet.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/admin/startup.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/admin/adminEmoji.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/admin/emojiEdit.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/admin/emojiInfo.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/admin/route.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/client/lib/emojiCustom.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/client/models/EmojiCustom.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/client/notifications/updateEmojiCustom.js","meteor://ðŸ’»app/packages/rocketchat:emoji-custom/client/notifications/deleteEmojiCustom.js"],"names":["isSet","fn","value","e","undefined","isSetNotNull","RocketChat","AdminBox","addOption","href","i18nLabel","permissionGranted","authz","hasAtLeastOnePermission","Template","adminEmoji","helpers","isReady","instance","ready","get","customemoji","isLoading","hasMore","limit","length","flexData","tabBar","data","tabBarData","onCreated","ReactiveVar","filter","RocketChatTabBar","showGroup","FlowRouter","current","route","name","TabBar","addButton","groups","id","i18nTitle","icon","template","order","autorun","subscription","subscribe","set","_","trim","query","filterReg","RegExp","s","escapeRegExp","$or","aliases","models","EmojiCustom","find","sort","fetch","onRendered","Tracker","afterFlush","SideNav","setFlex","openFlex","events","which","stopPropagation","preventDefault","t","currentTarget","findOne","_id","open","toastr","module","watch","require","v","emojiEdit","emoji","emojiFile","cancel","save","ev","originalEvent","files","target","dataTransfer","file","hasOwnProperty","currentData","form","reset","close","back","getEmojiData","emojiData","previousName","extension","previousExtension","$","val","newFile","validate","errors","push","error","TAPi18n","__","field","test","type","split","pop","Meteor","call","result","info","reader","FileReader","readAsBinaryString","onloadend","uploadError","handleError","console","log","success","emojiInfo","editingEmoji","emojiToEdit","loadedName","toggleClass","swal","title","text","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","html","disableButtons","enableButtons","timer","showConfirmButton","clear","subscriptions","register","action","BlazeLayout","render","center","packages","emojiCustom","emojiCategories","rocket","toneList","list","regShortNames","join","replace","shortname","indexOf","emojiAlias","dataCheck","getEmojiUrlFromName","Session","key","random","keys","path","isCordova","absoluteUrl","__meteor_runtime_config__","ROOT_URL_PATH_PREFIX","encodeURIComponent","Blaze","registerHelper","deleteEmojiCustom","arrayIndex","emojisByCategory","splice","arrayIndexList","alias","aliasIndex","EmojiPicker","updateRecent","updateEmojiCustom","Math","round","previousExists","currentAliases","categoryIndex","Object","assign","emojiPackage","aliasOf","url","document","css","attr","RoomManager","openedRooms","room","dom","startup","_initModel","_Base","Notifications","onLogged"],"mappings":"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","file":"/packages/rocketchat_emoji-custom.js","sourcesContent":["/* globals isSet:true, isSetNotNull:true */\n//http://stackoverflow.com/a/26990347 function isSet() from Gajus\nisSet = function(fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = undefined;\n\t} finally {\n\t\treturn value !== undefined;\n\t}\n};\n\nisSetNotNull = function(fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t} finally {\n\t\treturn value !== null && value !== undefined;\n\t}\n};\n\n/* exported isSet, isSetNotNull */\n","RocketChat.AdminBox.addOption({\n\thref: 'emoji-custom',\n\ti18nLabel: 'Custom_Emoji',\n\tpermissionGranted() {\n\t\treturn RocketChat.authz.hasAtLeastOnePermission(['manage-emoji']);\n\t}\n});\n","/* globals RocketChatTabBar */\nTemplate.adminEmoji.helpers({\n\tisReady() {\n\t\tif (Template.instance().ready != null) {\n\t\t\treturn Template.instance().ready.get();\n\t\t}\n\t\treturn undefined;\n\t},\n\tcustomemoji() {\n\t\treturn Template.instance().customemoji();\n\t},\n\tisLoading() {\n\t\tif (Template.instance().ready != null) {\n\t\t\tif (!Template.instance().ready.get()) {\n\t\t\t\treturn 'btn-loading';\n\t\t\t}\n\t\t}\n\t},\n\thasMore() {\n\t\tif (Template.instance().limit != null) {\n\t\t\tif (typeof Template.instance().customemoji === 'function') {\n\t\t\t\treturn Template.instance().limit.get() === Template.instance().customemoji().length;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tflexData() {\n\t\treturn {\n\t\t\ttabBar: Template.instance().tabBar,\n\t\t\tdata: Template.instance().tabBarData.get()\n\t\t};\n\t}\n});\n\nTemplate.adminEmoji.onCreated(function() {\n\tconst instance = this;\n\tthis.limit = new ReactiveVar(50);\n\tthis.filter = new ReactiveVar('');\n\tthis.ready = new ReactiveVar(false);\n\n\tthis.tabBar = new RocketChatTabBar();\n\tthis.tabBar.showGroup(FlowRouter.current().route.name);\n\tthis.tabBarData = new ReactiveVar();\n\n\tRocketChat.TabBar.addButton({\n\t\tgroups: ['emoji-custom'],\n\t\tid: 'add-emoji',\n\t\ti18nTitle: 'Custom_Emoji_Add',\n\t\ticon: 'icon-plus',\n\t\ttemplate: 'adminEmojiEdit',\n\t\torder: 1\n\t});\n\n\tRocketChat.TabBar.addButton({\n\t\tgroups: ['emoji-custom'],\n\t\tid: 'admin-emoji-info',\n\t\ti18nTitle: 'Custom_Emoji_Info',\n\t\ticon: 'icon-cog',\n\t\ttemplate: 'adminEmojiInfo',\n\t\torder: 2\n\t});\n\n\tthis.autorun(function() {\n\t\tconst limit = (instance.limit != null) ? instance.limit.get() : 0;\n\t\tconst subscription = instance.subscribe('fullEmojiData', '', limit);\n\t\tinstance.ready.set(subscription.ready());\n\t});\n\n\tthis.customemoji = function() {\n\t\tconst filter = (instance.filter != null) ? _.trim(instance.filter.get()) : '';\n\n\t\tlet query = {};\n\n\t\tif (filter) {\n\t\t\tconst filterReg = new RegExp(s.escapeRegExp(filter), 'i');\n\t\t\tquery = { $or: [ { name: filterReg }, {aliases: filterReg } ] };\n\t\t}\n\n\t\tconst limit = (instance.limit != null) ? instance.limit.get() : 0;\n\n\t\treturn RocketChat.models.EmojiCustom.find(query, { limit, sort: { name: 1 }}).fetch();\n\t};\n});\n\nTemplate.adminEmoji.onRendered(() =>\n\tTracker.afterFlush(function() {\n\t\tSideNav.setFlex('adminFlex');\n\t\tSideNav.openFlex();\n\t})\n);\n\nTemplate.adminEmoji.events({\n\t'keydown #emoji-filter'(e) {\n\t\t//stop enter key\n\t\tif (e.which === 13) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\n\t'keyup #emoji-filter'(e, t) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tt.filter.set(e.currentTarget.value);\n\t},\n\n\t'click .emoji-info'(e, instance) {\n\t\te.preventDefault();\n\t\tinstance.tabBarData.set(RocketChat.models.EmojiCustom.findOne({_id: this._id}));\n\t\tinstance.tabBar.open('admin-emoji-info');\n\t},\n\n\t'click .load-more'(e, t) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tt.limit.set(t.limit.get() + 50);\n\t}\n});\n","import toastr from 'toastr';\n\nTemplate.emojiEdit.helpers({\n\temoji() {\n\t\treturn Template.instance().emoji;\n\t},\n\n\tname() {\n\t\treturn this.name || this._id;\n\t}\n});\n\nTemplate.emojiEdit.events({\n\t'click .cancel'(e, t) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tdelete Template.instance().emojiFile;\n\t\tt.cancel(t.find('form'));\n\t},\n\n\t'submit form'(e, t) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tt.save(e.currentTarget);\n\t},\n\n\t'change input[type=file]'(ev) {\n\t\tconst e = ev.originalEvent != null ? ev.originalEvent : ev;\n\t\tlet files = e.target.files;\n\t\tif (files == null || files.length === 0) {\n\t\t\tif (e.dataTransfer != null && e.dataTransfer.files != null) {\n\t\t\t\tfiles = e.dataTransfer.files;\n\t\t\t} else {\n\t\t\t\tfiles = [];\n\t\t\t}\n\t\t}\n\n\t\t//using let x of y here seems to have incompatibility with some phones\n\t\tfor (const file in files) {\n\t\t\tif (files.hasOwnProperty(file)) {\n\t\t\t\tTemplate.instance().emojiFile = files[file];\n\t\t\t}\n\t\t}\n\t}\n});\n\nTemplate.emojiEdit.onCreated(function() {\n\tif (this.data != null) {\n\t\tthis.emoji = this.data.emoji;\n\t} else {\n\t\tthis.emoji = undefined;\n\t}\n\n\tthis.tabBar = Template.currentData().tabBar;\n\n\tthis.cancel = (form, name) => {\n\t\tform.reset();\n\t\tthis.tabBar.close();\n\t\tif (this.emoji) {\n\t\t\tthis.data.back(name);\n\t\t}\n\t};\n\n\tthis.getEmojiData = () => {\n\t\tconst emojiData = {};\n\t\tif (this.emoji != null) {\n\t\t\temojiData._id = this.emoji._id;\n\t\t\temojiData.previousName = this.emoji.name;\n\t\t\temojiData.extension = this.emoji.extension;\n\t\t\temojiData.previousExtension = this.emoji.extension;\n\t\t}\n\t\temojiData.name = s.trim(this.$('#name').val());\n\t\temojiData.aliases = s.trim(this.$('#aliases').val());\n\t\temojiData.newFile = false;\n\t\treturn emojiData;\n\t};\n\n\tthis.validate = () => {\n\t\tconst emojiData = this.getEmojiData();\n\n\t\tconst errors = [];\n\t\tif (!emojiData.name) {\n\t\t\terrors.push('Name');\n\t\t}\n\n\t\tif (!emojiData._id) {\n\t\t\tif (!this.emojiFile) {\n\t\t\t\terrors.push('Image');\n\t\t\t}\n\t\t}\n\n\t\tfor (const error of errors) {\n\t\t\ttoastr.error(TAPi18n.__('error-the-field-is-required', { field: TAPi18n.__(error) }));\n\t\t}\n\n\t\tif (this.emojiFile) {\n\t\t\tif (!/image\\/.+/.test(this.emojiFile.type)) {\n\t\t\t\terrors.push('FileType');\n\t\t\t\ttoastr.error(TAPi18n.__('error-invalid-file-type'));\n\t\t\t}\n\t\t}\n\n\t\treturn errors.length === 0;\n\t};\n\n\tthis.save = (form) => {\n\t\tif (this.validate()) {\n\t\t\tconst emojiData = this.getEmojiData();\n\n\t\t\tif (this.emojiFile) {\n\t\t\t\temojiData.newFile = true;\n\t\t\t\temojiData.extension = this.emojiFile.name.split('.').pop();\n\t\t\t}\n\n\t\t\tMeteor.call('insertOrUpdateEmoji', emojiData, (error, result) => {\n\t\t\t\tif (result) {\n\t\t\t\t\tif (this.emojiFile) {\n\t\t\t\t\t\ttoastr.info(TAPi18n.__('Uploading_file'));\n\n\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\treader.readAsBinaryString(this.emojiFile);\n\t\t\t\t\t\treader.onloadend = () => {\n\t\t\t\t\t\t\tMeteor.call('uploadEmojiCustom', reader.result, this.emojiFile.type, emojiData, (uploadError/*, data*/) => {\n\t\t\t\t\t\t\t\tif (uploadError != null) {\n\t\t\t\t\t\t\t\t\thandleError(uploadError);\n\t\t\t\t\t\t\t\t\tconsole.log(uploadError);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdelete this.emojiFile;\n\t\t\t\t\t\t\ttoastr.success(TAPi18n.__('File_uploaded'));\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (emojiData._id) {\n\t\t\t\t\t\ttoastr.success(t('Custom_Emoji_Updated_Successfully'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoastr.success(t('Custom_Emoji_Added_Successfully'));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.cancel(form, emojiData.name);\n\t\t\t\t}\n\n\t\t\t\tif (error) {\n\t\t\t\t\thandleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n});\n","Template.emojiInfo.helpers({\n\tname() {\n\t\tconst emoji = Template.instance().emoji.get();\n\t\treturn emoji.name;\n\t},\n\n\taliases() {\n\t\tconst emoji = Template.instance().emoji.get();\n\t\treturn emoji.aliases;\n\t},\n\n\temoji() {\n\t\treturn Template.instance().emoji.get();\n\t},\n\n\teditingEmoji() {\n\t\treturn Template.instance().editingEmoji.get();\n\t},\n\n\temojiToEdit() {\n\t\tconst instance = Template.instance();\n\t\treturn {\n\t\t\ttabBar: this.tabBar,\n\t\t\temoji: instance.emoji.get(),\n\t\t\tback(name) {\n\t\t\t\tinstance.editingEmoji.set();\n\n\t\t\t\tif (name != null) {\n\t\t\t\t\tconst emoji = instance.emoji.get();\n\t\t\t\t\tif (emoji != null && emoji.name != null && emoji.name !== name) {\n\t\t\t\t\t\treturn instance.loadedName.set(name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\nTemplate.emojiInfo.events({\n\t'click .thumb'(e) {\n\t\t$(e.currentTarget).toggleClass('bigger');\n\t},\n\n\t'click .delete'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tconst emoji = instance.emoji.get();\n\t\tif (emoji != null) {\n\t\t\tconst _id = emoji._id;\n\t\t\tswal({\n\t\t\t\ttitle: t('Are_you_sure'),\n\t\t\t\ttext: t('Custom_Emoji_Delete_Warning'),\n\t\t\t\ttype: 'warning',\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: '#DD6B55',\n\t\t\t\tconfirmButtonText: t('Yes_delete_it'),\n\t\t\t\tcancelButtonText: t('Cancel'),\n\t\t\t\tcloseOnConfirm: false,\n\t\t\t\thtml: false\n\t\t\t}, function() {\n\t\t\t\tswal.disableButtons();\n\n\t\t\t\tMeteor.call('deleteEmojiCustom', _id, (error/*, result*/) => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\thandleError(error);\n\t\t\t\t\t\tswal.enableButtons();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswal({\n\t\t\t\t\t\t\ttitle: t('Deleted'),\n\t\t\t\t\t\t\ttext: t('Custom_Emoji_Has_Been_Deleted'),\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\ttimer: 2000,\n\t\t\t\t\t\t\tshowConfirmButton: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tinstance.tabBar.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\t'click .edit-emoji'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tinstance.editingEmoji.set(instance.emoji.get()._id);\n\t}\n});\n\nTemplate.emojiInfo.onCreated(function() {\n\tthis.emoji = new ReactiveVar();\n\n\tthis.editingEmoji = new ReactiveVar();\n\n\tthis.loadedName = new ReactiveVar();\n\n\tthis.tabBar = Template.currentData().tabBar;\n\n\tthis.autorun(() => {\n\t\tconst data = Template.currentData();\n\t\tif (data != null && data.clear != null) {\n\t\t\tthis.clear = data.clear;\n\t\t}\n\t});\n\n\tthis.autorun(() => {\n\t\tconst data = Template.currentData();\n\t\tconst emoji = this.emoji.get();\n\t\tif (emoji != null && emoji.name != null) {\n\t\t\tthis.loadedName.set(emoji.name);\n\t\t} else if (data != null && data.name != null) {\n\t\t\tthis.loadedName.set(data.name);\n\t\t}\n\t});\n\n\tthis.autorun(() => {\n\t\tconst data = Template.currentData();\n\t\tthis.emoji.set(data);\n\t});\n});\n","FlowRouter.route('/admin/emoji-custom', {\n\tname: 'emoji-custom',\n\tsubscriptions(/*params, queryParams*/) {\n\t\tthis.register('EmojiCustom', Meteor.subscribe('EmojiCustom'));\n\t},\n\taction(/*params*/) {\n\t\tBlazeLayout.render('main', {center: 'adminEmoji'});\n\t}\n});\n","/* globals getEmojiUrlFromName:true, updateEmojiCustom:true, deleteEmojiCustom:true, isSetNotNull */\nRocketChat.emoji.packages.emojiCustom = {\n\temojiCategories: { rocket: TAPi18n.__('Custom') },\n\ttoneList: {},\n\tlist: [],\n\n\trender(html) {\n\t\tconst regShortNames = new RegExp(`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${ RocketChat.emoji.packages.emojiCustom.list.join('|') })`, 'gi');\n\n\t\t// replace regular shortnames first\n\t\thtml = html.replace(regShortNames, function(shortname) {\n\t\t\t// console.log('shortname (preif) ->', shortname, html);\n\t\t\tif ((typeof shortname === 'undefined') || (shortname === '') || (RocketChat.emoji.packages.emojiCustom.list.indexOf(shortname) === -1)) {\n\t\t\t\t// if the shortname doesnt exist just return the entire match\n\t\t\t\treturn shortname;\n\t\t\t} else {\n\t\t\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\t\t\tlet dataCheck = RocketChat.emoji.list[shortname];\n\t\t\t\tif (dataCheck.hasOwnProperty('aliasOf')) {\n\t\t\t\t\temojiAlias = dataCheck['aliasOf'];\n\t\t\t\t\tdataCheck = RocketChat.emoji.list[`:${ emojiAlias }:`];\n\t\t\t\t}\n\n\t\t\t\treturn `<span class=\"emoji\" style=\"background-image:url(${ getEmojiUrlFromName(emojiAlias, dataCheck['extension']) });\" data-emoji=\"${ emojiAlias }\" title=\"${ shortname }\">${ shortname }</span>`;\n\t\t\t}\n\t\t});\n\n\t\treturn html;\n\t}\n};\n\ngetEmojiUrlFromName = function(name, extension) {\n\tSession.get;\n\n\tconst key = `emoji_random_${ name }`;\n\n\tlet random = 0;\n\tif (isSetNotNull(() => Session.keys[key])) {\n\t\trandom = Session.keys[key];\n\t}\n\n\tif (name == null) {\n\t\treturn;\n\t}\n\tconst path = (Meteor.isCordova) ? Meteor.absoluteUrl().replace(/\\/$/, '') : __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\treturn `${ path }/emoji-custom/${ encodeURIComponent(name) }.${ extension }?_dc=${ random }`;\n};\n\nBlaze.registerHelper('emojiUrlFromName', getEmojiUrlFromName);\n\ndeleteEmojiCustom = function(emojiData) {\n\tdelete RocketChat.emoji.list[`:${ emojiData.name }:`];\n\tconst arrayIndex = RocketChat.emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\tRocketChat.emoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = RocketChat.emoji.packages.emojiCustom.list.indexOf(`:${ emojiData.name }:`);\n\tif (arrayIndexList !== -1) {\n\t\tRocketChat.emoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t}\n\tif (isSetNotNull(() => emojiData.aliases)) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete RocketChat.emoji.list[`:${ alias }:`];\n\t\t\tconst aliasIndex = RocketChat.emoji.packages.emojiCustom.list.indexOf(`:${ alias }:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\tRocketChat.emoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tRocketChat.EmojiPicker.updateRecent();\n};\n\nupdateEmojiCustom = function(emojiData) {\n\tlet key = `emoji_random_${ emojiData.name }`;\n\tSession.set(key, Math.round(Math.random() * 1000));\n\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => RocketChat.emoji.list[`:${ emojiData.previousName }:`].aliases)) {\n\t\tfor (const alias of RocketChat.emoji.list[`:${ emojiData.previousName }:`].aliases) {\n\t\t\tdelete RocketChat.emoji.list[`:${ alias }:`];\n\t\t\tconst aliasIndex = RocketChat.emoji.packages.emojiCustom.list.indexOf(`:${ alias }:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\tRocketChat.emoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = RocketChat.emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\tRocketChat.emoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = RocketChat.emoji.packages.emojiCustom.list.indexOf(`:${ emojiData.previousName }:`);\n\t\tif (arrayIndexList !== -1) {\n\t\t\tRocketChat.emoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete RocketChat.emoji.list[`:${ emojiData.previousName }:`];\n\t}\n\n\tconst categoryIndex = RocketChat.emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${ emojiData.name }`);\n\tif (categoryIndex === -1) {\n\t\tRocketChat.emoji.packages.emojiCustom.emojisByCategory.rocket.push(`${ emojiData.name }`);\n\t\tRocketChat.emoji.packages.emojiCustom.list.push(`:${ emojiData.name }:`);\n\t}\n\tRocketChat.emoji.list[`:${ emojiData.name }:`] = Object.assign({ emojiPackage: 'emojiCustom' }, RocketChat.emoji.list[`:${ emojiData.name }:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tRocketChat.emoji.packages.emojiCustom.list.push(`:${ alias }:`);\n\t\t\tRocketChat.emoji.list[`:${ alias }:`] = {};\n\t\t\tRocketChat.emoji.list[`:${ alias }:`].emojiPackage = 'emojiCustom';\n\t\t\tRocketChat.emoji.list[`:${ alias }:`].aliasOf = emojiData.name;\n\t\t}\n\t}\n\n\tconst url = getEmojiUrlFromName(emojiData.name, emojiData.extension);\n\n\t//update in admin interface\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document).find(`.emojiAdminPreview-image[data-emoji='${ emojiData.previousName }']`).css('background-image', `url('${ url })'`).attr('data-emoji', `${ emojiData.name }`);\n\t} else {\n\t\t$(document).find(`.emojiAdminPreview-image[data-emoji='${ emojiData.name }']`).css('background-image', `url('${ url }')`);\n\t}\n\n\t//update in picker\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document).find(`li[data-emoji='${ emojiData.previousName }'] span`).css('background-image', `url('${ url }')`).attr('data-emoji', `${ emojiData.name }`);\n\t\t$(document).find(`li[data-emoji='${ emojiData.previousName }']`).attr('data-emoji', `${ emojiData.name }`).attr('class', `emoji-${ emojiData.name }`);\n\t} else {\n\t\t$(document).find(`li[data-emoji='${ emojiData.name }'] span`).css('background-image', `url('${ url }')`);\n\t}\n\n\t//update in picker and opened rooms\n\tfor (key in RoomManager.openedRooms) {\n\t\tif (RoomManager.openedRooms.hasOwnProperty(key)) {\n\t\t\tconst room = RoomManager.openedRooms[key];\n\t\t\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t\t\t$(room.dom).find(`span[data-emoji='${ emojiData.previousName }']`).css('background-image', `url('${ url }')`).attr('data-emoji', `${ emojiData.name }`);\n\t\t\t} else {\n\t\t\t\t$(room.dom).find(`span[data-emoji='${ emojiData.name }']`).css('background-image', `url('${ url }')`);\n\t\t\t}\n\t\t}\n\t}\n\n\tRocketChat.EmojiPicker.updateRecent();\n};\n\nMeteor.startup(() =>\n\tMeteor.call('listEmojiCustom', (error, result) => {\n\t\tRocketChat.emoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\tfor (const emoji of result) {\n\t\t\tRocketChat.emoji.packages.emojiCustom.emojisByCategory.rocket.push(emoji.name);\n\t\t\tRocketChat.emoji.packages.emojiCustom.list.push(`:${ emoji.name }:`);\n\t\t\tRocketChat.emoji.list[`:${ emoji.name }:`] = emoji;\n\t\t\tRocketChat.emoji.list[`:${ emoji.name }:`].emojiPackage = 'emojiCustom';\n\t\t\tfor (const alias of emoji['aliases']) {\n\t\t\t\tRocketChat.emoji.packages.emojiCustom.list.push(`:${ alias }:`);\n\t\t\t\tRocketChat.emoji.list[`:${ alias }:`] = {\n\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\taliasOf: emoji.name\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t})\n);\n\n/* exported getEmojiUrlFromName, updateEmojiCustom, deleteEmojiCustom */\n","class EmojiCustom extends RocketChat.models._Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('custom_emoji');\n\t}\n}\n\nRocketChat.models.EmojiCustom = new EmojiCustom();\n","/* globals updateEmojiCustom */\nMeteor.startup(() =>\n\tRocketChat.Notifications.onLogged('updateEmojiCustom', data => updateEmojiCustom(data.emojiData))\n);\n","/* globals deleteEmojiCustom */\nMeteor.startup(() =>\n\tRocketChat.Notifications.onLogged('deleteEmojiCustom', data => deleteEmojiCustom(data.emojiData))\n);\n"]}