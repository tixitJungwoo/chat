{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:highlight-words/client.js"],"names":["HighlightWordsClient","message","msg","_","isString","trim","html","to_highlight","Meteor","user","settings","preferences","highlights","Array","isArray","forEach","highlight","isBlank","replace","RegExp","s","escapeRegExp","RocketChat","callbacks","add","priority","MEDIUM"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;GAKA,SAASA,oBAAT,CAA8BC,OAA9B,EAAuC;AACtC,KAAIC,MAAMD,OAAV;;AACA,KAAI,CAACE,EAAEC,QAAF,CAAWH,OAAX,CAAL,EAA0B;AACzB,MAAIE,EAAEE,IAAF,CAAOJ,QAAQK,IAAf,CAAJ,EAA0B;AACzBJ,SAAMD,QAAQK,IAAd;AACA,GAFD,MAEO;AACN,UAAOL,OAAP;AACA;AACD;;AAED,KAAMM,eAAeC,OAAOC,IAAP,MAAiBD,OAAOC,IAAP,GAAcC,QAA/B,IAA2CF,OAAOC,IAAP,GAAcC,QAAd,CAAuBC,WAAlE,IAAiFH,OAAOC,IAAP,GAAcC,QAAd,CAAuBC,WAAvB,CAAmCC,UAAzI;;AACA,KAAIC,MAAMC,OAAN,CAAcP,YAAd,CAAJ,EAAiC;AAChCA,eAAaQ,OAAb,CAAqB,UAACC,SAAD,EAAe;AACnC,OAAI,CAACb,EAAEc,OAAF,CAAUD,SAAV,CAAL,EAA2B;AAC1B,WAAOd,MAAMA,IAAIgB,OAAJ,CAAY,IAAIC,MAAJ,iDAAqDC,EAAEC,YAAF,CAAeL,SAAf,CAArD,uEAA8I,KAA9I,CAAZ,EAAkK,4CAAlK,CAAb;AACA;AACD,GAJD;AAKA;;AAEDf,SAAQK,IAAR,GAAeJ,GAAf;AACA,QAAOD,OAAP;AACA;;AAEDqB,WAAWC,SAAX,CAAqBC,GAArB,CAAyB,eAAzB,EAA0CxB,oBAA1C,EAAgEsB,WAAWC,SAAX,CAAqBE,QAArB,CAA8BC,MAA9B,GAAuC,CAAvG,EAA0G,iBAA1G,E","file":"/packages/rocketchat_highlight-words.js","sourcesContent":["/*\n * Hilights is a named function that will process Highlights\n * @param {Object} message - The message object\n */\n\nfunction HighlightWordsClient(message) {\n\tlet msg = message;\n\tif (!_.isString(message)) {\n\t\tif (_.trim(message.html)) {\n\t\t\tmsg = message.html;\n\t\t} else {\n\t\t\treturn message;\n\t\t}\n\t}\n\n\tconst to_highlight = Meteor.user() && Meteor.user().settings && Meteor.user().settings.preferences && Meteor.user().settings.preferences.highlights;\n\tif (Array.isArray(to_highlight)) {\n\t\tto_highlight.forEach((highlight) => {\n\t\t\tif (!_.isBlank(highlight)) {\n\t\t\t\treturn msg = msg.replace(new RegExp(`(^|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,ØŒ'\\\\\\\"\\\\+!?:-])(${ s.escapeRegExp(highlight) })($|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,ØŒ'\\\\\\\"\\\\+!?:-])(?![^<]*>|[^<>]*<\\\\/)`, 'gmi'), '$1<span class=\"highlight-text\">$2</span>$3');\n\t\t\t}\n\t\t});\n\t}\n\n\tmessage.html = msg;\n\treturn message;\n}\n\nRocketChat.callbacks.add('renderMessage', HighlightWordsClient, RocketChat.callbacks.priority.MEDIUM + 1, 'highlight-words');\n"]}