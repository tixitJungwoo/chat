{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:wordpress/common.js","meteor://ðŸ’»app/packages/rocketchat:wordpress/startup.js"],"names":["config","serverURL","identityPath","addAutopublishFields","forLoggedInUser","forOtherUsers","WordPress","CustomOAuth","Meteor","isServer","startup","RocketChat","settings","get","key","value","configure","Tracker","autorun","addGroup","section","enableQuery","_id","add","type","readonly","force"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yBAEA,IAAMA,SAAS;AACdC,YAAW,EADG;AAEdC,eAAc,WAFA;AAGdC,uBAAsB;AACrBC,mBAAiB,CAAC,oBAAD,CADI;AAErBC,iBAAe,CAAC,+BAAD;AAFM;AAHR,CAAf;AASA,IAAMC,YAAY,IAAIC,WAAJ,CAAgB,WAAhB,EAA6BP,MAA7B,CAAlB;;AAEA,IAAIQ,OAAOC,QAAX,EAAqB;AACpBD,QAAOE,OAAP,CAAe,YAAW;AACzB,SAAOC,WAAWC,QAAX,CAAoBC,GAApB,CAAwB,mBAAxB,EAA6C,UAASC,GAAT,EAAcC,KAAd,EAAqB;AACxEf,UAAOC,SAAP,GAAmBc,KAAnB;AACA,UAAOT,UAAUU,SAAV,CAAoBhB,MAApB,CAAP;AACA,GAHM,CAAP;AAIA,EALD;AAMA,CAPD,MAOO;AACNQ,QAAOE,OAAP,CAAe,YAAW;AACzB,SAAOO,QAAQC,OAAR,CAAgB,YAAW;AACjC,OAAIP,WAAWC,QAAX,CAAoBC,GAApB,CAAwB,mBAAxB,CAAJ,EAAkD;AACjDb,WAAOC,SAAP,GAAmBU,WAAWC,QAAX,CAAoBC,GAApB,CAAwB,mBAAxB,CAAnB;AACA,WAAOP,UAAUU,SAAV,CAAoBhB,MAApB,CAAP;AACA;AACD,GALM,CAAP;AAMA,EAPD;AAQA,sF;;;;;;;;;;;AC7BDW,WAAWC,QAAX,CAAoBO,QAApB,CAA6B,OAA7B,EAAsC,YAAW;AAChD,QAAO,KAAKC,OAAL,CAAa,WAAb,EAA0B,YAAW;AAE3C,MAAMC,cAAc;AACnBC,QAAK,0BADc;AAEnBP,UAAO;AAFY,GAApB;AAIA,OAAKQ,GAAL,CAAS,0BAAT,EAAqC,KAArC,EAA4C;AAC3CC,SAAM,SADqC;AAE3C,aAAU;AAFiC,GAA5C;AAIA,OAAKD,GAAL,CAAS,mBAAT,EAA8B,EAA9B,EAAkC;AACjCC,SAAM,QAD2B;AAEjCH,2BAFiC;AAGjC,aAAU;AAHuB,GAAlC;AAKA,OAAKE,GAAL,CAAS,6BAAT,EAAwC,EAAxC,EAA4C;AAC3CC,SAAM,QADqC;AAE3CH;AAF2C,GAA5C;AAIA,OAAKE,GAAL,CAAS,iCAAT,EAA4C,EAA5C,EAAgD;AAC/CC,SAAM,QADyC;AAE/CH;AAF+C,GAAhD;AAIA,SAAO,KAAKE,GAAL,CAAS,uCAAT,EAAkD,kBAAlD,EAAsE;AAC5EC,SAAM,aADsE;AAE5EC,aAAU,IAFkE;AAG5EC,UAAO,IAHqE;AAI5EL;AAJ4E,GAAtE,CAAP;AAMA,EA7BM,CAAP;AA8BA,CA/BD,qF","file":"/packages/rocketchat_wordpress.js","sourcesContent":["/* globals CustomOAuth */\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/oauth/me',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.wordpress'],\n\t\tforOtherUsers: ['services.wordpress.user_login']\n\t}\n};\n\nconst WordPress = new CustomOAuth('wordpress', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function() {\n\t\treturn RocketChat.settings.get('API_Wordpress_URL', function(key, value) {\n\t\t\tconfig.serverURL = value;\n\t\t\treturn WordPress.configure(config);\n\t\t});\n\t});\n} else {\n\tMeteor.startup(function() {\n\t\treturn Tracker.autorun(function() {\n\t\t\tif (RocketChat.settings.get('API_Wordpress_URL')) {\n\t\t\t\tconfig.serverURL = RocketChat.settings.get('API_Wordpress_URL');\n\t\t\t\treturn WordPress.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","RocketChat.settings.addGroup('OAuth', function() {\n\treturn this.section('WordPress', function() {\n\n\t\tconst enableQuery = {\n\t\t\t_id: 'Accounts_OAuth_Wordpress',\n\t\t\tvalue: true\n\t\t};\n\t\tthis.add('Accounts_OAuth_Wordpress', false, {\n\t\t\ttype: 'boolean',\n\t\t\t'public': true\n\t\t});\n\t\tthis.add('API_Wordpress_URL', '', {\n\t\t\ttype: 'string',\n\t\t\tenableQuery,\n\t\t\t'public': true\n\t\t});\n\t\tthis.add('Accounts_OAuth_Wordpress_id', '', {\n\t\t\ttype: 'string',\n\t\t\tenableQuery\n\t\t});\n\t\tthis.add('Accounts_OAuth_Wordpress_secret', '', {\n\t\t\ttype: 'string',\n\t\t\tenableQuery\n\t\t});\n\t\treturn this.add('Accounts_OAuth_Wordpress_callback_url', '_oauth/wordpress', {\n\t\t\ttype: 'relativeUrl',\n\t\t\treadonly: true,\n\t\t\tforce: true,\n\t\t\tenableQuery\n\t\t});\n\t});\n});\n"]}