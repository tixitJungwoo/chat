{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:message-mark-as-unread/client/actionButton.js"],"names":["Meteor","startup","RocketChat","MessageAction","addButton","id","icon","i18nLabel","context","action","message","_arguments","hideDropDown","call","error","handleError","subscription","ChatSubscription","findOne","rid","RoomManager","close","t","name","FlowRouter","go","validation","u","_id","user","order"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,OAAOC,OAAP,CAAe,YAAM;AACpB,QAAOC,WAAWC,aAAX,CAAyBC,SAAzB,CAAmC;AACzCC,MAAI,wBADqC;AAEzCC,QAAM,WAFmC;AAGzCC,aAAW,gBAH8B;AAIzCC,WAAS,CAAC,SAAD,EAAY,gBAAZ,CAJgC;AAKzCC,QALyC,cAKhC;AACR,OAAMC,UAAU,KAAKC,UAAL,CAAgB,CAAhB,CAAhB;AACAT,cAAWC,aAAX,CAAyBS,YAAzB;AACA,UAAOZ,OAAOa,IAAP,CAAY,gBAAZ,EAA8BH,OAA9B,EAAuC,UAASI,KAAT,EAAgB;AAC7D,QAAIA,KAAJ,EAAW;AACV,YAAOC,YAAYD,KAAZ,CAAP;AACA;;AACD,QAAME,eAAeC,iBAAiBC,OAAjB,CAAyB;AAC7CC,UAAKT,QAAQS;AADgC,KAAzB,CAArB;;AAGA,QAAIH,gBAAgB,IAApB,EAA0B;AACzB;AACA;;AACDI,gBAAYC,KAAZ,CAAkBL,aAAaM,CAAb,GAAiBN,aAAaO,IAAhD;AACA,WAAOC,WAAWC,EAAX,CAAc,MAAd,CAAP;AACA,IAZM,CAAP;AAaA,GArBwC;AAsBzCC,YAtByC,YAsB9BhB,OAtB8B,EAsBrB;AACnB,UAAOA,QAAQiB,CAAR,CAAUC,GAAV,KAAkB5B,OAAO6B,IAAP,GAAcD,GAAvC;AACA,GAxBwC;AAyBzCE,SAAO;AAzBkC,EAAnC,CAAP;AA2BA,CA5BD,yE","file":"/packages/rocketchat_message-mark-as-unread.js","sourcesContent":["Meteor.startup(() => {\n\treturn RocketChat.MessageAction.addButton({\n\t\tid: 'mark-message-as-unread',\n\t\ticon: 'icon-flag',\n\t\ti18nLabel: 'Mark_as_unread',\n\t\tcontext: ['message', 'message-mobile'],\n\t\taction() {\n\t\t\tconst message = this._arguments[1];\n\t\t\tRocketChat.MessageAction.hideDropDown();\n\t\t\treturn Meteor.call('unreadMessages', message, function(error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t\tconst subscription = ChatSubscription.findOne({\n\t\t\t\t\trid: message.rid\n\t\t\t\t});\n\t\t\t\tif (subscription == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRoomManager.close(subscription.t + subscription.name);\n\t\t\t\treturn FlowRouter.go('home');\n\t\t\t});\n\t\t},\n\t\tvalidation(message) {\n\t\t\treturn message.u._id !== Meteor.user()._id;\n\t\t},\n\t\torder: 22\n\t});\n});\n"]}