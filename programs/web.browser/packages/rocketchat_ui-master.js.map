{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:ui-master/client/main.js"],"names":["Clipboard","module","watch","require","v","Template","body","onRendered","$","document","on","e","keyCode","ctrlKey","metaKey","shiftKey","preventDefault","stopPropagation","toolbarSearch","focus","unread","Session","get","swal","title","t","type","confirmButtonText","showCancelButton","cancelButtonText","confirmButtonColor","subscriptions","ChatSubscription","find","open","fields","alert","rid","name","ls","forEach","subscription","Meteor","call","target","test","tagName","id","inputMessage","length","link","currentTarget","origin","s","rtrim","absoluteUrl","search","RocketChat","Layout","isEmbedded","fireGlobalEvent","pathname","FlowRouter","go","current","queryParams","Tracker","autorun","c","w","window","d","l","i","settings","Match","String","trim","stop","push","Date","getTime","event","f","getElementsByTagName","j","createElement","dl","async","src","parentNode","insertBefore","isCordova","addClass","main","helpers","siteName","logged","userId","removeClass","useIframe","iframeEnabled","iframeLogin","reactiveEnabled","iframeUrl","reactiveIframeUrl","subsReady","routerReady","subscriptionsReady","CachedChatSubscription","ready","CachedCollectionManager","syncEnabled","hasUsername","user","username","requirePasswordChange","CustomScriptLoggedOut","script","CustomScriptLoggedIn","embeddedVersion","events","rocketDebug","console","log","menu","toggle","clientWidth","touchstartX","undefined","touchstartY","movestarted","blockmove","isRtl","localStorage","getItem","closest","originalEvent","touches","clientX","clientY","mainContent","wrapper","touch","diffX","diffY","absX","Math","abs","absY","isOpen","diff","css","close","remove","addEventListener","setTimeout","is","setDefaults","prefs","preferences","hideUsernames","tooltip","hide","avatarElem","attr","showElement","text","off","startup"],"mappings":"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","file":"/packages/rocketchat_ui-master.js","sourcesContent":["/* globals toolbarSearch, menu, isRtl, fireGlobalEvent, CachedChatSubscription */\nimport Clipboard from 'clipboard';\n\nTemplate.body.onRendered(function() {\n\tnew Clipboard('.clipboard');\n\n\t$(document.body).on('keydown', function(e) {\n\t\tif ((e.keyCode === 80 || e.keyCode === 75) && (e.ctrlKey === true || e.metaKey === true) && e.shiftKey === false) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\ttoolbarSearch.focus(true);\n\t\t}\n\t\tconst unread = Session.get('unread');\n\t\tif (e.keyCode === 27 && e.shiftKey === true && (unread != null) && unread !== '') {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\treturn swal({\n\t\t\t\ttitle: t('Clear_all_unreads_question'),\n\t\t\t\ttype: 'warning',\n\t\t\t\tconfirmButtonText: t('Yes_clear_all'),\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcancelButtonText: t('Cancel'),\n\t\t\t\tconfirmButtonColor: '#DD6B55'\n\t\t\t}, function() {\n\t\t\t\tconst subscriptions = ChatSubscription.find({\n\t\t\t\t\topen: true\n\t\t\t\t}, {\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tunread: 1,\n\t\t\t\t\t\talert: 1,\n\t\t\t\t\t\trid: 1,\n\t\t\t\t\t\tt: 1,\n\t\t\t\t\t\tname: 1,\n\t\t\t\t\t\tls: 1\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tsubscriptions.forEach((subscription) =>{\n\t\t\t\t\tif (subscription.alert || subscription.unread > 0) {\n\t\t\t\t\t\tMeteor.call('readMessages', subscription.rid);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\n\t$(document.body).on('keydown', function(e) {\n\t\tconst target = e.target;\n\t\tif (e.ctrlKey === true || e.metaKey === true) {\n\t\t\treturn;\n\t\t}\n\t\tif (!(e.keyCode > 45 && e.keyCode < 91 || e.keyCode === 8)) {\n\t\t\treturn;\n\t\t}\n\t\tif (/input|textarea|select/i.test(target.tagName)) {\n\t\t\treturn;\n\t\t}\n\t\tif (target.id === 'pswp') {\n\t\t\treturn;\n\t\t}\n\t\tconst inputMessage = $('textarea.input-message');\n\t\tif (inputMessage.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\treturn inputMessage.focus();\n\t});\n\t$(document.body).on('click', 'a', function(e) {\n\t\tconst link = e.currentTarget;\n\t\tif (link.origin === s.rtrim(Meteor.absoluteUrl(), '/') && /msg=([a-zA-Z0-9]+)/.test(link.search)) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tif (RocketChat.Layout.isEmbedded()) {\n\t\t\t\treturn fireGlobalEvent('click-message-link', {\n\t\t\t\t\tlink: link.pathname + link.search\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn FlowRouter.go(link.pathname + link.search, null, FlowRouter.current().queryParams);\n\t\t}\n\t});\n\tTracker.autorun(function(c) {\n\t\tconst w = window;\n\t\tconst d = document;\n\t\tconst s = 'script';\n\t\tconst l = 'dataLayer';\n\t\tconst i = RocketChat.settings.get('GoogleTagManager_id');\n\t\tif (Match.test(i, String) && i.trim() !== '') {\n\t\t\tc.stop();\n\t\t\treturn (function(w, d, s, l, i) {\n\t\t\t\tw[l] = w[l] || [];\n\t\t\t\tw[l].push({\n\t\t\t\t\t'gtm.start': new Date().getTime(),\n\t\t\t\t\tevent: 'gtm.js'\n\t\t\t\t});\n\t\t\t\tconst f = d.getElementsByTagName(s)[0];\n\t\t\t\tconst j = d.createElement(s);\n\t\t\t\tconst dl = l !== 'dataLayer' ? `&l=${ l }` : '';\n\t\t\t\tj.async = true;\n\t\t\t\tj.src = `//www.googletagmanager.com/gtm.js?id=${ i }${ dl }`;\n\t\t\t\treturn f.parentNode.insertBefore(j, f);\n\t\t\t}(w, d, s, l, i));\n\t\t}\n\t});\n\tif (Meteor.isCordova) {\n\t\treturn $(document.body).addClass('is-cordova');\n\t}\n});\n\nTemplate.main.helpers({\n\tsiteName() {\n\t\treturn RocketChat.settings.get('Site_Name');\n\t},\n\tlogged() {\n\t\tif (Meteor.userId() != null || (RocketChat.settings.get('Accounts_AllowAnonymousRead') === true && Session.get('forceLogin') !== true)) {\n\t\t\t$('html').addClass('noscroll').removeClass('scroll');\n\t\t\treturn true;\n\t\t} else {\n\t\t\t$('html').addClass('scroll').removeClass('noscroll');\n\t\t\treturn false;\n\t\t}\n\t},\n\tuseIframe() {\n\t\tconst iframeEnabled = typeof RocketChat.iframeLogin !== 'undefined';\n\t\treturn iframeEnabled && RocketChat.iframeLogin.reactiveEnabled.get();\n\t},\n\tiframeUrl() {\n\t\tconst iframeEnabled = typeof RocketChat.iframeLogin !== 'undefined';\n\t\treturn iframeEnabled && RocketChat.iframeLogin.reactiveIframeUrl.get();\n\t},\n\tsubsReady() {\n\t\tconst routerReady = FlowRouter.subsReady('userData', 'activeUsers');\n\t\tconst subscriptionsReady = CachedChatSubscription.ready.get();\n\t\tconst ready = (Meteor.userId() == null) || (routerReady && subscriptionsReady);\n\t\tRocketChat.CachedCollectionManager.syncEnabled = ready;\n\t\treturn ready;\n\t},\n\thasUsername() {\n\t\treturn (Meteor.userId() != null && Meteor.user().username != null) || (Meteor.userId() == null && RocketChat.settings.get('Accounts_AllowAnonymousRead') === true);\n\t},\n\trequirePasswordChange() {\n\t\tconst user = Meteor.user();\n\t\treturn user && user.requirePasswordChange === true;\n\t},\n\tCustomScriptLoggedOut() {\n\t\tconst script = RocketChat.settings.get('Custom_Script_Logged_Out') || '';\n\t\tif (script.trim()) {\n\t\t\teval(script);//eslint-disable-line\n\t\t}\n\t},\n\tCustomScriptLoggedIn() {\n\t\tconst script = RocketChat.settings.get('Custom_Script_Logged_In') || '';\n\t\tif (script.trim()) {\n\t\t\teval(script);//eslint-disable-line\n\t\t}\n\t},\n\tembeddedVersion() {\n\t\tif (RocketChat.Layout.isEmbedded()) {\n\t\t\treturn 'embedded-view';\n\t\t}\n\t}\n});\n\nTemplate.main.events({\n\t'click .burger'() {\n\t\tif (window.rocketDebug) {\n\t\t\tconsole.log('room click .burger');\n\t\t}\n\t\treturn menu.toggle();\n\t},\n\t'touchstart'(e, t) {\n\t\tif (document.body.clientWidth > 780) {\n\t\t\treturn;\n\t\t}\n\t\tt.touchstartX = undefined;\n\t\tt.touchstartY = undefined;\n\t\tt.movestarted = false;\n\t\tt.blockmove = false;\n\t\tt.isRtl = isRtl(localStorage.getItem('userLanguage'));\n\t\tif ($(e.currentTarget).closest('.main-content').length > 0) {\n\t\t\tt.touchstartX = e.originalEvent.touches[0].clientX;\n\t\t\tt.touchstartY = e.originalEvent.touches[0].clientY;\n\t\t\tt.mainContent = $('.main-content');\n\t\t\treturn t.wrapper = $('.messages-box > .wrapper');\n\t\t}\n\t},\n\t'touchmove'(e, t) {\n\t\tif (t.touchstartX != null) {\n\t\t\tconst [touch] = e.originalEvent.touches;\n\t\t\tconst diffX = touch.clientX - t.touchstartX;\n\t\t\tconst diffY = touch.clientY - t.touchstartY;\n\t\t\tconst absX = Math.abs(diffX);\n\t\t\tconst absY = Math.abs(diffY);\n\t\t\tif (t.movestarted !== true && t.blockmove !== true && absY > 5) {\n\t\t\t\tt.blockmove = true;\n\t\t\t}\n\t\t\tif (t.blockmove !== true && (t.movestarted === true || absX > 5)) {\n\t\t\t\tt.movestarted = true;\n\t\t\t\tif (t.isRtl) {\n\t\t\t\t\tif (menu.isOpen()) {\n\t\t\t\t\t\tt.diff = -260 + diffX;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tt.diff = diffX;\n\t\t\t\t\t}\n\t\t\t\t\tif (t.diff < -260) {\n\t\t\t\t\t\tt.diff = -260;\n\t\t\t\t\t}\n\t\t\t\t\tif (t.diff > 0) {\n\t\t\t\t\t\tt.diff = 0;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (menu.isOpen()) {\n\t\t\t\t\t\tt.diff = 260 + diffX;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tt.diff = diffX;\n\t\t\t\t\t}\n\t\t\t\t\tif (t.diff > 260) {\n\t\t\t\t\t\tt.diff = 260;\n\t\t\t\t\t}\n\t\t\t\t\tif (t.diff < 0) {\n\t\t\t\t\t\tt.diff = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt.mainContent.addClass('notransition');\n\t\t\t\tt.mainContent.css('transform', `translate(${ t.diff }px)`);\n\t\t\t\treturn t.wrapper.css('overflow', 'hidden');\n\t\t\t}\n\t\t}\n\t},\n\t'touchend'(e, t) {\n\t\tif (t.movestarted === true) {\n\t\t\tt.mainContent.removeClass('notransition');\n\t\t\tt.wrapper.css('overflow', '');\n\t\t\tif (t.isRtl) {\n\t\t\t\tif (menu.isOpen()) {\n\t\t\t\t\tif (t.diff >= -200) {\n\t\t\t\t\t\treturn menu.close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn menu.open();\n\t\t\t\t\t}\n\t\t\t\t} else if (t.diff <= -60) {\n\t\t\t\t\treturn menu.open();\n\t\t\t\t} else {\n\t\t\t\t\treturn menu.close();\n\t\t\t\t}\n\t\t\t} else if (menu.isOpen()) {\n\t\t\t\tif (t.diff >= 200) {\n\t\t\t\t\treturn menu.open();\n\t\t\t\t} else {\n\t\t\t\t\treturn menu.close();\n\t\t\t\t}\n\t\t\t} else if (t.diff >= 60) {\n\t\t\t\treturn menu.open();\n\t\t\t} else {\n\t\t\t\treturn menu.close();\n\t\t\t}\n\t\t}\n\t}\n});\n\nTemplate.main.onRendered(function() {\n\tif (isRtl(localStorage.getItem('userLanguage'))) {\n\t\t$('html').addClass('rtl');\n\t} else {\n\t\t$('html').removeClass('rtl');\n\t}\n\t$('#initial-page-loading').remove();\n\twindow.addEventListener('focus', function() {\n\t\treturn Meteor.setTimeout(function() {\n\t\t\tif (!$(':focus').is('INPUT,TEXTAREA')) {\n\t\t\t\treturn $('.input-message').focus();\n\t\t\t}\n\t\t}, 100);\n\t});\n\treturn Tracker.autorun(function() {\n\t\tswal.setDefaults({\n\t\t\tcancelButtonText: t('Cancel')\n\t\t});\n\t\tconst user = Meteor.user();\n\t\tconst settings = user && user.settings;\n\t\tconst prefs = settings && settings.preferences;\n\t\tif (prefs && prefs.hideUsernames != null) {\n\t\t\t$(document.body).on('mouseleave', 'button.thumb', function() {\n\t\t\t\treturn RocketChat.tooltip.hide();\n\t\t\t});\n\t\t\treturn $(document.body).on('mouseenter', 'button.thumb', function(e) {\n\t\t\t\tconst avatarElem = $(e.currentTarget);\n\t\t\t\tconst username = avatarElem.attr('data-username');\n\t\t\t\tif (username) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\treturn RocketChat.tooltip.showElement($('<span>').text(username), avatarElem);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$(document.body).off('mouseenter', 'button.thumb');\n\t\t\treturn $(document.body).off('mouseleave', 'button.thumb');\n\t\t}\n\t});\n});\n\nMeteor.startup(function() {\n\treturn fireGlobalEvent('startup', true);\n});\n"]}